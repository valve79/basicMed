function validElementString(e){try{return 0!==angular.element(e).length}catch(t){return!1}}function registerTextAngularTool(e,t){if(!e||""===e||taTools.hasOwnProperty(e))throw"textAngular Error: A unique name is required for a Tool Definition";if(t.display&&(""===t.display||!validElementString(t.display))||!t.display&&!t.buttontext&&!t.iconclass)throw'textAngular Error: Tool Definition for "'+e+'" does not have a valid display/iconclass/buttontext value';taTools[e]=t}!function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("TextRange",["WrappedSelection"],function(e,t){function n(e,t){function n(e,t,n){s.push({start:e,end:t,isWord:n})}for(var i,r,a,o=e.join(""),s=[],l=0;i=t.wordRegex.exec(o);){if(r=i.index,a=r+i[0].length,r>l&&n(l,r,!1),t.includeTrailingSpace)for(;J.test(e[a]);)++a;n(r,a,!0),l=a}return l<e.length&&n(l,e.length,!1),s}function i(e,t){for(var n=e.slice(t.start,t.end),i={isWord:t.isWord,chars:n,toString:function(){return n.join("")}},r=0,a=n.length;a>r;++r)n[r].token=i;return i}function r(e,t,n){for(var r,a=n(e,t),o=[],s=0;r=a[s++];)o.push(i(e,r));return o}function a(e){var t=e||"",n="string"==typeof t?t.split(""):t;return n.sort(function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)}),n.join("").replace(/(.)\1+/g,"$1")}function o(e){var t,n;return e?(t=e.language||Z,n={},W(n,le[t]||le[Z]),W(n,e),n):le[Z]}function s(e,t){var n=G(e,t);return t.hasOwnProperty("wordOptions")&&(n.wordOptions=o(n.wordOptions)),t.hasOwnProperty("characterOptions")&&(n.characterOptions=G(n.characterOptions,oe)),n}function l(e,t){var n=pe(e,"display",t),i=e.tagName.toLowerCase();return"block"==n&&ae&&he.hasOwnProperty(i)?he[i]:n}function c(e){for(var t=h(e),n=0,i=t.length;i>n;++n)if(1==t[n].nodeType&&"none"==l(t[n]))return!0;return!1}function u(e){var t;return 3==e.nodeType&&(t=e.parentNode)&&"hidden"==pe(t,"visibility")}function d(e){return e&&(1==e.nodeType&&!/^(inline(-block|-table)?|none)$/.test(l(e))||9==e.nodeType||11==e.nodeType)}function f(e){return q.isCharacterDataNode(e)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(e.nodeName)}function p(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}function h(e){return p(e).concat([e])}function g(e){for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null}function m(e,t){return!t&&e.hasChildNodes()?e.firstChild:g(e)}function v(e){var t=e.previousSibling;if(t){for(e=t;e.hasChildNodes();)e=e.lastChild;return e}var n=e.parentNode;return n&&1==n.nodeType?n:null}function y(e){if(!e||3!=e.nodeType)return!1;var t=e.data;if(""===t)return!0;var n=e.parentNode;if(!n||1!=n.nodeType)return!1;var i=pe(e.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(i)||/^[\t\r ]+$/.test(t)&&"pre-line"==i}function $(e){if(""===e.data)return!0;if(!y(e))return!1;var t=e.parentNode;return t?c(e)?!0:!1:!0}function b(e){var t=e.nodeType;return 7==t||8==t||c(e)||/^(script|style)$/i.test(e.nodeName)||u(e)||$(e)}function w(e,t){var n=e.nodeType;return 7==n||8==n||1==n&&"none"==l(e,t)}function x(){this.store={}}function S(e,t,n){return function(i){var r=this.cache;if(r.hasOwnProperty(e))return ge++,r[e];me++;var a=t.call(this,n?this[n]:this,i);return r[e]=a,a}}function C(e,t){this.node=e,this.session=t,this.cache=new x,this.positions=new x}function k(e,t){this.offset=t,this.nodeWrapper=e,this.node=e.node,this.session=e.session,this.cache=new x}function E(){return"[Position("+q.inspectNode(this.node)+":"+this.offset+")]"}function A(){return D(),De=new _e}function T(){return De||A()}function D(){De&&De.detach(),De=null}function _(e,n,i,r){function a(){var e=null;return n?(e=s,l||(s=s.previousVisible(),l=!s||i&&s.equals(i))):l||(e=s=s.nextVisible(),l=!s||i&&s.equals(i)),l&&(s=null),e}i&&(n?b(i.node)&&(i=e.previousVisible()):b(i.node)&&(i=i.nextVisible()));var o,s=e,l=!1,c=!1;return{next:function(){if(c)return c=!1,o;for(var e,t;e=a();)if(t=e.getCharacter(r))return o=e,e;return null},rewind:function(){if(!o)throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");c=!0},dispose:function(){e=i=null}}}function I(e,t,n){function i(e){for(var t,n,i=[],r=e?a:o,s=!1,l=!1;t=r.next();){if(n=t.character,Q.test(n))l&&(l=!1,s=!0);else{if(s){r.rewind();break}l=!0}i.push(t)}return i}var a=_(e,!1,null,t),o=_(e,!0,null,t),s=n.tokenizer,l=i(!0),c=i(!1).reverse(),u=r(c.concat(l),n,s),d=l.length?u.slice(Ie(u,l[0].token)):[],f=c.length?u.slice(0,Ie(u,c.pop().token)+1):[];return{nextEndToken:function(){for(var e,t;1==d.length&&!(e=d[0]).isWord&&(t=i(!0)).length>0;)d=r(e.chars.concat(t),n,s);return d.shift()},previousStartToken:function(){for(var e,t;1==f.length&&!(e=f[0]).isWord&&(t=i(!1)).length>0;)f=r(t.reverse().concat(e.chars),n,s);return f.pop()},dispose:function(){a.dispose(),o.dispose(),d=f=null}}}function P(e,t,n,i,r){var a,o,s,l,c=0,u=e,d=Math.abs(n);if(0!==n){var f=0>n;switch(t){case j:for(o=_(e,f,null,i);(a=o.next())&&d>c;)++c,u=a;s=a,o.dispose();break;case z:for(var p=I(e,i,r),h=f?p.previousStartToken:p.nextEndToken;(l=h())&&d>c;)l.isWord&&(++c,u=f?l.chars[0]:l.chars[l.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented")}f?(u=u.previousVisible(),c=-c):u&&u.isLeadingSpace&&!u.isTrailingSpace&&(t==z&&(o=_(e,!1,null,i),s=o.next(),o.dispose()),s&&(u=s.previousVisible()))}return{position:u,unitsMoved:c}}function M(e,t,n,i){var r=e.getRangeBoundaryPosition(t,!0),a=e.getRangeBoundaryPosition(t,!1),o=i?a:r,s=i?r:a;return _(o,!!i,s,n)}function R(e,t,n){for(var i,r=[],a=M(e,t,n);i=a.next();)r.push(i);return a.dispose(),r}function F(t,n,i){var r=e.createRange(t.node);return r.setStartAndEnd(t.node,t.offset,n.node,n.offset),!r.expand("word",{wordOptions:i})}function N(e,t,n,i,r){function a(e,t){var n=g[e].previousVisible(),i=g[t-1],a=!r.wholeWordsOnly||F(n,i,r.wordOptions);return{startPos:n,endPos:i,valid:a}}for(var o,s,l,c,u,d,f=ee(r.direction),p=_(e,f,e.session.getRangeBoundaryPosition(i,f),r.characterOptions),h="",g=[],m=null;o=p.next();)if(s=o.character,n||r.caseSensitive||(s=s.toLowerCase()),f?(g.unshift(o),h=s+h):(g.push(o),h+=s),n){if(u=t.exec(h))if(l=u.index,c=l+u[0].length,d){if(!f&&c<h.length||f&&l>0){m=a(l,c);break}}else d=!0}else if(-1!=(l=h.indexOf(t))){m=a(l,l+t.length);break}return d&&(m=a(l,c)),p.dispose(),m}function L(e){return function(){var t=!!De,n=T(),i=[n].concat(V.toArray(arguments)),r=e.apply(this,i);return t||D(),r}}function O(e,t){return L(function(n,i,r,a){typeof r==H&&(r=i,i=j),a=s(a,ue);var o=e;t&&(o=r>=0,this.collapse(!o));var l=P(n.getRangeBoundaryPosition(this,o),i,r,a.characterOptions,a.wordOptions),c=l.position;return this[o?"setStart":"setEnd"](c.node,c.offset),l.unitsMoved})}function B(e){return L(function(t,n){n=G(n,oe);for(var i,r=M(t,this,n,!e),a=0;(i=r.next())&&Q.test(i.character);)++a;r.dispose();var o=a>0;return o&&this[e?"moveStart":"moveEnd"]("character",e?a:-a,{characterOptions:n}),o})}function U(e){return L(function(t,n){var i=!1;return this.changeEachRange(function(t){i=t[e](n)||i}),i})}var H="undefined",j="character",z="word",q=e.dom,V=e.util,W=V.extend,G=V.createOptions,K=q.getBody,X=/^[ \t\f\r\n]+$/,Y=/^[ \t\f\r]+$/,Q=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,J=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,Z="en",ee=e.Selection.isDirectionBackward,te=!1,ne=!1,ie=!1,re=!0;!function(){var t=q.createTestElement(document,"<p>1 </p><p></p>",!0),n=t.firstChild,i=e.getSelection();i.collapse(n.lastChild,2),i.setStart(n.firstChild,0),te=1==(""+i).length,t.innerHTML="1 <br />",i.collapse(t,2),i.setStart(t.firstChild,0),ne=1==(""+i).length,t.innerHTML="1 <p>1</p>",i.collapse(t,2),i.setStart(t.firstChild,0),ie=1==(""+i).length,q.removeNode(t),i.removeAllRanges()}();var ae,oe={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""},se={includeBlockContentTrailingSpace:!re,includeSpaceBeforeBr:!ne,includeSpaceBeforeBlock:!ie,includePreLineTrailingSpace:!0},le={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:n}},ce={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},ue={wordOptions:null,characterOptions:null},de={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},fe={wordOptions:null,characterOptions:null,direction:"forward"},pe=q.getComputedStyleProperty;!function(){var e=document.createElement("table"),t=K(document);t.appendChild(e),ae="block"==pe(e,"display"),t.removeChild(e)}();var he={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};x.prototype={get:function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},set:function(e,t){return this.store[e]=t}};var ge=0,me=0,ve={getPosition:function(e){var t=this.positions;return t.get(e)||t.set(e,new k(this,e))},toString:function(){return"[NodeWrapper("+q.inspectNode(this.node)+")]"}};C.prototype=ve;var ye="EMPTY",$e="NON_SPACE",be="UNCOLLAPSIBLE_SPACE",we="COLLAPSIBLE_SPACE",xe="TRAILING_SPACE_BEFORE_BLOCK",Se="TRAILING_SPACE_IN_BLOCK",Ce="TRAILING_SPACE_BEFORE_BR",ke="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",Ee="TRAILING_LINE_BREAK_AFTER_BR",Ae="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";W(ve,{isCharacterDataNode:S("isCharacterDataNode",q.isCharacterDataNode,"node"),getNodeIndex:S("nodeIndex",q.getNodeIndex,"node"),getLength:S("nodeLength",q.getNodeLength,"node"),containsPositions:S("containsPositions",f,"node"),isWhitespace:S("isWhitespace",y,"node"),isCollapsedWhitespace:S("isCollapsedWhitespace",$,"node"),getComputedDisplay:S("computedDisplay",l,"node"),isCollapsed:S("collapsed",b,"node"),isIgnored:S("ignored",w,"node"),next:S("nextPos",m,"node"),previous:S("previous",v,"node"),getTextNodeInfo:S("textNodeInfo",function(e){var t=null,n=!1,i=pe(e.parentNode,"whiteSpace"),r="pre-line"==i;return r?(t=Y,n=!0):("normal"==i||"nowrap"==i)&&(t=X,n=!0),{node:e,text:e.data,spaceRegex:t,collapseSpaces:n,preLine:r}},"node"),hasInnerText:S("hasInnerText",function(e,t){for(var n=this.session,i=n.getPosition(e.parentNode,this.getNodeIndex()+1),r=n.getPosition(e,0),a=t?i:r,o=t?r:i;a!==o;){if(a.prepopulateChar(),a.isDefinitelyNonEmpty())return!0;a=t?a.previousVisible():a.nextVisible()}return!1},"node"),isRenderedBlock:S("isRenderedBlock",function(e){for(var t=e.getElementsByTagName("br"),n=0,i=t.length;i>n;++n)if(!b(t[n]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:S("trailingSpace",function(e){if("br"==e.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var t=e.lastChild;t;){if(!w(t))return 1==t.nodeType?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"	";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:S("leadingSpace",function(e){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});var Te={character:"",characterType:ye,isBr:!1,prepopulateChar:function(){var e=this;if(!e.prepopulatedChar){var t=e.node,n=e.offset,i="",r=ye,a=!1;if(n>0)if(3==t.nodeType){var o=t.data,s=o.charAt(n-1),l=e.nodeWrapper.getTextNodeInfo(),c=l.spaceRegex;l.collapseSpaces?c.test(s)?n>1&&c.test(o.charAt(n-2))||(l.preLine&&"\n"===o.charAt(n)?(i=" ",r=ke):(i=" ",r=we)):(i=s,r=$e,a=!0):(i=s,r=be,a=!0)}else{var u=t.childNodes[n-1];if(u&&1==u.nodeType&&!b(u)&&("br"==u.tagName.toLowerCase()?(i="\n",e.isBr=!0,r=we,a=!1):e.checkForTrailingSpace=!0),!i){var d=t.childNodes[n];d&&1==d.nodeType&&!b(d)&&(e.checkForLeadingSpace=!0)}}e.prepopulatedChar=!0,e.character=i,e.characterType=r,e.isCharInvariant=a}},isDefinitelyNonEmpty:function(){var e=this.characterType;return e==$e||e==be},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();e&&(this.isTrailingSpace=!0,this.character=e,this.characterType=we),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();t&&(this.isLeadingSpace=!0,this.character=t,this.characterType=we),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(e){for(var t,n=this;n=n.previousVisible();)if(t=n.getCharacter(e),""!==t)return n;return null},getCharacter:function(e){function t(){return p||(u=h.getPrecedingUncollapsedPosition(e),p=!0),u}this.resolveLeadingAndTrailingSpaces();var n,i=this.character,r=a(e.ignoreCharacters),o=""!==i&&r.indexOf(i)>-1;if(this.isCharInvariant)return n=o?"":i;var s=["character",e.includeSpaceBeforeBr,e.includeBlockContentTrailingSpace,e.includePreLineTrailingSpace,r].join("_"),l=this.cache.get(s);if(null!==l)return l;var c,u,d="",f=this.characterType==we,p=!1,h=this;return f&&(this.type==Ae?d="\n":" "==i&&(!t()||u.isTrailingSpace||"\n"==u.character||" "==u.character&&u.characterType==we)||("\n"==i&&this.isLeadingSpace?t()&&"\n"!=u.character&&(d="\n"):(c=this.nextUncollapsed(),c&&(c.isBr?this.type=Ce:c.isTrailingSpace&&"\n"==c.character?this.type=Se:c.isLeadingSpace&&"\n"==c.character&&(this.type=xe),"\n"==c.character?(this.type!=Ce||e.includeSpaceBeforeBr)&&(this.type!=xe||e.includeSpaceBeforeBlock)&&(this.type==Se&&c.isTrailingSpace&&!e.includeBlockContentTrailingSpace||(this.type!=ke||c.type!=$e||e.includePreLineTrailingSpace)&&("\n"==i?c.isTrailingSpace?this.isTrailingSpace||this.isBr&&(c.type=Ee,t()&&u.isLeadingSpace&&!u.isTrailingSpace&&"\n"==u.character?c.character="":c.type=Ae):d="\n":" "==i&&(d=" "))):d=i)))),r.indexOf(d)>-1&&(d=""),this.cache.set(s,d),d},equals:function(e){return!!e&&this.node===e.node&&this.offset===e.offset},inspect:E,toString:function(){return this.character}};k.prototype=Te,W(Te,{next:S("nextPos",function(e){var t=e.nodeWrapper,n=e.node,i=e.offset,r=t.session;if(!n)return null;var a,o,s;return i==t.getLength()?(a=n.parentNode,o=a?t.getNodeIndex()+1:0):t.isCharacterDataNode()?(a=n,o=i+1):(s=n.childNodes[i],r.getNodeWrapper(s).containsPositions()?(a=s,o=0):(a=n,o=i+1)),a?r.getPosition(a,o):null}),previous:S("previous",function(e){var t,n,i,r=e.nodeWrapper,a=e.node,o=e.offset,s=r.session;return 0==o?(t=a.parentNode,n=t?r.getNodeIndex():0):r.isCharacterDataNode()?(t=a,n=o-1):(i=a.childNodes[o-1],s.getNodeWrapper(i).containsPositions()?(t=i,n=q.getNodeLength(i)):(t=a,n=o-1)),t?s.getPosition(t,n):null}),nextVisible:S("nextVisible",function(e){var t=e.next();if(!t)return null;var n=t.nodeWrapper,i=t.node,r=t;return n.isCollapsed()&&(r=n.session.getPosition(i.parentNode,n.getNodeIndex()+1)),r}),nextUncollapsed:S("nextUncollapsed",function(e){for(var t=e;t=t.nextVisible();)if(t.resolveLeadingAndTrailingSpaces(),""!==t.character)return t;return null}),previousVisible:S("previousVisible",function(e){var t=e.previous();if(!t)return null;var n=t.nodeWrapper,i=t.node,r=t;return n.isCollapsed()&&(r=n.session.getPosition(i.parentNode,n.getNodeIndex())),r})});var De=null,_e=function(){function e(e){var t=new x;return{get:function(n){var i=t.get(n[e]);if(i)for(var r,a=0;r=i[a++];)if(r.node===n)return r;return null},set:function(n){var i=n.node[e],r=t.get(i)||t.set(i,[]);r.push(n)}}}function t(){this.initCaches()}var n=V.isHostProperty(document.documentElement,"uniqueID");return t.prototype={initCaches:function(){this.elementCache=n?function(){var e=new x;return{get:function(t){return e.get(t.uniqueID)},set:function(t){e.set(t.node.uniqueID,t)}}}():e("tagName"),this.textNodeCache=e("data"),this.otherNodeCache=e("nodeName")},getNodeWrapper:function(e){var t;switch(e.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}var n=t.get(e);return n||(n=new C(e,this),t.set(n)),n},getPosition:function(e,t){return this.getNodeWrapper(e).getPosition(t)},getRangeBoundaryPosition:function(e,t){var n=t?"start":"end";return this.getPosition(e[n+"Container"],e[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},t}();W(q,{nextNode:m,previousNode:v});var Ie=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,i=e.length;i>n;++n)if(e[n]===t)return n;return-1};W(e.rangePrototype,{moveStart:O(!0,!1),moveEnd:O(!1,!1),move:O(!0,!0),trimStart:B(!0),trimEnd:B(!1),trim:L(function(e,t){var n=this.trimStart(t),i=this.trimEnd(t);return n||i}),expand:L(function(e,t,n){var i=!1;n=s(n,de);var r=n.characterOptions;if(t||(t=j),t==z){var a,o,l=n.wordOptions,c=e.getRangeBoundaryPosition(this,!0),u=e.getRangeBoundaryPosition(this,!1),d=I(c,r,l),f=d.nextEndToken(),p=f.chars[0].previousVisible();if(this.collapsed)a=f;else{var h=I(u,r,l);a=h.previousStartToken()}return o=a.chars[a.chars.length-1],p.equals(c)||(this.setStart(p.node,p.offset),i=!0),o&&!o.equals(u)&&(this.setEnd(o.node,o.offset),i=!0),n.trim&&(n.trimStart&&(i=this.trimStart(r)||i),n.trimEnd&&(i=this.trimEnd(r)||i)),i}return this.moveEnd(j,1,n)}),text:L(function(e,t){return this.collapsed?"":R(e,this,G(t,oe)).join("")}),selectCharacters:L(function(e,t,n,i,r){var a={characterOptions:r};t||(t=K(this.getDocument())),this.selectNodeContents(t),this.collapse(!0),this.moveStart("character",n,a),this.collapse(!0),this.moveEnd("character",i-n,a)}),toCharacterRange:L(function(e,t,n){t||(t=K(this.getDocument()));var i,r,a=t.parentNode,o=q.getNodeIndex(t),s=-1==q.comparePoints(this.startContainer,this.endContainer,a,o),l=this.cloneRange();return s?(l.setStartAndEnd(this.startContainer,this.startOffset,a,o),i=-l.text(n).length):(l.setStartAndEnd(a,o,this.startContainer,this.startOffset),i=l.text(n).length),r=i+this.text(n).length,{start:i,end:r}}),findText:L(function(t,n,i){i=s(i,ce),i.wholeWordsOnly&&(i.wordOptions.includeTrailingSpace=!1);var r=ee(i.direction),a=i.withinRange;a||(a=e.createRange(),a.selectNodeContents(this.getDocument()));var o=n,l=!1;"string"==typeof o?i.caseSensitive||(o=o.toLowerCase()):l=!0;var c=t.getRangeBoundaryPosition(this,!r),u=a.comparePoint(c.node,c.offset);-1===u?c=t.getRangeBoundaryPosition(a,!0):1===u&&(c=t.getRangeBoundaryPosition(a,!1));for(var d,f=c,p=!1;;)if(d=N(f,o,l,a,i)){if(d.valid)return this.setStartAndEnd(d.startPos.node,d.startPos.offset,d.endPos.node,d.endPos.offset),!0;f=r?d.startPos:d.endPos}else{if(!i.wrap||p)return!1;a=a.cloneRange(),f=t.getRangeBoundaryPosition(a,!r),a.setBoundary(c.node,c.offset,r),p=!0}}),pasteHtml:function(e){if(this.deleteContents(),e){var t=this.createContextualFragment(e),n=t.lastChild;this.insertNode(t),this.collapseAfter(n)}}}),W(e.selectionPrototype,{expand:L(function(e,t,n){this.changeEachRange(function(e){e.expand(t,n)})}),move:L(function(e,t,n,i){var r=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var a=this.getRangeAt(0);i||(i={}),i.characterOptions=G(i.characterOptions,se),r=a.move(t,n,i),this.setSingleRange(a)}return r}),trimStart:U("trimStart"),trimEnd:U("trimEnd"),trim:U("trim"),selectCharacters:L(function(t,n,i,r,a,o){var s=e.createRange(n);s.selectCharacters(n,i,r,o),this.setSingleRange(s,a)}),saveCharacterRanges:L(function(e,t,n){for(var i=this.getAllRanges(),r=i.length,a=[],o=1==r&&this.isBackward(),s=0,l=i.length;l>s;++s)a[s]={characterRange:i[s].toCharacterRange(t,n),backward:o,characterOptions:n};return a}),restoreCharacterRanges:L(function(t,n,i){this.removeAllRanges();for(var r,a,o,s=0,l=i.length;l>s;++s)a=i[s],o=a.characterRange,r=e.createRange(n),r.selectCharacters(n,o.start,o.end,a.characterOptions),this.addRange(r,a.backward)}),text:L(function(e,t){for(var n=[],i=0,r=this.rangeCount;r>i;++i)n[i]=this.getRangeAt(i).text(t);return n.join("")})}),e.innerText=function(t,n){var i=e.createRange(t);i.selectNodeContents(t);var r=i.text(n);return r},e.createWordIterator=function(e,t,n){var i=T();n=s(n,fe);var r=i.getPosition(e,t),a=I(r,n.characterOptions,n.wordOptions),o=ee(n.direction);return{next:function(){return o?a.previousStartToken():a.nextEndToken()},dispose:function(){a.dispose(),this.next=function(){}}}},e.noMutation=function(e){var t=T();e(t),D()},e.noMutation.createEntryPointFunction=L,e.textRange={isBlockNode:d,isCollapsedWhitespaceNode:$,createPosition:L(function(e,t,n){return e.getPosition(t,n)})}}),e},this),function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),i=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),r=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,a=(n||r)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,a,o,s,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),a=new ArrayBuffer(t.length),o=new Uint8Array(a),s=0;s<t.length;s+=1)o[s]=t.charCodeAt(s);return l=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([i?o:a],{type:l}):(c=new r,c.append(a),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,i){e(i&&t.toDataURL&&a?a(this.toDataURL(n,i)):this.mozGetAsFile("blob",n))}:t.toDataURL&&a&&(t.toBlob=function(e,t,n){e(a(this.toDataURL(t,n)))})),e.dataURLtoBlob=a}(window),function(e,t){"use strict";function n(e,t,n,i,r){var a={type:n.type||n,target:e,result:i};X(a,r),t(a)}function i(e){return C&&!!C.prototype["readAs"+e]}function r(e,r,a,o){if(te.isBlob(e)&&i(a)){var s=new C;Y(s,z,function c(t){var i=t.type;"progress"==i?n(e,r,t,t.target.result,{loaded:t.loaded,total:t.total}):"loadend"==i?(Q(s,z,c),s=null):n(e,r,t,t.target.result)});try{o?s["readAs"+a](e,o):s["readAs"+a](e)}catch(l){n(e,r,"error",t,{error:l.toString()})}}else n(e,r,"error",t,{error:"filreader_not_support_"+a})}function a(e,t){if(!e.type&&(b||e.size%4096===0&&e.size<=102400))if(C)try{var n=new C;J(n,z,function(e){var i="error"!=e.type;i?(n.abort(),t(i)):t(!1,n.error)}),n.readAsDataURL(e)}catch(i){t(!1,i)}else t(null,new Error("FileReader is not supported"));else t(!0)}function o(e){return e&&(e.isFile||e.isDirectory)}function s(e){var t;return e.getAsEntry?t=e.getAsEntry():e.webkitGetAsEntry&&(t=e.webkitGetAsEntry()),t}function l(e,t){if(e)if(e.isFile)e.file(function(n){n.fullPath=e.fullPath,t(!1,[n],[n])},function(n){e.error=n,t("FileError.code: "+n.code,[],[e])});else if(e.isDirectory){var n=e.createReader(),i=!0,r=[],a=[e],o=function(n){e.error=n,t("DirectoryError.code: "+n.code,r,a)},c=function d(s){i&&(i=!1,s.length||(e.error=new Error("directory is empty"))),s.length?te.afor(s,function(e,t){l(t,function(t,i,s){t||(r=r.concat(i)),a=a.concat(s),e?e():n.readEntries(d,o)})}):t(!1,r,a)};n.readEntries(c,o)}else l(s(e),t);else{var u=new Error("invalid entry");e=new Object(e),e.error=u,t(u.message,[],[e])}}function c(e){var t={};return K(e,function(e,n){e&&"object"==typeof e&&void 0===e.nodeType&&(e=X({},e)),t[n]=e}),t}function u(e){return N.test(e&&e.tagName)}function d(e){return(e.originalEvent||e||"").dataTransfer||{}}function f(e){var t;for(t in e)if(e.hasOwnProperty(t)&&!(e[t]instanceof Object||"overlay"===t||"filter"===t))return!0;return!1}var p,h,g=1,m=function(){},v=e.document,y=v.doctype||{},$=e.navigator.userAgent,b=/safari\//i.test($)&&!/chrome\//i.test($),w=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL&&webkitURL,x=e.Blob,S=e.File,C=e.FileReader,k=e.FormData,E=e.XMLHttpRequest,A=e.jQuery,T=!(!(S&&C&&(e.Uint8Array||k||E.prototype.sendAsBinary))||b&&/windows/i.test($)),D=T&&"withCredentials"in new E,_=T&&!!x&&!!(x.prototype.webkitSlice||x.prototype.mozSlice||x.prototype.slice),I=(""+"".normalize).indexOf("[native code]")>0,P=e.dataURLtoBlob,M=/img/i,R=/canvas/i,F=/img|canvas/i,N=/input/i,L=/^data:[^,]+,/,O={}.toString,B=e.Math,U=function(t){return t=new e.Number(B.pow(1024,t)),t.from=function(e){return B.round(e*this)},t},H={},j=[],z="abort progress error load loadend",q="status statusText readyState response responseXML responseText responseBody".split(" "),V="currentTarget",W="preventDefault",G=function(e){return e&&"length"in e},K=function(e,t,n){if(e)if(G(e))for(var i=0,r=e.length;r>i;i++)i in e&&t.call(n,e[i],i,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(n,e[a],a,e)},X=function(e){for(var t=arguments,n=1,i=function(t,n){e[n]=t};n<t.length;n++)K(t[n],i);return e},Y=function(e,t,n){if(e){var i=te.uid(e);H[i]||(H[i]={});var r=C&&e&&e instanceof C;K(t.split(/\s+/),function(t){A&&!r?A.event.add(e,t,n):(H[i][t]||(H[i][t]=[]),H[i][t].push(n),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)})}},Q=function(e,t,n){if(e){var i=te.uid(e),r=H[i]||{},a=C&&e&&e instanceof C;K(t.split(/\s+/),function(t){if(A&&!a)A.event.remove(e,t,n);else{for(var i=r[t]||[],o=i.length;o--;)if(i[o]===n){i.splice(o,1);break}e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}})}},J=function(e,t,n){Y(e,t,function i(r){Q(e,t,i),n(r)})},Z=function(t){return t.target||(t.target=e.event&&e.event.srcElement||v),3===t.target.nodeType&&(t.target=t.target.parentNode),t},ee=function(e){var t=v.createElement("input");return t.setAttribute("type","file"),e in t},te={version:"2.0.17",cors:!1,html5:!0,media:!1,formData:!0,multiPassResize:!0,debug:!1,pingUrl:!1,multiFlash:!1,flashAbortTimeout:0,withCredentials:!0,staticPath:"./dist/",flashUrl:0,flashImageUrl:0,postNameConcat:function(e,t){return e+(null!=t?"["+t+"]":"")},ext2mime:{jpg:"image/jpeg",tif:"image/tiff",txt:"text/plain"},accept:{"image/*":"art bm bmp dwg dxf cbr cbz fif fpx gif ico iefs jfif jpe jpeg jpg jps jut mcf nap nif pbm pcx pgm pict pm png pnm qif qtif ras rast rf rp svf tga tif tiff xbm xbm xpm xwd","audio/*":"m4a flac aac rm mpa wav wma ogg mp3 mp2 m3u mod amf dmf dsm far gdm imf it m15 med okt s3m stm sfx ult uni xm sid ac3 dts cue aif aiff wpl ape mac mpc mpp shn wv nsf spc gym adplug adx dsp adp ymf ast afc hps xs","video/*":"m4v 3gp nsv ts ty strm rm rmvb m3u ifo mov qt divx xvid bivx vob nrg img iso pva wmv asf asx ogm m2v avi bin dat dvr-ms mpg mpeg mp4 mkv avc vp3 svq3 nuv viv dv fli flv wpl"},uploadRetry:0,networkDownRetryTimeout:5e3,chunkSize:0,chunkUploadRetry:0,chunkNetworkDownRetryTimeout:2e3,KB:U(1),MB:U(2),GB:U(3),TB:U(4),EMPTY_PNG:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",expando:"fileapi"+(new Date).getTime(),uid:function(e){return e?e[te.expando]=e[te.expando]||te.uid():(++g,te.expando+g)},log:function(){te.debug&&p&&h&&console.log.apply(console,arguments)},newImage:function(e,t){var n=v.createElement("img");return t&&te.event.one(n,"error load",function(e){t("error"==e.type,n),n=null}),n.src=e,n},getXHR:function(){var t;if(E)t=new E;else if(e.ActiveXObject)try{t=new ActiveXObject("MSXML2.XMLHttp.3.0")}catch(n){t=new ActiveXObject("Microsoft.XMLHTTP")}return t},isArray:G,support:{dnd:D&&"ondrop"in v.createElement("div"),cors:D,html5:T,chunked:_,dataURI:!0,accept:ee("accept"),multiple:ee("multiple")},event:{on:Y,off:Q,one:J,fix:Z},throttle:function(t,n){var i,r;return function(){r=arguments,i||(t.apply(e,r),i=setTimeout(function(){i=0,t.apply(e,r)},n))}},F:function(){},parseJSON:function(t){var n;return n=e.JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t.replace(/([\r\n])/g,"\\$1")+");")()},trim:function(e){return e=String(e),e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},defer:function(){var e,n,i=[],r={resolve:function(t,a){for(r.resolve=m,n=t||!1,e=a;a=i.shift();)a(n,e)},then:function(r){n!==t?r(n,e):i.push(r)}};return r},queue:function(e){var t=0,n=0,i=!1,r=!1,a={inc:function(){n++},next:function(){t++,setTimeout(a.check,0)},check:function(){t>=n&&!i&&a.end()},isFail:function(){return i},fail:function(){!i&&e(i=!0)},end:function(){r||(r=!0,e())}};return a},each:K,afor:function(e,t){var n=0,i=e.length;G(e)&&i--?!function r(){t(i!=n&&r,e[n],n++)}():t(!1)},extend:X,isFile:function(e){return"[object File]"===O.call(e)},isBlob:function(e){return this.isFile(e)||"[object Blob]"===O.call(e)},isCanvas:function(e){return e&&R.test(e.nodeName)},getFilesFilter:function(e){return e="string"==typeof e?e:e.getAttribute&&e.getAttribute("accept")||"",e?new RegExp("("+e.replace(/\./g,"\\.").replace(/,/g,"|")+")$","i"):/./},readAsDataURL:function(e,t){te.isCanvas(e)?n(e,t,"load",te.toDataURL(e)):r(e,t,"DataURL")},readAsBinaryString:function(e,t){i("BinaryString")?r(e,t,"BinaryString"):r(e,function(e){if("load"==e.type)try{e.result=te.toBinaryString(e.result)}catch(n){e.type="error",e.message=n.toString()}t(e)},"DataURL")},readAsArrayBuffer:function(e,t){r(e,t,"ArrayBuffer")},readAsText:function(e,t,n){n||(n=t,t="utf-8"),r(e,n,"Text",t)},toDataURL:function(e,t){return"string"==typeof e?e:e.toDataURL?e.toDataURL(t||"image/png"):void 0},toBinaryString:function(t){return e.atob(te.toDataURL(t).replace(L,""))},readAsImage:function(e,i,r){if(te.isFile(e))if(w){var a=w.createObjectURL(e);a===t?n(e,i,"error"):te.readAsImage(a,i,r)}else te.readAsDataURL(e,function(t){"load"==t.type?te.readAsImage(t.result,i,r):(r||"error"==t.type)&&n(e,i,t,null,{loaded:t.loaded,total:t.total})});else if(te.isCanvas(e))n(e,i,"load",e);else if(M.test(e.nodeName))if(e.complete)n(e,i,"load",e);else{var o="error abort load";J(e,o,function l(t){"load"==t.type&&w&&w.revokeObjectURL(e.src),Q(e,o,l),n(e,i,t,e)})}else if(e.iframe)n(e,i,{type:"error"});else{var s=te.newImage(e.dataURL||e);te.readAsImage(s,i,r)}},checkFileObj:function(e){var t={},n=te.accept;return"object"==typeof e?t=e:t.name=(e+"").split(/\\|\//g).pop(),null==t.type&&(t.type=t.name.split(".").pop()),K(n,function(e,n){e=new RegExp(e.replace(/\s/g,"|"),"i"),(e.test(t.type)||te.ext2mime[t.type])&&(t.type=te.ext2mime[t.type]||n.split("/")[0]+"/"+t.type)}),t},getDropFiles:function(e,t){var n,i=[],r=[],c=d(e),u=c.files,f=c.items,p=G(f)&&f[0]&&s(f[0]),h=te.queue(function(){t(i,r)});if(p)if(I&&u){var g,m,v=u.length;for(n=new Array(v);v--;){g=u[v];try{m=s(f[v])}catch(y){te.log("[err] getDropFiles: ",y),m=null}o(m)&&(m.isDirectory||m.isFile&&g.name==g.name.normalize("NFC"))?n[v]=m:n[v]=g}}else n=f;else n=u;K(n||[],function(e){h.inc();try{p&&o(e)?l(e,function(e,t,n){e?te.log("[err] getDropFiles:",e):i.push.apply(i,t),r.push.apply(r,n),h.next()}):a(e,function(t,n){t?i.push(e):e.error=n,r.push(e),h.next()})}catch(t){h.next(),te.log("[err] getDropFiles: ",t)}}),h.check()},getFiles:function(e,t,n){var i=[];return n?(te.filterFiles(te.getFiles(e),t,n),null):(e.jquery&&(e.each(function(){i=i.concat(te.getFiles(this))}),e=i,i=[]),"string"==typeof t&&(t=te.getFilesFilter(t)),e.originalEvent?e=Z(e.originalEvent):e.srcElement&&(e=Z(e)),e.dataTransfer?e=e.dataTransfer:e.target&&(e=e.target),e.files?(i=e.files,T||(i[0].blob=e,i[0].iframe=!0)):!T&&u(e)?te.trim(e.value)&&(i=[te.checkFileObj(e.value)],i[0].blob=e,i[0].iframe=!0):G(e)&&(i=e),te.filter(i,function(e){return!t||t.test(e.name)}))},getTotalSize:function(e){for(var t=0,n=e&&e.length;n--;)t+=e[n].size;return t},getInfo:function(e,t){var n={},i=j.concat();te.isFile(e)?!function r(){var a=i.shift();a?a.test(e.type)?a(e,function(e,i){e?t(e):(X(n,i),r())}):r():t(!1,n)}():t("not_support_info",n)},addInfoReader:function(e,t){t.test=function(t){return e.test(t)},j.push(t)},filter:function(e,t){for(var n,i=[],r=0,a=e.length;a>r;r++)r in e&&(n=e[r],t.call(n,n,r,e)&&i.push(n));return i},filterFiles:function(e,t,n){if(e.length){var i,r=e.concat(),a=[],o=[];!function s(){r.length?(i=r.shift(),te.getInfo(i,function(e,n){(t(i,e?!1:n)?a:o).push(i),s()})):n(a,o)}()}else n([],e)},upload:function(e){e=X({
jsonp:"callback",prepare:te.F,beforeupload:te.F,upload:te.F,fileupload:te.F,fileprogress:te.F,filecomplete:te.F,progress:te.F,complete:te.F,pause:te.F,imageOriginal:!0,chunkSize:te.chunkSize,chunkUploadRetry:te.chunkUploadRetry,uploadRetry:te.uploadRetry},e),e.imageAutoOrientation&&!e.imageTransform&&(e.imageTransform={rotate:"auto"});var t,n=new te.XHR(e),i=this._getFilesDataArray(e.files),r=this,a=0,o=0,s=!1;return K(i,function(e){a+=e.size}),n.files=[],K(i,function(e){n.files.push(e.file)}),n.total=a,n.loaded=0,n.filesLeft=i.length,e.beforeupload(n,e),t=function(){var l=i.shift(),u=l&&l.file,d=!1,f=c(e);if(n.filesLeft=i.length,u&&u.name===te.expando&&(u=null,te.log("[warn] FileAPI.upload() â€” called without files")),("abort"!=n.statusText||n.current)&&l){if(s=!1,n.currentFile=u,u&&e.prepare(u,f)===!1)return void t.call(r);f.file=u,r._getFormData(f,l,function(s){o||e.upload(n,e);var c=new te.XHR(X({},f,{upload:u?function(){e.fileupload(u,c,f)}:m,progress:u?function(t){d||(d=t.loaded===t.total,e.fileprogress({type:"progress",total:l.total=t.total,loaded:l.loaded=t.loaded},u,c,f),e.progress({type:"progress",total:a,loaded:n.loaded=o+l.size*(t.loaded/t.total)||0},u,c,f))}:m,complete:function(i){K(q,function(e){n[e]=c[e]}),u&&(l.total=l.total||l.size,l.loaded=l.total,i||(this.progress(l),d=!0,o+=l.size,n.loaded=o),e.filecomplete(i,c,u,f)),setTimeout(function(){t.call(r)},0)}}));n.abort=function(e){e||(i.length=0),this.current=e,c.abort()},c.send(s)})}else{var p=200==n.status||201==n.status||204==n.status;e.complete(p?!1:n.statusText||"error",n,e),s=!0}},setTimeout(t,0),n.append=function(e,o){e=te._getFilesDataArray([].concat(e)),K(e,function(e){a+=e.size,n.files.push(e.file),o?i.unshift(e):i.push(e)}),n.statusText="",s&&t.call(r)},n.remove=function(e){for(var t,n=i.length;n--;)i[n].file==e&&(t=i.splice(n,1),a-=t.size);return t},n},_getFilesDataArray:function(e){var t=[],n={};if(u(e)){var i=te.getFiles(e);n[e.name||"file"]=null!==e.getAttribute("multiple")?i:i[0]}else G(e)&&u(e[0])?K(e,function(e){n[e.name||"file"]=te.getFiles(e)}):n=e;return K(n,function r(e,n){G(e)?K(e,function(e){r(e,n)}):e&&(e.name||e.image)&&t.push({name:n,file:e,size:e.size,total:e.size,loaded:0})}),t.length||t.push({file:{name:te.expando}}),t},_getFormData:function(e,t,n){var i=t.file,r=t.name,a=i.name,o=i.type,s=te.support.transform&&e.imageTransform,l=new te.Form,c=te.queue(function(){n(l)}),u=s&&f(s),d=te.postNameConcat;K(e.data,function p(e,t){"object"==typeof e?K(e,function(e,n){p(e,d(t,n))}):l.append(t,e)}),function h(t){t.image?(c.inc(),t.toData(function(e,n){t.file&&(n.type=t.file.type,n.quality=t.matrix.quality,a=t.file&&t.file.name),a=a||(new Date).getTime()+".png",h(n),c.next()})):te.Image&&s&&(/^image/.test(t.type)||F.test(t.nodeName))?(c.inc(),u&&(s=[s]),te.Image.transform(t,s,e.imageAutoOrientation,function(n,i){if(u&&!n)P||te.flashEngine||(l.multipart=!0),l.append(r,i[0],a,s[0].type||o);else{var f=0;n||K(i,function(e,t){P||te.flashEngine||(l.multipart=!0),s[t].postName||(f=1),l.append(s[t].postName||d(r,t),e,a,s[t].type||o)}),(n||e.imageOriginal)&&l.append(d(r,f?"original":null),t,a,o)}c.next()})):a!==te.expando&&l.append(r,t,a)}(i),c.check()},reset:function(e,t){var n,i;return A?(i=A(e).clone(!0).insertBefore(e).val("")[0],t||A(e).remove()):(n=e.parentNode,i=n.insertBefore(e.cloneNode(!0),e),i.value="",t||n.removeChild(e),K(H[te.uid(e)],function(t,n){K(t,function(t){Q(e,n,t),Y(i,n,t)})})),i},load:function(e,t){var n=te.getXHR();return n?(n.open("GET",e,!0),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),Y(n,"progress",function(e){e.lengthComputable&&t({type:e.type,loaded:e.loaded,total:e.total},n)}),n.onreadystatechange=function(){if(4==n.readyState)if(n.onreadystatechange=null,200==n.status){e=e.split("/");var i={name:e[e.length-1],size:n.getResponseHeader("Content-Length"),type:n.getResponseHeader("Content-Type")};i.dataURL="data:"+i.type+";base64,"+te.encode64(n.responseBody||n.responseText),t({type:"load",result:i},n)}else t({type:"error"},n)},n.send(null)):t({type:"error"}),n},encode64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",i=0;for("string"!=typeof e&&(e=String(e));i<e.length;){var r,a,o=255&e.charCodeAt(i++),s=255&e.charCodeAt(i++),l=255&e.charCodeAt(i++),c=o>>2,u=(3&o)<<4|s>>4;isNaN(s)?r=a=64:(r=(15&s)<<2|l>>6,a=isNaN(l)?64:63&l),n+=t.charAt(c)+t.charAt(u)+t.charAt(r)+t.charAt(a)}return n}};te.addInfoReader(/^image/,function(e,t){if(!e.__dimensions){var n=e.__dimensions=te.defer();te.readAsImage(e,function(e){var t=e.target;n.resolve("load"==e.type?!1:"error",{width:t.width,height:t.height}),t.src=te.EMPTY_PNG,t=null})}e.__dimensions.then(t)}),te.event.dnd=function(e,t,n){var i,r;n||(n=t,t=te.F),C?(Y(e,"dragenter dragleave dragover",t.ff=t.ff||function(e){for(var n=d(e).types,a=n&&n.length,o=!1;a--;)if(~n[a].indexOf("File")){e[W](),r!==e.type&&(r=e.type,"dragleave"!=r&&t.call(e[V],!0,e),o=!0);break}o&&(clearTimeout(i),i=setTimeout(function(){t.call(e[V],"dragleave"!=r,e)},50))}),Y(e,"drop",n.ff=n.ff||function(e){e[W](),r=0,t.call(e[V],!1,e),te.getDropFiles(e,function(t,i){n.call(e[V],t,i,e)})})):te.log("Drag'n'Drop -- not supported")},te.event.dnd.off=function(e,t,n){Q(e,"dragenter dragleave dragover",t.ff),Q(e,"drop",n.ff)},A&&!A.fn.dnd&&(A.fn.dnd=function(e,t){return this.each(function(){te.event.dnd(this,e,t)})},A.fn.offdnd=function(e,t){return this.each(function(){te.event.dnd.off(this,e,t)})}),e.FileAPI=X(te,e.FileAPI),te.log("FileAPI: "+te.version),te.log("protocol: "+e.location.protocol),te.log("doctype: ["+y.name+"] "+y.publicId+" "+y.systemId),K(v.getElementsByTagName("meta"),function(e){/x-ua-compatible/i.test(e.getAttribute("http-equiv"))&&te.log("meta.http-equiv: "+e.getAttribute("content"))});try{p=!!console.log,h=!!console.log.apply}catch(ne){}te.flashUrl||(te.flashUrl=te.staticPath+"FileAPI.flash.swf"),te.flashImageUrl||(te.flashImageUrl=te.staticPath+"FileAPI.flash.image.swf"),te.flashWebcamUrl||(te.flashWebcamUrl=te.staticPath+"FileAPI.flash.camera.swf")}(window,void 0),function(e,t,n){"use strict";function i(t){if(t instanceof i){var n=new i(t.file);return e.extend(n.matrix,t.matrix),n}return this instanceof i?(this.file=t,this.size=t.size||100,void(this.matrix={sx:0,sy:0,sw:0,sh:0,dx:0,dy:0,dw:0,dh:0,resize:0,deg:0,quality:1,filter:0})):new i(t)}var r=Math.min,a=Math.round,o=function(){return t.createElement("canvas")},s=!1,l={8:270,3:180,6:90,7:270,4:180,5:90};try{s=o().toDataURL("image/png").indexOf("data:image/png")>-1}catch(c){}i.prototype={image:!0,constructor:i,set:function(t){return e.extend(this.matrix,t),this},crop:function(e,t,i,r){return i===n&&(i=e,r=t,e=t=0),this.set({sx:e,sy:t,sw:i,sh:r||i})},resize:function(e,t,n){return/min|max|height|width/.test(t)&&(n=t,t=e),this.set({dw:e,dh:t||e,resize:n})},preview:function(e,t){return this.resize(e,t||e,"preview")},rotate:function(e){return this.set({deg:e})},filter:function(e){return this.set({filter:e})},overlay:function(e){return this.set({overlay:e})},clone:function(){return new i(this)},_load:function(t,n){var i=this;/img|video/i.test(t.nodeName)?n.call(i,null,t):e.readAsImage(t,function(e){n.call(i,"load"!=e.type,e.result)})},_apply:function(t,n){var a,s=o(),l=this.getMatrix(t),c=s.getContext("2d"),u=t.videoWidth||t.width,d=t.videoHeight||t.height,f=l.deg,p=l.dw,h=l.dh,g=u,m=d,v=l.filter,y=t,$=l.overlay,b=e.queue(function(){t.src=e.EMPTY_PNG,n(!1,s)}),w=e.renderImageToCanvas;for(f-=360*Math.floor(f/360),t._type=this.file.type;l.multipass&&r(g/p,m/h)>2;)g=g/2+.5|0,m=m/2+.5|0,a=o(),a.width=g,a.height=m,y!==t?(w(a,y,0,0,y.width,y.height,0,0,g,m),y=a):(y=a,w(y,t,l.sx,l.sy,l.sw,l.sh,0,0,g,m),l.sx=l.sy=l.sw=l.sh=0);s.width=f%180?h:p,s.height=f%180?p:h,s.type=l.type,s.quality=l.quality,c.rotate(f*Math.PI/180),w(c.canvas,y,l.sx,l.sy,l.sw||y.width,l.sh||y.height,180==f||270==f?-p:0,90==f||180==f?-h:0,p,h),p=s.width,h=s.height,$&&e.each([].concat($),function(t){b.inc();var n=new window.Image,i=function(){var r=0|t.x,a=0|t.y,o=t.w||n.width,s=t.h||n.height,l=t.rel;r=1==l||4==l||7==l?(p-o+r)/2:2==l||5==l||8==l?p-(o+r):r,a=3==l||4==l||5==l?(h-s+a)/2:l>=6?h-(s+a):a,e.event.off(n,"error load abort",i);try{c.globalAlpha=t.opacity||1,c.drawImage(n,r,a,o,s)}catch(u){}b.next()};e.event.on(n,"error load abort",i),n.src=t.src,n.complete&&i()}),v&&(b.inc(),i.applyFilter(s,v,b.next)),b.check()},getMatrix:function(t){var n=e.extend({},this.matrix),i=n.sw=n.sw||t.videoWidth||t.naturalWidth||t.width,o=n.sh=n.sh||t.videoHeight||t.naturalHeight||t.height,s=n.dw=n.dw||i,l=n.dh=n.dh||o,c=i/o,u=s/l,d=n.resize;if("preview"==d){if(s!=i||l!=o){var f,p;u>=c?(f=i,p=f/u):(p=o,f=p*u),(f!=i||p!=o)&&(n.sx=~~((i-f)/2),n.sy=~~((o-p)/2),i=f,o=p)}}else"height"==d?s=l*c:"width"==d?l=s/c:d&&(i>s||o>l?"min"==d?(s=a(u>c?r(i,s):l*c),l=a(u>c?s/c:r(o,l))):(s=a(c>=u?r(i,s):l*c),l=a(c>=u?s/c:r(o,l))):(s=i,l=o));return n.sw=i,n.sh=o,n.dw=s,n.dh=l,n.multipass=e.multiPassResize,n},_trans:function(t){this._load(this.file,function(n,i){if(n)t(n);else try{this._apply(i,t)}catch(n){e.log("[err] FileAPI.Image.fn._apply:",n),t(n)}})},get:function(t){if(e.support.transform){var n=this,i=n.matrix;"auto"==i.deg?e.getInfo(n.file,function(e,r){i.deg=l[r&&r.exif&&r.exif.Orientation]||0,n._trans(t)}):n._trans(t)}else t("not_support_transform");return this},toData:function(e){return this.get(e)}},i.exifOrientation=l,i.transform=function(t,r,a,o){function s(s,l){var c={},u=e.queue(function(e){o(e,c)});s?u.fail():e.each(r,function(e,r){if(!u.isFail()){var o=new i(l.nodeType?l:t),s="function"==typeof e;if(s?e(l,o):e.width?o[e.preview?"preview":"resize"](e.width,e.height,e.strategy):e.maxWidth&&(l.width>e.maxWidth||l.height>e.maxHeight)&&o.resize(e.maxWidth,e.maxHeight,"max"),e.crop){var d=e.crop;o.crop(0|d.x,0|d.y,d.w||d.width,d.h||d.height)}e.rotate===n&&a&&(e.rotate="auto"),o.set({type:o.matrix.type||e.type||t.type||"image/png"}),s||o.set({deg:e.rotate,overlay:e.overlay,filter:e.filter,quality:e.quality||1}),u.inc(),o.toData(function(e,t){e?u.fail():(c[r]=t,u.next())})}})}t.width?s(!1,t):e.getInfo(t,s)},e.each(["TOP","CENTER","BOTTOM"],function(t,n){e.each(["LEFT","CENTER","RIGHT"],function(e,r){i[t+"_"+e]=3*n+r,i[e+"_"+t]=3*n+r})}),i.toCanvas=function(e){var n=t.createElement("canvas");return n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height,n.getContext("2d").drawImage(e,0,0),n},i.fromDataURL=function(t,n,i){var r=e.newImage(t);e.extend(r,n),i(r)},i.applyFilter=function(t,n,r){"function"==typeof n?n(t,r):window.Caman&&window.Caman("IMG"==t.tagName?i.toCanvas(t):t,function(){"string"==typeof n?this[n]():e.each(n,function(e,t){this[t](e)},this),this.render(r)})},e.renderImageToCanvas=function(t,n,i,r,a,o,s,l,c,u){try{return t.getContext("2d").drawImage(n,i,r,a,o,s,l,c,u)}catch(d){throw e.log("renderImageToCanvas failed"),d}},e.support.canvas=e.support.transform=s,e.Image=i}(FileAPI,document),function(e){"use strict";e(FileAPI)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,n;return e.width*e.height>1048576?(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-e.width+1,0),0===n.getImageData(0,0,1,1).data[3]):!1},e.detectVerticalSquash=function(e,t){var n,i,r,a,o,s=e.naturalHeight||e.height,l=document.createElement("canvas"),c=l.getContext("2d");for(t&&(s/=2),l.width=1,l.height=s,c.drawImage(e,0,0),n=c.getImageData(0,0,1,s).data,i=0,r=s,a=s;a>i;)o=n[4*(a-1)+3],0===o?r=a:i=a,a=r+i>>1;return a/s||1},e.renderImageToCanvas=function(n,i,r,a,o,s,l,c,u,d){if("image/jpeg"===i._type){var f,p,h,g,m=n.getContext("2d"),v=document.createElement("canvas"),y=1024,$=v.getContext("2d");if(v.width=y,v.height=y,m.save(),f=e.detectSubsampling(i),f&&(r/=2,a/=2,o/=2,s/=2),p=e.detectVerticalSquash(i,f),f||1!==p){for(a*=p,u=Math.ceil(y*u/o),d=Math.ceil(y*d/s/p),c=0,g=0;s>g;){for(l=0,h=0;o>h;)$.clearRect(0,0,y,y),$.drawImage(i,r,a,o,s,-h,-g,o,s),m.drawImage(v,0,0,y,y,l,c,u,d),h+=y,l+=u;g+=y,c+=d}return m.restore(),n}}return t(n,i,r,a,o,s,l,c,u,d)}}}),function(e,t){"use strict";function n(t,n,i){var r=t.blob,a=t.file;if(a){if(!r.toDataURL)return void e.readAsBinaryString(r,function(e){"load"==e.type&&n(t,e.result)});var o={"image/jpeg":".jpe?g","image/png":".png"},s=o[t.type]?t.type:"image/png",l=o[s]||".png",c=r.quality||1;a.match(new RegExp(l+"$","i"))||(a+=l.replace("?","")),t.file=a,t.type=s,!i&&r.toBlob?r.toBlob(function(e){n(t,e)},s,c):n(t,e.toBinaryString(r.toDataURL(s,c)))}else n(t,r)}var i=t.document,r=t.FormData,a=function(){this.items=[]},o=t.encodeURIComponent;a.prototype={append:function(e,t,n,i){this.items.push({name:e,blob:t&&t.blob||(void 0==t?"":t),file:t&&(n||t.name),type:t&&(i||t.type)})},each:function(e){for(var t=0,n=this.items.length;n>t;t++)e.call(this,this.items[t])},toData:function(t,n){n._chunked=e.support.chunked&&n.chunkSize>0&&1==e.filter(this.items,function(e){return e.file}).length,e.support.html5?e.formData&&!this.multipart&&r?n._chunked?(e.log("FileAPI.Form.toPlainData"),this.toPlainData(t)):(e.log("FileAPI.Form.toFormData"),this.toFormData(t)):(e.log("FileAPI.Form.toMultipartData"),this.toMultipartData(t)):(e.log("FileAPI.Form.toHtmlData"),this.toHtmlData(t))},_to:function(t,n,i,r){var a=e.queue(function(){n(t)});this.each(function(o){try{i(o,t,a,r)}catch(s){e.log("FileAPI.Form._to: "+s.message),n(s)}}),a.check()},toHtmlData:function(t){this._to(i.createDocumentFragment(),t,function(t,n){var r,a=t.blob;t.file?(e.reset(a,!0),a.name=t.name,a.disabled=!1,n.appendChild(a)):(r=i.createElement("input"),r.name=t.name,r.type="hidden",r.value=a,n.appendChild(r))})},toPlainData:function(e){this._to({},e,function(e,t,i){e.file&&(t.type=e.file),e.blob.toBlob?(i.inc(),n(e,function(e,n){t.name=e.name,t.file=n,t.size=n.length,t.type=e.type,i.next()})):e.file?(t.name=e.blob.name,t.file=e.blob,t.size=e.blob.size,t.type=e.type):(t.params||(t.params=[]),t.params.push(o(e.name)+"="+o(e.blob))),t.start=-1,t.end=t.file&&t.file.FileAPIReadPosition||-1,t.retry=0})},toFormData:function(e){this._to(new r,e,function(e,t,i){e.blob&&e.blob.toBlob?(i.inc(),n(e,function(e,n){t.append(e.name,n,e.file),i.next()})):e.file?t.append(e.name,e.blob,e.file):t.append(e.name,e.blob),e.file&&t.append("_"+e.name,e.file)})},toMultipartData:function(t){this._to([],t,function(e,t,i,r){i.inc(),n(e,function(e,n){t.push("--_"+r+('\r\nContent-Disposition: form-data; name="'+e.name+'"'+(e.file?'; filename="'+o(e.file)+'"':"")+(e.file?"\r\nContent-Type: "+(e.type||"application/octet-stream"):"")+"\r\n\r\n"+(e.file?n:o(n))+"\r\n")),i.next()},!0)},e.expando)}},e.Form=a}(FileAPI,window),function(e,t){"use strict";var n=function(){},i=e.document,r=function(e){this.uid=t.uid(),this.xhr={abort:n,getResponseHeader:n,getAllResponseHeaders:n},this.options=e},a={"":1,XML:1,Text:1,Body:1};r.prototype={status:0,statusText:"",constructor:r,getResponseHeader:function(e){return this.xhr.getResponseHeader(e)},getAllResponseHeaders:function(){return this.xhr.getAllResponseHeaders()||{}},end:function(i,r){var a=this,o=a.options;a.end=a.abort=n,a.status=i,r&&(a.statusText=r),t.log("xhr.end:",i,r),o.complete(200==i||201==i?!1:a.statusText||"unknown",a),a.xhr&&a.xhr.node&&setTimeout(function(){var t=a.xhr.node;try{t.parentNode.removeChild(t)}catch(n){}try{delete e[a.uid]}catch(n){}e[a.uid]=a.xhr.node=null},9)},abort:function(){this.end(0,"abort"),this.xhr&&(this.xhr.aborted=!0,this.xhr.abort())},send:function(e){var t=this,n=this.options;e.toData(function(e){e instanceof Error?t.end(0,e.message):(n.upload(n,t),t._send.call(t,n,e))},n)},_send:function(n,r){var o,s=this,l=s.uid,c=s.uid+"Load",u=n.url;if(t.log("XHR._send:",r),n.cache||(u+=(~u.indexOf("?")?"&":"?")+t.uid()),r.nodeName){var d=n.jsonp;u=u.replace(/([a-z]+)=(\?)/i,"$1="+l),n.upload(n,s);var f=function(e){if(~u.indexOf(e.origin))try{var n=t.parseJSON(e.data);n.id==l&&p(n.status,n.statusText,n.response)}catch(i){p(0,i.message)}},p=e[l]=function(n,i,r){s.readyState=4,s.responseText=r,s.end(n,i),t.event.off(e,"message",f),e[l]=o=g=e[c]=null};s.xhr.abort=function(){try{g.stop?g.stop():g.contentWindow.stop?g.contentWindow.stop():g.contentWindow.document.execCommand("Stop")}catch(e){}p(0,"abort")},t.event.on(e,"message",f),e[c]=function(){try{var e=g.contentWindow,n=e.document,i=e.result||t.parseJSON(n.body.innerHTML);p(i.status,i.statusText,i.response)}catch(r){t.log("[transport.onload]",r)}},o=i.createElement("div"),o.innerHTML='<form target="'+l+'" action="'+u+'" method="'+n.method+'" enctype="multipart/form-data" style="position: absolute; top: -1000px; overflow: hidden; width: 1px; height: 1px;"><iframe name="'+l+'" src="javascript:false;" onload="window.'+c+" && "+c+'();"></iframe>'+(d&&n.url.indexOf("=?")<0?'<input value="'+l+'" name="'+d+'" type="hidden"/>':"")+"</form>";var h=o.getElementsByTagName("form")[0],g=o.getElementsByTagName("iframe")[0];h.appendChild(r),t.log(h.parentNode.innerHTML),i.body.appendChild(o),s.xhr.node=o,s.readyState=2;try{h.submit()}catch(m){t.log("iframe.error: "+m)}h=null}else{if(u=u.replace(/([a-z]+)=(\?)&?/i,""),this.xhr&&this.xhr.aborted)return void t.log("Error: already aborted");if(o=s.xhr=t.getXHR(),r.params&&(u+=(u.indexOf("?")<0?"?":"&")+r.params.join("&")),o.open(n.method,u,!0),t.withCredentials&&(o.withCredentials="true"),n.headers&&n.headers["X-Requested-With"]||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.each(n.headers,function(e,t){o.setRequestHeader(t,e)}),n._chunked){o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){r.retry||n.progress({type:e.type,total:r.size,loaded:r.start+e.loaded,totalSize:r.size},s,n)},100),!1),o.onreadystatechange=function(){var e=parseInt(o.getResponseHeader("X-Last-Known-Byte"),10);if(s.status=o.status,s.statusText=o.statusText,s.readyState=o.readyState,4==o.readyState){for(var i in a)s["response"+i]=o["response"+i];if(o.onreadystatechange=null,!o.status||o.status-201>0)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status||416==o.status)&&++r.retry<=n.chunkUploadRetry){var l=o.status?0:t.chunkNetworkDownRetryTimeout;n.pause(r.file,n),t.log("X-Last-Known-Byte: "+e),e?r.end=e:(r.end=r.start-1,416==o.status&&(r.end=r.end-n.chunkSize)),setTimeout(function(){s._send(n,r)},l)}else s.end(o.status);else r.retry=0,r.end==r.size-1?s.end(o.status):(t.log("X-Last-Known-Byte: "+e),e&&(r.end=e),r.file.FileAPIReadPosition=r.end,setTimeout(function(){s._send(n,r)},0));o=null}},r.start=r.end+1,r.end=Math.max(Math.min(r.start+n.chunkSize,r.size)-1,r.start);var v=r.file,y=(v.slice||v.mozSlice||v.webkitSlice).call(v,r.start,r.end+1);r.size&&!y.size?setTimeout(function(){s.end(-1)}):(o.setRequestHeader("Content-Range","bytes "+r.start+"-"+r.end+"/"+r.size),o.setRequestHeader("Content-Disposition","attachment; filename="+encodeURIComponent(r.name)),o.setRequestHeader("Content-Type",r.type||"application/octet-stream"),o.send(y)),v=y=null}else if(o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){n.progress(e,s,n)},100),!1),o.onreadystatechange=function(){if(s.status=o.status,s.statusText=o.statusText,s.readyState=o.readyState,4==o.readyState){for(var e in a)s["response"+e]=o["response"+e];if(o.onreadystatechange=null,!o.status||o.status>201)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status)&&(n.retry||0)<n.uploadRetry){n.retry=(n.retry||0)+1;var i=t.networkDownRetryTimeout;n.pause(n.file,n),setTimeout(function(){s._send(n,r)},i)}else s.end(o.status);else s.end(o.status);o=null}},t.isArray(r)){o.setRequestHeader("Content-Type","multipart/form-data; boundary=_"+t.expando);var $=r.join("")+"--_"+t.expando+"--";if(o.sendAsBinary)o.sendAsBinary($);else{var b=Array.prototype.map.call($,function(e){return 255&e.charCodeAt(0)});o.send(new Uint8Array(b).buffer)}}else o.send(r)}}},t.XHR=r}(window,FileAPI),function(e,t){"use strict";function n(e){return e>=0?e+"px":e}function i(e){var t,n=a.createElement("canvas"),i=!1;try{t=n.getContext("2d"),t.drawImage(e,0,0,1,1),i=255!=t.getImageData(0,0,1,1).data[4]}catch(r){}return i}var r=e.URL||e.webkitURL,a=e.document,o=e.navigator,s=o.getUserMedia||o.webkitGetUserMedia||o.mozGetUserMedia||o.msGetUserMedia,l=!!s;t.support.media=l;var c=function(e){this.video=e};c.prototype={isActive:function(){return!!this._active},start:function(e){var t,n,a=this,l=a.video,c=function(i){a._active=!i,clearTimeout(n),clearTimeout(t),e&&e(i,a)};s.call(o,{video:!0},function(e){a.stream=e,l.src=r.createObjectURL(e),t=setInterval(function(){i(l)&&c(null)},1e3),n=setTimeout(function(){c("timeout")},5e3),l.play()},c)},stop:function(){try{this._active=!1,this.video.pause(),this.stream.stop()}catch(e){}},shot:function(){return new u(this.video)}},c.get=function(e){return new c(e.firstChild)},c.publish=function(i,r,o){"function"==typeof r&&(o=r,r={}),r=t.extend({},{width:"100%",height:"100%",start:!0},r),i.jquery&&(i=i[0]);var s=function(e){if(e)o(e);else{var t=c.get(i);r.start?t.start(o):o(null,t)}};if(i.style.width=n(r.width),i.style.height=n(r.height),t.html5&&l){var u=a.createElement("video");u.style.width=n(r.width),u.style.height=n(r.height),e.jQuery?jQuery(i).empty():i.innerHTML="",i.appendChild(u),s()}else c.fallback(i,r,s)},c.fallback=function(e,t,n){n("not_support_camera")};var u=function(e){var n=e.nodeName?t.Image.toCanvas(e):e,i=t.Image(n);return i.type="image/png",i.width=n.width,i.height=n.height,i.size=n.width*n.height*4,i};c.Shot=u,t.Camera=c}(window,FileAPI),function(e,t,n){"use strict";var i=n.each,r=[];!n.support.flash||!n.media||n.support.media&&n.html5||!function(){function e(e){var t=e.wid=n.uid();return n.Flash._fn[t]=e,"FileAPI.Flash._fn."+t}function t(e){try{n.Flash._fn[e.wid]=null,delete n.Flash._fn[e.wid]}catch(t){}}var a=n.Flash;n.extend(n.Flash,{patchCamera:function(){n.Camera.fallback=function(i,r,o){var s=n.uid();n.log("FlashAPI.Camera.publish: "+s),a.publish(i,s,n.extend(r,{camera:!0,onEvent:e(function l(e){"camera"===e.type&&(t(l),e.error?(n.log("FlashAPI.Camera.publish.error: "+e.error),o(e.error)):(n.log("FlashAPI.Camera.publish.success: "+s),o(null)))})}))},i(r,function(e){n.Camera.fallback.apply(n.Camera,e)}),r=[],n.extend(n.Camera.prototype,{_id:function(){return this.video.id},start:function(i){var r=this;a.cmd(this._id(),"camera.on",{callback:e(function o(e){t(o),e.error?(n.log("FlashAPI.camera.on.error: "+e.error),i(e.error,r)):(n.log("FlashAPI.camera.on.success: "+r._id()),r._active=!0,i(null,r))})})},stop:function(){this._active=!1,a.cmd(this._id(),"camera.off")},shot:function(){n.log("FlashAPI.Camera.shot:",this._id());var e=n.Flash.cmd(this._id(),"shot",{});return e.type="image/png",e.flashId=this._id(),e.isShot=!0,new n.Camera.Shot(e)}})}}),n.Camera.fallback=function(){r.push(arguments)}}()}(window,window.jQuery,FileAPI),"function"==typeof define&&define.amd&&define("FileAPI",[],function(){return FileAPI}),function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),i=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),r=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,a=(n||r)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,a,o,s,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),a=new ArrayBuffer(t.length),o=new Uint8Array(a),s=0;s<t.length;s+=1)o[s]=t.charCodeAt(s);return l=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([i?o:a],{type:l}):(c=new r,c.append(a),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,i){e(i&&t.toDataURL&&a?a(this.toDataURL(n,i)):this.mozGetAsFile("blob",n))}:t.toDataURL&&a&&(t.toBlob=function(e,t,n){e(a(this.toDataURL(t,n)))})),e.dataURLtoBlob=a}(window),function(e,t){"use strict";function n(e,t,n,i,r){var a={type:n.type||n,target:e,result:i};X(a,r),t(a)}function i(e){return C&&!!C.prototype["readAs"+e]}function r(e,r,a,o){if(te.isBlob(e)&&i(a)){var s=new C;Y(s,z,function c(t){var i=t.type;"progress"==i?n(e,r,t,t.target.result,{loaded:t.loaded,total:t.total}):"loadend"==i?(Q(s,z,c),s=null):n(e,r,t,t.target.result)});try{o?s["readAs"+a](e,o):s["readAs"+a](e)}catch(l){n(e,r,"error",t,{error:l.toString()})}}else n(e,r,"error",t,{error:"filreader_not_support_"+a})}function a(e,t){if(!e.type&&(b||e.size%4096===0&&e.size<=102400))if(C)try{var n=new C;J(n,z,function(e){var i="error"!=e.type;i?(n.abort(),t(i)):t(!1,n.error)}),n.readAsDataURL(e)}catch(i){t(!1,i)}else t(null,new Error("FileReader is not supported"));else t(!0)}function o(e){return e&&(e.isFile||e.isDirectory)}function s(e){var t;return e.getAsEntry?t=e.getAsEntry():e.webkitGetAsEntry&&(t=e.webkitGetAsEntry()),t}function l(e,t){if(e)if(e.isFile)e.file(function(n){n.fullPath=e.fullPath,t(!1,[n],[n])},function(n){e.error=n,t("FileError.code: "+n.code,[],[e])});else if(e.isDirectory){var n=e.createReader(),i=!0,r=[],a=[e],o=function(n){e.error=n,t("DirectoryError.code: "+n.code,r,a)},c=function d(s){i&&(i=!1,s.length||(e.error=new Error("directory is empty"))),s.length?te.afor(s,function(e,t){l(t,function(t,i,s){t||(r=r.concat(i)),a=a.concat(s),e?e():n.readEntries(d,o)})}):t(!1,r,a)};n.readEntries(c,o)}else l(s(e),t);else{var u=new Error("invalid entry");e=new Object(e),e.error=u,t(u.message,[],[e])}}function c(e){var t={};return K(e,function(e,n){e&&"object"==typeof e&&void 0===e.nodeType&&(e=X({},e)),t[n]=e}),t}function u(e){return N.test(e&&e.tagName)}function d(e){return(e.originalEvent||e||"").dataTransfer||{}}function f(e){var t;for(t in e)if(e.hasOwnProperty(t)&&!(e[t]instanceof Object||"overlay"===t||"filter"===t))return!0;return!1}var p,h,g=1,m=function(){},v=e.document,y=v.doctype||{},$=e.navigator.userAgent,b=/safari\//i.test($)&&!/chrome\//i.test($),w=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL&&webkitURL,x=e.Blob,S=e.File,C=e.FileReader,k=e.FormData,E=e.XMLHttpRequest,A=e.jQuery,T=!(!(S&&C&&(e.Uint8Array||k||E.prototype.sendAsBinary))||b&&/windows/i.test($)),D=T&&"withCredentials"in new E,_=T&&!!x&&!!(x.prototype.webkitSlice||x.prototype.mozSlice||x.prototype.slice),I=(""+"".normalize).indexOf("[native code]")>0,P=e.dataURLtoBlob,M=/img/i,R=/canvas/i,F=/img|canvas/i,N=/input/i,L=/^data:[^,]+,/,O={}.toString,B=e.Math,U=function(t){return t=new e.Number(B.pow(1024,t)),t.from=function(e){return B.round(e*this)},t},H={},j=[],z="abort progress error load loadend",q="status statusText readyState response responseXML responseText responseBody".split(" "),V="currentTarget",W="preventDefault",G=function(e){return e&&"length"in e},K=function(e,t,n){if(e)if(G(e))for(var i=0,r=e.length;r>i;i++)i in e&&t.call(n,e[i],i,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(n,e[a],a,e)},X=function(e){for(var t=arguments,n=1,i=function(t,n){e[n]=t};n<t.length;n++)K(t[n],i);return e},Y=function(e,t,n){if(e){var i=te.uid(e);H[i]||(H[i]={});var r=C&&e&&e instanceof C;K(t.split(/\s+/),function(t){A&&!r?A.event.add(e,t,n):(H[i][t]||(H[i][t]=[]),H[i][t].push(n),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)})}},Q=function(e,t,n){if(e){var i=te.uid(e),r=H[i]||{},a=C&&e&&e instanceof C;K(t.split(/\s+/),function(t){if(A&&!a)A.event.remove(e,t,n);else{for(var i=r[t]||[],o=i.length;o--;)if(i[o]===n){i.splice(o,1);break}e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}})}},J=function(e,t,n){Y(e,t,function i(r){Q(e,t,i),n(r)})},Z=function(t){return t.target||(t.target=e.event&&e.event.srcElement||v),3===t.target.nodeType&&(t.target=t.target.parentNode),t},ee=function(e){var t=v.createElement("input");return t.setAttribute("type","file"),e in t},te={version:"2.0.17",cors:!1,html5:!0,media:!1,formData:!0,multiPassResize:!0,debug:!1,pingUrl:!1,multiFlash:!1,flashAbortTimeout:0,withCredentials:!0,staticPath:"./dist/",flashUrl:0,flashImageUrl:0,postNameConcat:function(e,t){return e+(null!=t?"["+t+"]":"")},ext2mime:{jpg:"image/jpeg",tif:"image/tiff",txt:"text/plain"},accept:{"image/*":"art bm bmp dwg dxf cbr cbz fif fpx gif ico iefs jfif jpe jpeg jpg jps jut mcf nap nif pbm pcx pgm pict pm png pnm qif qtif ras rast rf rp svf tga tif tiff xbm xbm xpm xwd","audio/*":"m4a flac aac rm mpa wav wma ogg mp3 mp2 m3u mod amf dmf dsm far gdm imf it m15 med okt s3m stm sfx ult uni xm sid ac3 dts cue aif aiff wpl ape mac mpc mpp shn wv nsf spc gym adplug adx dsp adp ymf ast afc hps xs","video/*":"m4v 3gp nsv ts ty strm rm rmvb m3u ifo mov qt divx xxhrvid bivx vob nrg img iso pva wmv asf asx ogm m2v avi bin dat dvr-ms mpg mpeg mp4 mkv avc vp3 svq3 nuv viv dv fli flv wpl"},uploadRetry:0,networkDownRetryTimeout:5e3,chunkSize:0,chunkUploadRetry:0,chunkNetworkDownRetryTimeout:2e3,KB:U(1),MB:U(2),GB:U(3),TB:U(4),EMPTY_PNG:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",expando:"fileapi"+(new Date).getTime(),uid:function(e){return e?e[te.expando]=e[te.expando]||te.uid():(++g,te.expando+g)},log:function(){te.debug&&p&&h&&console.log.apply(console,arguments)},newImage:function(e,t){var n=v.createElement("img");return t&&te.event.one(n,"error load",function(e){t("error"==e.type,n),n=null}),n.src=e,n},getXHR:function(){var t;if(E)t=new E;else if(e.ActiveXObject)try{t=new ActiveXObject("MSXML2.XMLHttp.3.0")}catch(n){t=new ActiveXObject("Microsoft.XMLHTTP")}return t},isArray:G,support:{dnd:D&&"ondrop"in v.createElement("div"),cors:D,html5:T,chunked:_,dataURI:!0,accept:ee("accept"),multiple:ee("multiple")},event:{on:Y,off:Q,one:J,fix:Z},throttle:function(t,n){var i,r;return function(){r=arguments,i||(t.apply(e,r),i=setTimeout(function(){i=0,t.apply(e,r)},n))}},F:function(){},parseJSON:function(t){var n;return n=e.JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t.replace(/([\r\n])/g,"\\$1")+");")()},trim:function(e){return e=String(e),e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},defer:function(){var e,n,i=[],r={resolve:function(t,a){for(r.resolve=m,n=t||!1,e=a;a=i.shift();)a(n,e)},then:function(r){n!==t?r(n,e):i.push(r)}};return r},queue:function(e){var t=0,n=0,i=!1,r=!1,a={inc:function(){n++},next:function(){t++,setTimeout(a.check,0)},check:function(){t>=n&&!i&&a.end()},isFail:function(){return i},fail:function(){!i&&e(i=!0)},end:function(){r||(r=!0,e())}};return a},each:K,afor:function(e,t){var n=0,i=e.length;G(e)&&i--?!function r(){t(i!=n&&r,e[n],n++)}():t(!1)},extend:X,isFile:function(e){return"[object File]"===O.call(e)},isBlob:function(e){return this.isFile(e)||"[object Blob]"===O.call(e)},isCanvas:function(e){return e&&R.test(e.nodeName)},getFilesFilter:function(e){return e="string"==typeof e?e:e.getAttribute&&e.getAttribute("accept")||"",e?new RegExp("("+e.replace(/\./g,"\\.").replace(/,/g,"|")+")$","i"):/./},readAsDataURL:function(e,t){te.isCanvas(e)?n(e,t,"load",te.toDataURL(e)):r(e,t,"DataURL")},readAsBinaryString:function(e,t){i("BinaryString")?r(e,t,"BinaryString"):r(e,function(e){if("load"==e.type)try{e.result=te.toBinaryString(e.result)}catch(n){e.type="error",e.message=n.toString()}t(e)},"DataURL")},readAsArrayBuffer:function(e,t){r(e,t,"ArrayBuffer")},readAsText:function(e,t,n){n||(n=t,t="utf-8"),r(e,n,"Text",t)},toDataURL:function(e,t){return"string"==typeof e?e:e.toDataURL?e.toDataURL(t||"image/png"):void 0},toBinaryString:function(t){return e.atob(te.toDataURL(t).replace(L,""))},readAsImage:function(e,i,r){if(te.isFile(e))if(w){var a=w.createObjectURL(e);a===t?n(e,i,"error"):te.readAsImage(a,i,r)}else te.readAsDataURL(e,function(t){"load"==t.type?te.readAsImage(t.result,i,r):(r||"error"==t.type)&&n(e,i,t,null,{loaded:t.loaded,total:t.total})});else if(te.isCanvas(e))n(e,i,"load",e);else if(M.test(e.nodeName))if(e.complete)n(e,i,"load",e);else{var o="error abort load";J(e,o,function l(t){"load"==t.type&&w&&w.revokeObjectURL(e.src),Q(e,o,l),n(e,i,t,e)})}else if(e.iframe)n(e,i,{type:"error"});else{var s=te.newImage(e.dataURL||e);te.readAsImage(s,i,r);
}},checkFileObj:function(e){var t={},n=te.accept;return"object"==typeof e?t=e:t.name=(e+"").split(/\\|\//g).pop(),null==t.type&&(t.type=t.name.split(".").pop()),K(n,function(e,n){e=new RegExp(e.replace(/\s/g,"|"),"i"),(e.test(t.type)||te.ext2mime[t.type])&&(t.type=te.ext2mime[t.type]||n.split("/")[0]+"/"+t.type)}),t},getDropFiles:function(e,t){var n,i=[],r=[],c=d(e),u=c.files,f=c.items,p=G(f)&&f[0]&&s(f[0]),h=te.queue(function(){t(i,r)});if(p)if(I&&u){var g,m,v=u.length;for(n=new Array(v);v--;){g=u[v];try{m=s(f[v])}catch(y){te.log("[err] getDropFiles: ",y),m=null}o(m)&&(m.isDirectory||m.isFile&&g.name==g.name.normalize("NFC"))?n[v]=m:n[v]=g}}else n=f;else n=u;K(n||[],function(e){h.inc();try{p&&o(e)?l(e,function(e,t,n){e?te.log("[err] getDropFiles:",e):i.push.apply(i,t),r.push.apply(r,n),h.next()}):a(e,function(t,n){t?i.push(e):e.error=n,r.push(e),h.next()})}catch(t){h.next(),te.log("[err] getDropFiles: ",t)}}),h.check()},getFiles:function(e,t,n){var i=[];return n?(te.filterFiles(te.getFiles(e),t,n),null):(e.jquery&&(e.each(function(){i=i.concat(te.getFiles(this))}),e=i,i=[]),"string"==typeof t&&(t=te.getFilesFilter(t)),e.originalEvent?e=Z(e.originalEvent):e.srcElement&&(e=Z(e)),e.dataTransfer?e=e.dataTransfer:e.target&&(e=e.target),e.files?(i=e.files,T||(i[0].blob=e,i[0].iframe=!0)):!T&&u(e)?te.trim(e.value)&&(i=[te.checkFileObj(e.value)],i[0].blob=e,i[0].iframe=!0):G(e)&&(i=e),te.filter(i,function(e){return!t||t.test(e.name)}))},getTotalSize:function(e){for(var t=0,n=e&&e.length;n--;)t+=e[n].size;return t},getInfo:function(e,t){var n={},i=j.concat();te.isFile(e)?!function r(){var a=i.shift();a?a.test(e.type)?a(e,function(e,i){e?t(e):(X(n,i),r())}):r():t(!1,n)}():t("not_support_info",n)},addInfoReader:function(e,t){t.test=function(t){return e.test(t)},j.push(t)},filter:function(e,t){for(var n,i=[],r=0,a=e.length;a>r;r++)r in e&&(n=e[r],t.call(n,n,r,e)&&i.push(n));return i},filterFiles:function(e,t,n){if(e.length){var i,r=e.concat(),a=[],o=[];!function s(){r.length?(i=r.shift(),te.getInfo(i,function(e,n){(t(i,e?!1:n)?a:o).push(i),s()})):n(a,o)}()}else n([],e)},upload:function(e){e=X({jsonp:"callback",prepare:te.F,beforeupload:te.F,upload:te.F,fileupload:te.F,fileprogress:te.F,filecomplete:te.F,progress:te.F,complete:te.F,pause:te.F,imageOriginal:!0,chunkSize:te.chunkSize,chunkUploadRetry:te.chunkUploadRetry,uploadRetry:te.uploadRetry},e),e.imageAutoOrientation&&!e.imageTransform&&(e.imageTransform={rotate:"auto"});var t,n=new te.XHR(e),i=this._getFilesDataArray(e.files),r=this,a=0,o=0,s=!1;return K(i,function(e){a+=e.size}),n.files=[],K(i,function(e){n.files.push(e.file)}),n.total=a,n.loaded=0,n.filesLeft=i.length,e.beforeupload(n,e),t=function(){var l=i.shift(),u=l&&l.file,d=!1,f=c(e);if(n.filesLeft=i.length,u&&u.name===te.expando&&(u=null,te.log("[warn] FileAPI.upload() â€” called without files")),("abort"!=n.statusText||n.current)&&l){if(s=!1,n.currentFile=u,u&&e.prepare(u,f)===!1)return void t.call(r);f.file=u,r._getFormData(f,l,function(s){o||e.upload(n,e);var c=new te.XHR(X({},f,{upload:u?function(){e.fileupload(u,c,f)}:m,progress:u?function(t){d||(d=t.loaded===t.total,e.fileprogress({type:"progress",total:l.total=t.total,loaded:l.loaded=t.loaded},u,c,f),e.progress({type:"progress",total:a,loaded:n.loaded=o+l.size*(t.loaded/t.total)||0},u,c,f))}:m,complete:function(i){K(q,function(e){n[e]=c[e]}),u&&(l.total=l.total||l.size,l.loaded=l.total,i||(this.progress(l),d=!0,o+=l.size,n.loaded=o),e.filecomplete(i,c,u,f)),setTimeout(function(){t.call(r)},0)}}));n.abort=function(e){e||(i.length=0),this.current=e,c.abort()},c.send(s)})}else{var p=200==n.status||201==n.status||204==n.status;e.complete(p?!1:n.statusText||"error",n,e),s=!0}},setTimeout(t,0),n.append=function(e,o){e=te._getFilesDataArray([].concat(e)),K(e,function(e){a+=e.size,n.files.push(e.file),o?i.unshift(e):i.push(e)}),n.statusText="",s&&t.call(r)},n.remove=function(e){for(var t,n=i.length;n--;)i[n].file==e&&(t=i.splice(n,1),a-=t.size);return t},n},_getFilesDataArray:function(e){var t=[],n={};if(u(e)){var i=te.getFiles(e);n[e.name||"file"]=null!==e.getAttribute("multiple")?i:i[0]}else G(e)&&u(e[0])?K(e,function(e){n[e.name||"file"]=te.getFiles(e)}):n=e;return K(n,function r(e,n){G(e)?K(e,function(e){r(e,n)}):e&&(e.name||e.image)&&t.push({name:n,file:e,size:e.size,total:e.size,loaded:0})}),t.length||t.push({file:{name:te.expando}}),t},_getFormData:function(e,t,n){var i=t.file,r=t.name,a=i.name,o=i.type,s=te.support.transform&&e.imageTransform,l=new te.Form,c=te.queue(function(){n(l)}),u=s&&f(s),d=te.postNameConcat;K(e.data,function p(e,t){"object"==typeof e?K(e,function(e,n){p(e,d(t,n))}):l.append(t,e)}),function h(t){t.image?(c.inc(),t.toData(function(e,n){t.file&&(n.type=t.file.type,n.quality=t.matrix.quality,a=t.file&&t.file.name),a=a||(new Date).getTime()+".png",h(n),c.next()})):te.Image&&s&&(/^image/.test(t.type)||F.test(t.nodeName))?(c.inc(),u&&(s=[s]),te.Image.transform(t,s,e.imageAutoOrientation,function(n,i){if(u&&!n)P||te.flashEngine||(l.multipart=!0),l.append(r,i[0],a,s[0].type||o);else{var f=0;n||K(i,function(e,t){P||te.flashEngine||(l.multipart=!0),s[t].postName||(f=1),l.append(s[t].postName||d(r,t),e,a,s[t].type||o)}),(n||e.imageOriginal)&&l.append(d(r,f?"original":null),t,a,o)}c.next()})):a!==te.expando&&l.append(r,t,a)}(i),c.check()},reset:function(e,t){var n,i;return A?(i=A(e).clone(!0).insertBefore(e).val("")[0],t||A(e).remove()):(n=e.parentNode,i=n.insertBefore(e.cloneNode(!0),e),i.value="",t||n.removeChild(e),K(H[te.uid(e)],function(t,n){K(t,function(t){Q(e,n,t),Y(i,n,t)})})),i},load:function(e,t){var n=te.getXHR();return n?(n.open("GET",e,!0),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),Y(n,"progress",function(e){e.lengthComputable&&t({type:e.type,loaded:e.loaded,total:e.total},n)}),n.onreadystatechange=function(){if(4==n.readyState)if(n.onreadystatechange=null,200==n.status){e=e.split("/");var i={name:e[e.length-1],size:n.getResponseHeader("Content-Length"),type:n.getResponseHeader("Content-Type")};i.dataURL="data:"+i.type+";base64,"+te.encode64(n.responseBody||n.responseText),t({type:"load",result:i},n)}else t({type:"error"},n)},n.send(null)):t({type:"error"}),n},encode64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",i=0;for("string"!=typeof e&&(e=String(e));i<e.length;){var r,a,o=255&e.charCodeAt(i++),s=255&e.charCodeAt(i++),l=255&e.charCodeAt(i++),c=o>>2,u=(3&o)<<4|s>>4;isNaN(s)?r=a=64:(r=(15&s)<<2|l>>6,a=isNaN(l)?64:63&l),n+=t.charAt(c)+t.charAt(u)+t.charAt(r)+t.charAt(a)}return n}};te.addInfoReader(/^image/,function(e,t){if(!e.__dimensions){var n=e.__dimensions=te.defer();te.readAsImage(e,function(e){var t=e.target;n.resolve("load"==e.type?!1:"error",{width:t.width,height:t.height}),t.src=te.EMPTY_PNG,t=null})}e.__dimensions.then(t)}),te.event.dnd=function(e,t,n){var i,r;n||(n=t,t=te.F),C?(Y(e,"dragenter dragleave dragover",t.ff=t.ff||function(e){for(var n=d(e).types,a=n&&n.length,o=!1;a--;)if(~n[a].indexOf("File")){e[W](),r!==e.type&&(r=e.type,"dragleave"!=r&&t.call(e[V],!0,e),o=!0);break}o&&(clearTimeout(i),i=setTimeout(function(){t.call(e[V],"dragleave"!=r,e)},50))}),Y(e,"drop",n.ff=n.ff||function(e){e[W](),r=0,t.call(e[V],!1,e),te.getDropFiles(e,function(t,i){n.call(e[V],t,i,e)})})):te.log("Drag'n'Drop -- not supported")},te.event.dnd.off=function(e,t,n){Q(e,"dragenter dragleave dragover",t.ff),Q(e,"drop",n.ff)},A&&!A.fn.dnd&&(A.fn.dnd=function(e,t){return this.each(function(){te.event.dnd(this,e,t)})},A.fn.offdnd=function(e,t){return this.each(function(){te.event.dnd.off(this,e,t)})}),e.FileAPI=X(te,e.FileAPI),te.log("FileAPI: "+te.version),te.log("protocol: "+e.location.protocol),te.log("doctype: ["+y.name+"] "+y.publicId+" "+y.systemId),K(v.getElementsByTagName("meta"),function(e){/x-ua-compatible/i.test(e.getAttribute("http-equiv"))&&te.log("meta.http-equiv: "+e.getAttribute("content"))});try{p=!!console.log,h=!!console.log.apply}catch(ne){}te.flashUrl||(te.flashUrl=te.staticPath+"FileAPI.flash.swf"),te.flashImageUrl||(te.flashImageUrl=te.staticPath+"FileAPI.flash.image.swf"),te.flashWebcamUrl||(te.flashWebcamUrl=te.staticPath+"FileAPI.flash.camera.swf")}(window,void 0),function(e,t,n){"use strict";function i(t){if(t instanceof i){var n=new i(t.file);return e.extend(n.matrix,t.matrix),n}return this instanceof i?(this.file=t,this.size=t.size||100,void(this.matrix={sx:0,sy:0,sw:0,sh:0,dx:0,dy:0,dw:0,dh:0,resize:0,deg:0,quality:1,filter:0})):new i(t)}var r=Math.min,a=Math.round,o=function(){return t.createElement("canvas")},s=!1,l={8:270,3:180,6:90,7:270,4:180,5:90};try{s=o().toDataURL("image/png").indexOf("data:image/png")>-1}catch(c){}i.prototype={image:!0,constructor:i,set:function(t){return e.extend(this.matrix,t),this},crop:function(e,t,i,r){return i===n&&(i=e,r=t,e=t=0),this.set({sx:e,sy:t,sw:i,sh:r||i})},resize:function(e,t,n){return/min|max|height|width/.test(t)&&(n=t,t=e),this.set({dw:e,dh:t||e,resize:n})},preview:function(e,t){return this.resize(e,t||e,"preview")},rotate:function(e){return this.set({deg:e})},filter:function(e){return this.set({filter:e})},overlay:function(e){return this.set({overlay:e})},clone:function(){return new i(this)},_load:function(t,n){var i=this;/img|video/i.test(t.nodeName)?n.call(i,null,t):e.readAsImage(t,function(e){n.call(i,"load"!=e.type,e.result)})},_apply:function(t,n){var a,s=o(),l=this.getMatrix(t),c=s.getContext("2d"),u=t.videoWidth||t.width,d=t.videoHeight||t.height,f=l.deg,p=l.dw,h=l.dh,g=u,m=d,v=l.filter,y=t,$=l.overlay,b=e.queue(function(){t.src=e.EMPTY_PNG,n(!1,s)}),w=e.renderImageToCanvas;for(f-=360*Math.floor(f/360),t._type=this.file.type;l.multipass&&r(g/p,m/h)>2;)g=g/2+.5|0,m=m/2+.5|0,a=o(),a.width=g,a.height=m,y!==t?(w(a,y,0,0,y.width,y.height,0,0,g,m),y=a):(y=a,w(y,t,l.sx,l.sy,l.sw,l.sh,0,0,g,m),l.sx=l.sy=l.sw=l.sh=0);s.width=f%180?h:p,s.height=f%180?p:h,s.type=l.type,s.quality=l.quality,c.rotate(f*Math.PI/180),w(c.canvas,y,l.sx,l.sy,l.sw||y.width,l.sh||y.height,180==f||270==f?-p:0,90==f||180==f?-h:0,p,h),p=s.width,h=s.height,$&&e.each([].concat($),function(t){b.inc();var n=new window.Image,i=function(){var r=0|t.x,a=0|t.y,o=t.w||n.width,s=t.h||n.height,l=t.rel;r=1==l||4==l||7==l?(p-o+r)/2:2==l||5==l||8==l?p-(o+r):r,a=3==l||4==l||5==l?(h-s+a)/2:l>=6?h-(s+a):a,e.event.off(n,"error load abort",i);try{c.globalAlpha=t.opacity||1,c.drawImage(n,r,a,o,s)}catch(u){}b.next()};e.event.on(n,"error load abort",i),n.src=t.src,n.complete&&i()}),v&&(b.inc(),i.applyFilter(s,v,b.next)),b.check()},getMatrix:function(t){var n=e.extend({},this.matrix),i=n.sw=n.sw||t.videoWidth||t.naturalWidth||t.width,o=n.sh=n.sh||t.videoHeight||t.naturalHeight||t.height,s=n.dw=n.dw||i,l=n.dh=n.dh||o,c=i/o,u=s/l,d=n.resize;if("preview"==d){if(s!=i||l!=o){var f,p;u>=c?(f=i,p=f/u):(p=o,f=p*u),(f!=i||p!=o)&&(n.sx=~~((i-f)/2),n.sy=~~((o-p)/2),i=f,o=p)}}else"height"==d?s=l*c:"width"==d?l=s/c:d&&(i>s||o>l?"min"==d?(s=a(u>c?r(i,s):l*c),l=a(u>c?s/c:r(o,l))):(s=a(c>=u?r(i,s):l*c),l=a(c>=u?s/c:r(o,l))):(s=i,l=o));return n.sw=i,n.sh=o,n.dw=s,n.dh=l,n.multipass=e.multiPassResize,n},_trans:function(t){this._load(this.file,function(n,i){if(n)t(n);else try{this._apply(i,t)}catch(n){e.log("[err] FileAPI.Image.fn._apply:",n),t(n)}})},get:function(t){if(e.support.transform){var n=this,i=n.matrix;"auto"==i.deg?e.getInfo(n.file,function(e,r){i.deg=l[r&&r.exif&&r.exif.Orientation]||0,n._trans(t)}):n._trans(t)}else t("not_support_transform");return this},toData:function(e){return this.get(e)}},i.exifOrientation=l,i.transform=function(t,r,a,o){function s(s,l){var c={},u=e.queue(function(e){o(e,c)});s?u.fail():e.each(r,function(e,r){if(!u.isFail()){var o=new i(l.nodeType?l:t),s="function"==typeof e;if(s?e(l,o):e.width?o[e.preview?"preview":"resize"](e.width,e.height,e.strategy):e.maxWidth&&(l.width>e.maxWidth||l.height>e.maxHeight)&&o.resize(e.maxWidth,e.maxHeight,"max"),e.crop){var d=e.crop;o.crop(0|d.x,0|d.y,d.w||d.width,d.h||d.height)}e.rotate===n&&a&&(e.rotate="auto"),o.set({type:o.matrix.type||e.type||t.type||"image/png"}),s||o.set({deg:e.rotate,overlay:e.overlay,filter:e.filter,quality:e.quality||1}),u.inc(),o.toData(function(e,t){e?u.fail():(c[r]=t,u.next())})}})}t.width?s(!1,t):e.getInfo(t,s)},e.each(["TOP","CENTER","BOTTOM"],function(t,n){e.each(["LEFT","CENTER","RIGHT"],function(e,r){i[t+"_"+e]=3*n+r,i[e+"_"+t]=3*n+r})}),i.toCanvas=function(e){var n=t.createElement("canvas");return n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height,n.getContext("2d").drawImage(e,0,0),n},i.fromDataURL=function(t,n,i){var r=e.newImage(t);e.extend(r,n),i(r)},i.applyFilter=function(t,n,r){"function"==typeof n?n(t,r):window.Caman&&window.Caman("IMG"==t.tagName?i.toCanvas(t):t,function(){"string"==typeof n?this[n]():e.each(n,function(e,t){this[t](e)},this),this.render(r)})},e.renderImageToCanvas=function(t,n,i,r,a,o,s,l,c,u){try{return t.getContext("2d").drawImage(n,i,r,a,o,s,l,c,u)}catch(d){throw e.log("renderImageToCanvas failed"),d}},e.support.canvas=e.support.transform=s,e.Image=i}(FileAPI,document),function(e){"use strict";e(FileAPI)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,n;return e.width*e.height>1048576?(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-e.width+1,0),0===n.getImageData(0,0,1,1).data[3]):!1},e.detectVerticalSquash=function(e,t){var n,i,r,a,o,s=e.naturalHeight||e.height,l=document.createElement("canvas"),c=l.getContext("2d");for(t&&(s/=2),l.width=1,l.height=s,c.drawImage(e,0,0),n=c.getImageData(0,0,1,s).data,i=0,r=s,a=s;a>i;)o=n[4*(a-1)+3],0===o?r=a:i=a,a=r+i>>1;return a/s||1},e.renderImageToCanvas=function(n,i,r,a,o,s,l,c,u,d){if("image/jpeg"===i._type){var f,p,h,g,m=n.getContext("2d"),v=document.createElement("canvas"),y=1024,$=v.getContext("2d");if(v.width=y,v.height=y,m.save(),f=e.detectSubsampling(i),f&&(r/=2,a/=2,o/=2,s/=2),p=e.detectVerticalSquash(i,f),f||1!==p){for(a*=p,u=Math.ceil(y*u/o),d=Math.ceil(y*d/s/p),c=0,g=0;s>g;){for(l=0,h=0;o>h;)$.clearRect(0,0,y,y),$.drawImage(i,r,a,o,s,-h,-g,o,s),m.drawImage(v,0,0,y,y,l,c,u,d),h+=y,l+=u;g+=y,c+=d}return m.restore(),n}}return t(n,i,r,a,o,s,l,c,u,d)}}}),function(e,t){"use strict";function n(t,n,i){var r=t.blob,a=t.file;if(a){if(!r.toDataURL)return void e.readAsBinaryString(r,function(e){"load"==e.type&&n(t,e.result)});var o={"image/jpeg":".jpe?g","image/png":".png"},s=o[t.type]?t.type:"image/png",l=o[s]||".png",c=r.quality||1;a.match(new RegExp(l+"$","i"))||(a+=l.replace("?","")),t.file=a,t.type=s,!i&&r.toBlob?r.toBlob(function(e){n(t,e)},s,c):n(t,e.toBinaryString(r.toDataURL(s,c)))}else n(t,r)}var i=t.document,r=t.FormData,a=function(){this.items=[]},o=t.encodeURIComponent;a.prototype={append:function(e,t,n,i){this.items.push({name:e,blob:t&&t.blob||(void 0==t?"":t),file:t&&(n||t.name),type:t&&(i||t.type)})},each:function(e){for(var t=0,n=this.items.length;n>t;t++)e.call(this,this.items[t])},toData:function(t,n){n._chunked=e.support.chunked&&n.chunkSize>0&&1==e.filter(this.items,function(e){return e.file}).length,e.support.html5?e.formData&&!this.multipart&&r?n._chunked?(e.log("FileAPI.Form.toPlainData"),this.toPlainData(t)):(e.log("FileAPI.Form.toFormData"),this.toFormData(t)):(e.log("FileAPI.Form.toMultipartData"),this.toMultipartData(t)):(e.log("FileAPI.Form.toHtmlData"),this.toHtmlData(t))},_to:function(t,n,i,r){var a=e.queue(function(){n(t)});this.each(function(o){try{i(o,t,a,r)}catch(s){e.log("FileAPI.Form._to: "+s.message),n(s)}}),a.check()},toHtmlData:function(t){this._to(i.createDocumentFragment(),t,function(t,n){var r,a=t.blob;t.file?(e.reset(a,!0),a.name=t.name,a.disabled=!1,n.appendChild(a)):(r=i.createElement("input"),r.name=t.name,r.type="hidden",r.value=a,n.appendChild(r))})},toPlainData:function(e){this._to({},e,function(e,t,i){e.file&&(t.type=e.file),e.blob.toBlob?(i.inc(),n(e,function(e,n){t.name=e.name,t.file=n,t.size=n.length,t.type=e.type,i.next()})):e.file?(t.name=e.blob.name,t.file=e.blob,t.size=e.blob.size,t.type=e.type):(t.params||(t.params=[]),t.params.push(o(e.name)+"="+o(e.blob))),t.start=-1,t.end=t.file&&t.file.FileAPIReadPosition||-1,t.retry=0})},toFormData:function(e){this._to(new r,e,function(e,t,i){e.blob&&e.blob.toBlob?(i.inc(),n(e,function(e,n){t.append(e.name,n,e.file),i.next()})):e.file?t.append(e.name,e.blob,e.file):t.append(e.name,e.blob),e.file&&t.append("_"+e.name,e.file)})},toMultipartData:function(t){this._to([],t,function(e,t,i,r){i.inc(),n(e,function(e,n){t.push("--_"+r+('\r\nContent-Disposition: form-data; name="'+e.name+'"'+(e.file?'; filename="'+o(e.file)+'"':"")+(e.file?"\r\nContent-Type: "+(e.type||"application/octet-stream"):"")+"\r\n\r\n"+(e.file?n:o(n))+"\r\n")),i.next()},!0)},e.expando)}},e.Form=a}(FileAPI,window),function(e,t){"use strict";var n=function(){},i=e.document,r=function(e){this.uid=t.uid(),this.xhr={abort:n,getResponseHeader:n,getAllResponseHeaders:n},this.options=e},a={"":1,XML:1,Text:1,Body:1};r.prototype={status:0,statusText:"",constructor:r,getResponseHeader:function(e){return this.xhr.getResponseHeader(e)},getAllResponseHeaders:function(){return this.xhr.getAllResponseHeaders()||{}},end:function(i,r){var a=this,o=a.options;a.end=a.abort=n,a.status=i,r&&(a.statusText=r),t.log("xhr.end:",i,r),o.complete(200==i||201==i?!1:a.statusText||"unknown",a),a.xhr&&a.xhr.node&&setTimeout(function(){var t=a.xhr.node;try{t.parentNode.removeChild(t)}catch(n){}try{delete e[a.uid]}catch(n){}e[a.uid]=a.xhr.node=null},9)},abort:function(){this.end(0,"abort"),this.xhr&&(this.xhr.aborted=!0,this.xhr.abort())},send:function(e){var t=this,n=this.options;e.toData(function(e){e instanceof Error?t.end(0,e.message):(n.upload(n,t),t._send.call(t,n,e))},n)},_send:function(n,r){var o,s=this,l=s.uid,c=s.uid+"Load",u=n.url;if(t.log("XHR._send:",r),n.cache||(u+=(~u.indexOf("?")?"&":"?")+t.uid()),r.nodeName){var d=n.jsonp;u=u.replace(/([a-z]+)=(\?)/i,"$1="+l),n.upload(n,s);var f=function(e){if(~u.indexOf(e.origin))try{var n=t.parseJSON(e.data);n.id==l&&p(n.status,n.statusText,n.response)}catch(i){p(0,i.message)}},p=e[l]=function(n,i,r){s.readyState=4,s.responseText=r,s.end(n,i),t.event.off(e,"message",f),e[l]=o=g=e[c]=null};s.xhr.abort=function(){try{g.stop?g.stop():g.contentWindow.stop?g.contentWindow.stop():g.contentWindow.document.execCommand("Stop")}catch(e){}p(0,"abort")},t.event.on(e,"message",f),e[c]=function(){try{var e=g.contentWindow,n=e.document,i=e.result||t.parseJSON(n.body.innerHTML);p(i.status,i.statusText,i.response)}catch(r){t.log("[transport.onload]",r)}},o=i.createElement("div"),o.innerHTML='<form target="'+l+'" action="'+u+'" method="'+n.method+'" enctype="multipart/form-data" style="position: absolute; top: -1000px; overflow: hidden; width: 1px; height: 1px;"><iframe name="'+l+'" src="javascript:false;" onload="window.'+c+" && "+c+'();"></iframe>'+(d&&n.url.indexOf("=?")<0?'<input value="'+l+'" name="'+d+'" type="hidden"/>':"")+"</form>";var h=o.getElementsByTagName("form")[0],g=o.getElementsByTagName("iframe")[0];h.appendChild(r),t.log(h.parentNode.innerHTML),i.body.appendChild(o),s.xhr.node=o,s.readyState=2;try{h.submit()}catch(m){t.log("iframe.error: "+m)}h=null}else{if(u=u.replace(/([a-z]+)=(\?)&?/i,""),this.xhr&&this.xhr.aborted)return void t.log("Error: already aborted");if(o=s.xhr=t.getXHR(),r.params&&(u+=(u.indexOf("?")<0?"?":"&")+r.params.join("&")),o.open(n.method,u,!0),t.withCredentials&&(o.withCredentials="true"),n.headers&&n.headers["X-Requested-With"]||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.each(n.headers,function(e,t){o.setRequestHeader(t,e)}),n._chunked){o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){r.retry||n.progress({type:e.type,total:r.size,loaded:r.start+e.loaded,totalSize:r.size},s,n)},100),!1),o.onreadystatechange=function(){var e=parseInt(o.getResponseHeader("X-Last-Known-Byte"),10);if(s.status=o.status,s.statusText=o.statusText,s.readyState=o.readyState,4==o.readyState){for(var i in a)s["response"+i]=o["response"+i];if(o.onreadystatechange=null,!o.status||o.status-201>0)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status||416==o.status)&&++r.retry<=n.chunkUploadRetry){var l=o.status?0:t.chunkNetworkDownRetryTimeout;n.pause(r.file,n),t.log("X-Last-Known-Byte: "+e),e?r.end=e:(r.end=r.start-1,416==o.status&&(r.end=r.end-n.chunkSize)),setTimeout(function(){s._send(n,r)},l)}else s.end(o.status);else r.retry=0,r.end==r.size-1?s.end(o.status):(t.log("X-Last-Known-Byte: "+e),e&&(r.end=e),r.file.FileAPIReadPosition=r.end,setTimeout(function(){s._send(n,r)},0));o=null}},r.start=r.end+1,r.end=Math.max(Math.min(r.start+n.chunkSize,r.size)-1,r.start);var v=r.file,y=(v.slice||v.mozSlice||v.webkitSlice).call(v,r.start,r.end+1);r.size&&!y.size?setTimeout(function(){s.end(-1)}):(o.setRequestHeader("Content-Range","bytes "+r.start+"-"+r.end+"/"+r.size),o.setRequestHeader("Content-Disposition","attachment; filename="+encodeURIComponent(r.name)),o.setRequestHeader("Content-Type",r.type||"application/octet-stream"),o.send(y)),v=y=null}else if(o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){n.progress(e,s,n)},100),!1),o.onreadystatechange=function(){if(s.status=o.status,s.statusText=o.statusText,s.readyState=o.readyState,4==o.readyState){for(var e in a)s["response"+e]=o["response"+e];if(o.onreadystatechange=null,!o.status||o.status>201)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status)&&(n.retry||0)<n.uploadRetry){n.retry=(n.retry||0)+1;var i=t.networkDownRetryTimeout;n.pause(n.file,n),setTimeout(function(){s._send(n,r)},i)}else s.end(o.status);else s.end(o.status);o=null}},t.isArray(r)){o.setRequestHeader("Content-Type","multipart/form-data; boundary=_"+t.expando);var $=r.join("")+"--_"+t.expando+"--";if(o.sendAsBinary)o.sendAsBinary($);else{var b=Array.prototype.map.call($,function(e){return 255&e.charCodeAt(0)});o.send(new Uint8Array(b).buffer)}}else o.send(r)}}},t.XHR=r}(window,FileAPI),function(e,t){"use strict";function n(e){return e>=0?e+"px":e}function i(e){var t,n=a.createElement("canvas"),i=!1;try{t=n.getContext("2d"),t.drawImage(e,0,0,1,1),i=255!=t.getImageData(0,0,1,1).data[4]}catch(r){}return i}var r=e.URL||e.webkitURL,a=e.document,o=e.navigator,s=o.getUserMedia||o.webkitGetUserMedia||o.mozGetUserMedia||o.msGetUserMedia,l=!!s;t.support.media=l;var c=function(e){this.video=e};c.prototype={isActive:function(){return!!this._active},start:function(e){var t,n,a=this,l=a.video,c=function(i){a._active=!i,clearTimeout(n),clearTimeout(t),e&&e(i,a)};s.call(o,{video:!0},function(e){a.stream=e,l.src=r.createObjectURL(e),t=setInterval(function(){i(l)&&c(null)},1e3),n=setTimeout(function(){c("timeout")},5e3),l.play()},c)},stop:function(){try{this._active=!1,this.video.pause(),this.stream.stop()}catch(e){}},shot:function(){return new u(this.video)}},c.get=function(e){return new c(e.firstChild)},c.publish=function(i,r,o){"function"==typeof r&&(o=r,r={}),r=t.extend({},{width:"100%",height:"100%",start:!0},r),i.jquery&&(i=i[0]);var s=function(e){if(e)o(e);else{var t=c.get(i);r.start?t.start(o):o(null,t)}};if(i.style.width=n(r.width),i.style.height=n(r.height),t.html5&&l){var u=a.createElement("video");u.style.width=n(r.width),u.style.height=n(r.height),e.jQuery?jQuery(i).empty():i.innerHTML="",i.appendChild(u),s()}else c.fallback(i,r,s)},c.fallback=function(e,t,n){n("not_support_camera")};var u=function(e){var n=e.nodeName?t.Image.toCanvas(e):e,i=t.Image(n);return i.type="image/png",i.width=n.width,i.height=n.height,i.size=n.width*n.height*4,i};c.Shot=u,t.Camera=c}(window,FileAPI),function(e,t,n){"use strict";var i=e.document,r=e.location,a=e.navigator,o=n.each;n.support.flash=function(){var t=a.mimeTypes,i=!1;if(a.plugins&&"object"==typeof a.plugins["Shockwave Flash"])i=a.plugins["Shockwave Flash"].description&&!(t&&t["application/x-shockwave-flash"]&&!t["application/x-shockwave-flash"].enabledPlugin);else try{i=!(!e.ActiveXObject||!new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(o){n.log("Flash -- does not supported.")}return i&&/^file:/i.test(r)&&n.log("[warn] Flash does not work on `file:` protocol."),i}(),n.support.flash&&(!n.html5||!n.support.html5||n.cors&&!n.support.cors||n.media&&!n.support.media)&&function(){function s(e){return('<object id="#id#" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+(e.width||"100%")+'" height="'+(e.height||"100%")+'"><param name="movie" value="#src#" /><param name="flashvars" value="#flashvars#" /><param name="swliveconnect" value="true" /><param name="allowscriptaccess" value="always" /><param name="allownetworking" value="all" /><param name="menu" value="false" /><param name="wmode" value="#wmode#" /><embed flashvars="#flashvars#" swliveconnect="true" allownetworking="all" allowscriptaccess="always" name="#id#" src="#src#" width="'+(e.width||"100%")+'" height="'+(e.height||"100%")+'" menu="false" wmode="transparent" type="application/x-shockwave-flash"></embed></object>').replace(/#(\w+)#/gi,function(t,n){return e[n]})}function l(e,t){if(e&&e.style){var n,i;for(n in t){i=t[n],"number"==typeof i&&(i+="px");try{e.style[n]=i}catch(r){}}}}function c(e,t){o(t,function(t,n){var i=e[n];e[n]=function(){return this.parent=i,t.apply(this,arguments)}})}function u(e){return e&&!e.flashId}function d(e){var t=e.wid=n.uid();return w._fn[t]=e,"FileAPI.Flash._fn."+t}function f(e){try{w._fn[e.wid]=null,delete w._fn[e.wid]}catch(t){}}function p(e,t){if(!b.test(e)){if(/^\.\//.test(e)||"/"!=e.charAt(0)){var n=r.pathname;n=n.substr(0,n.lastIndexOf("/")),e=(n+"/"+e).replace("/./","/")}"//"!=e.substr(0,2)&&(e="//"+r.host+e),b.test(e)||(e=r.protocol+e)}return t&&(e+=(/\?/.test(e)?"&":"?")+t),e}function h(e,t,r){function a(){try{var e=w.get(c);e.setImage(t)}catch(i){n.log('[err] FlashAPI.Preview.setImage -- can not set "base64":',i)}}var o,c=n.uid(),u=i.createElement("div"),h=10;for(o in e)u.setAttribute(o,e[o]),u[o]=e[o];l(u,e),e.width="100%",e.height="100%",u.innerHTML=s(n.extend({id:c,src:p(n.flashImageUrl,"r="+n.uid()),wmode:"opaque",flashvars:"scale="+e.scale+"&callback="+d(function g(){return f(g),--h>0&&a(),!0})},e)),r(!1,u),u=null}function g(e){return{id:e.id,name:e.name,matrix:e.matrix,flashId:e.flashId}}function m(t){var n=t.getBoundingClientRect(),r=i.body,a=(t&&t.ownerDocument).documentElement;return{top:n.top+(e.pageYOffset||a.scrollTop)-(a.clientTop||r.clientTop||0),left:n.left+(e.pageXOffset||a.scrollLeft)-(a.clientLeft||r.clientLeft||0),width:n.right-n.left,height:n.bottom-n.top}}var v=n.uid(),y=0,$={},b=/^https?:/i,w={_fn:{},init:function(){var e=i.body&&i.body.firstChild;if(e)do if(1==e.nodeType){n.log("FlashAPI.state: awaiting");var t=i.createElement("div");return t.id="_"+v,l(t,{top:1,right:1,width:5,height:5,position:"absolute",zIndex:"2147483647"}),e.parentNode.insertBefore(t,e),void w.publish(t,v)}while(e=e.nextSibling);10>y&&setTimeout(w.init,50*++y)},publish:function(e,t,i){i=i||{},e.innerHTML=s({id:t,src:p(n.flashUrl,"r="+n.version),wmode:i.camera?"":"transparent",flashvars:"callback="+(i.onEvent||"FileAPI.Flash.onEvent")+"&flashId="+t+"&storeKey="+a.userAgent.match(/\d/gi).join("")+"_"+n.version+(w.isReady||(n.pingUrl?"&ping="+n.pingUrl:""))+"&timeout="+n.flashAbortTimeout+(i.camera?"&useCamera="+p(n.flashWebcamUrl):"")+"&debug="+(n.debug?"1":"")},i)},ready:function(){n.log("FlashAPI.state: ready"),w.ready=n.F,w.isReady=!0,w.patch(),w.patchCamera&&w.patchCamera(),n.event.on(i,"mouseover",w.mouseover),n.event.on(i,"click",function(e){w.mouseover(e)&&(e.preventDefault?e.preventDefault():e.returnValue=!0)})},getEl:function(){return i.getElementById("_"+v)},getWrapper:function(e){do if(/js-fileapi-wrapper/.test(e.className))return e;while((e=e.parentNode)&&e!==i.body)},mouseover:function(e){var t=n.event.fix(e).target;if(/input/i.test(t.nodeName)&&"file"==t.type&&!t.disabled){var r=t.getAttribute(v),a=w.getWrapper(t);if(n.multiFlash){if("i"==r||"r"==r)return!1;if("p"!=r){t.setAttribute(v,"i");var o=i.createElement("div");if(!a)return void n.log("[err] FlashAPI.mouseover: js-fileapi-wrapper not found");l(o,{top:0,left:0,width:t.offsetWidth,height:t.offsetHeight,zIndex:"2147483647",position:"absolute"}),a.appendChild(o),w.publish(o,n.uid()),t.setAttribute(v,"p")}return!0}if(a){var s=m(a);l(w.getEl(),s),w.curInp=t}}else/object|embed/i.test(t.nodeName)||l(w.getEl(),{top:1,left:1,width:5,height:5})},onEvent:function(e){var t=e.type;if("ready"==t){try{w.getInput(e.flashId).setAttribute(v,"r")}catch(i){}return w.ready(),setTimeout(function(){w.mouseenter(e)},50),!0}"ping"===t?n.log("(flash -> js).ping:",[e.status,e.savedStatus],e.error):"log"===t?n.log("(flash -> js).log:",e.target):t in w&&setTimeout(function(){n.log("FlashAPI.event."+e.type+":",e),w[t](e)},1)},mouseenter:function(e){var t=w.getInput(e.flashId);if(t){w.cmd(e,"multiple",null!=t.getAttribute("multiple"));var i=[],r={};o((t.getAttribute("accept")||"").split(/,\s*/),function(e){n.accept[e]&&o(n.accept[e].split(" "),function(e){r[e]=1})}),o(r,function(e,t){i.push(t)}),w.cmd(e,"accept",i.length?i.join(",")+","+i.join(",").toUpperCase():"*")}},get:function(t){return i[t]||e[t]||i.embeds[t]},getInput:function(e){if(!n.multiFlash)return w.curInp;try{var t=w.getWrapper(w.get(e));if(t)return t.getElementsByTagName("input")[0]}catch(i){n.log('[err] Can not find "input" by flashId:',e,i)}},select:function(e){var r,a=w.getInput(e.flashId),s=n.uid(a),l=e.target.files;o(l,function(e){n.checkFileObj(e)}),$[s]=l,i.createEvent?(r=i.createEvent("Event"),r.files=l,r.initEvent("change",!0,!0),a.dispatchEvent(r)):t?t(a).trigger({type:"change",files:l}):(r=i.createEventObject(),r.files=l,a.fireEvent("onchange",r))},cmd:function(e,t,i,r){try{return n.log("(js -> flash)."+t+":",i),w.get(e.flashId||e).cmd(t,i)}catch(a){n.log("(js -> flash).onError:",a.toString()),r||setTimeout(function(){w.cmd(e,t,i,!0)},50)}},patch:function(){n.flashEngine=!0,c(n,{getFiles:function(e,t,i){if(i)return n.filterFiles(n.getFiles(e),t,i),null;var r=n.isArray(e)?e:$[n.uid(e.target||e.srcElement||e)];return r?(t&&(t=n.getFilesFilter(t),r=n.filter(r,function(e){return t.test(e.name)})),r):this.parent.apply(this,arguments)},getInfo:function(e,t){if(u(e))this.parent.apply(this,arguments);else if(e.isShot)t(null,e.info={width:e.width,height:e.height});else{if(!e.__info){var i=e.__info=n.defer();w.cmd(e,"getFileInfo",{id:e.id,callback:d(function r(t,n){f(r),i.resolve(t,e.info=n)})})}e.__info.then(t)}}}),n.support.transform=!0,n.Image&&c(n.Image.prototype,{get:function(e,t){return this.set({scaleMode:t||"noScale"}),this.parent(e)},_load:function(e,t){if(n.log("FlashAPI.Image._load:",e),u(e))this.parent.apply(this,arguments);else{var i=this;n.getInfo(e,function(n){t.call(i,n,e)})}},_apply:function(e,t){if(n.log("FlashAPI.Image._apply:",e),u(e))this.parent.apply(this,arguments);else{var i=this.getMatrix(e.info),r=t;w.cmd(e,"imageTransform",{id:e.id,matrix:i,callback:d(function a(o,s){n.log("FlashAPI.Image._apply.callback:",o),f(a),o?r(o):n.support.html5||n.support.dataURI&&!(s.length>3e4)?(i.filter&&(r=function(e,r){e?t(e):n.Image.applyFilter(r,i.filter,function(){t(e,this.canvas)})}),n.newImage("data:"+e.type+";base64,"+s,r)):h({width:i.deg%180?i.dh:i.dw,height:i.deg%180?i.dw:i.dh,scale:i.scaleMode},s,r)})})}},toData:function(e){var t=this.file,i=t.info,r=this.getMatrix(i);n.log("FlashAPI.Image.toData"),u(t)?this.parent.apply(this,arguments):("auto"==r.deg&&(r.deg=n.Image.exifOrientation[i&&i.exif&&i.exif.Orientation]||0),e.call(this,!t.info,{id:t.id,flashId:t.flashId,name:t.name,type:t.type,matrix:r}))}}),n.Image&&c(n.Image,{fromDataURL:function(e,t,i){!n.support.dataURI||e.length>3e4?h(n.extend({scale:"exactFit"},t),e.replace(/^data:[^,]+,/,""),function(e,t){i(t)}):this.parent(e,t,i)}}),c(n.Form.prototype,{toData:function(e){for(var t=this.items,i=t.length;i--;)if(t[i].file&&u(t[i].blob))return this.parent.apply(this,arguments);n.log("FlashAPI.Form.toData"),e(t)}}),c(n.XHR.prototype,{_send:function(e,t){if(t.nodeName||t.append&&n.support.html5||n.isArray(t)&&"string"==typeof t[0])return this.parent.apply(this,arguments);
var i,r,a={},s={},l=this;if(o(t,function(e){e.file?(s[e.name]=e=g(e.blob),r=e.id,i=e.flashId):a[e.name]=e.blob}),r||(i=v),!i)return n.log("[err] FlashAPI._send: flashId -- undefined"),this.parent.apply(this,arguments);n.log("FlashAPI.XHR._send: "+i+" -> "+r),l.xhr={headers:{},abort:function(){w.cmd(i,"abort",{id:r})},getResponseHeader:function(e){return this.headers[e]},getAllResponseHeaders:function(){return this.headers}};var c=n.queue(function(){w.cmd(i,"upload",{url:p(e.url.replace(/([a-z]+)=(\?)&?/i,"")),data:a,files:r?s:null,headers:e.headers||{},callback:d(function t(i){var r=i.type,a=i.result;n.log("FlashAPI.upload."+r),"progress"==r?(i.loaded=Math.min(i.loaded,i.total),i.lengthComputable=!0,e.progress(i)):"complete"==r?(f(t),"string"==typeof a&&(l.responseText=a.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")),l.end(i.status||200)):("abort"==r||"error"==r)&&(l.end(i.status||0,i.message),f(t))})})});o(s,function(e){c.inc(),n.getInfo(e,c.next)}),c.check()}})}};n.Flash=w,n.newImage("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",function(e,t){n.support.dataURI=!(1!=t.width||1!=t.height),w.init()})}()}(window,window.jQuery,FileAPI),function(e,t,n){"use strict";var i=n.each,r=[];!n.support.flash||!n.media||n.support.media&&n.html5||!function(){function e(e){var t=e.wid=n.uid();return n.Flash._fn[t]=e,"FileAPI.Flash._fn."+t}function t(e){try{n.Flash._fn[e.wid]=null,delete n.Flash._fn[e.wid]}catch(t){}}var a=n.Flash;n.extend(n.Flash,{patchCamera:function(){n.Camera.fallback=function(i,r,o){var s=n.uid();n.log("FlashAPI.Camera.publish: "+s),a.publish(i,s,n.extend(r,{camera:!0,onEvent:e(function l(e){"camera"===e.type&&(t(l),e.error?(n.log("FlashAPI.Camera.publish.error: "+e.error),o(e.error)):(n.log("FlashAPI.Camera.publish.success: "+s),o(null)))})}))},i(r,function(e){n.Camera.fallback.apply(n.Camera,e)}),r=[],n.extend(n.Camera.prototype,{_id:function(){return this.video.id},start:function(i){var r=this;a.cmd(this._id(),"camera.on",{callback:e(function o(e){t(o),e.error?(n.log("FlashAPI.camera.on.error: "+e.error),i(e.error,r)):(n.log("FlashAPI.camera.on.success: "+r._id()),r._active=!0,i(null,r))})})},stop:function(){this._active=!1,a.cmd(this._id(),"camera.off")},shot:function(){n.log("FlashAPI.Camera.shot:",this._id());var e=n.Flash.cmd(this._id(),"shot",{});return e.type="image/png",e.flashId=this._id(),e.isShot=!0,new n.Camera.Shot(e)}})}}),n.Camera.fallback=function(){r.push(arguments)}}()}(window,window.jQuery,FileAPI),"function"==typeof define&&define.amd&&define("FileAPI",[],function(){return FileAPI}),function(e,t){"use strict";var n=e.noop,i=!e.fn.prop,r=i?"attr":"prop",a="data-fileapi",o="data-fileapi-id",s=function(i,r){if(this.$el=i=e(i).on("change.fileapi",e.proxy(this,"_onSelect")),this.el=i[0],this._options={},this.options=r=e.extend({url:0,data:{},accept:0,multiple:!1,paramName:0,dataType:"json",duplicate:!1,chunkSize:0,chunkUploadRetry:3,maxSize:0,maxFiles:0,imageSize:0,sortFn:0,filterFn:0,autoUpload:!1,lang:{B:"bytes",KB:"KB",MB:"MB",GB:"GB",TB:"TB"},sizeFormat:"0.00",imageTransform:0,elements:{ctrl:{upload:'[data-fileapi="ctrl.upload"]',reset:'[data-fileapi="ctrl.reset"]',abort:'[data-fileapi="ctrl.abort"]'},empty:{show:'[data-fileapi="empty.show"]',hide:'[data-fileapi="empty.hide"]'},emptyQueue:{show:'[data-fileapi="emptyQueue.show"]',hide:'[data-fileapi="emptyQueue.hide"]'},active:{show:'[data-fileapi="active.show"]',hide:'[data-fileapi="active.hide"]'},size:'[data-fileapi="size"]',name:'[data-fileapi="name"]',progress:'[data-fileapi="progress"]',file:{tpl:'[data-fileapi="file.tpl"]',progress:'[data-fileapi="file.progress"]',active:{show:'[data-fileapi="active.show"]',hide:'[data-fileapi="active.hide"]'},preview:{el:0,get:0,width:0,height:0,processing:0}},dnd:{el:'[data-fileapi="dnd"]',hover:"dnd_hover"}},onDrop:n,onDropHover:n,onSelect:n,onUpload:n,onProgress:n,onComplete:n,onFileUpload:n,onFileProgress:n,onFileComplete:n},r),!r.url){var o=this.$el.attr("action")||this.$el.find("form").attr("action");o?r.url=o:this._throw("url â€” is not defined")}this.$files=this.elem("list"),this.itemTplFn=e.fn.fileapi.tpl(e("<div/>").append(this.elem("file.tpl")).html()),t.each(r,function(e,t){this._setOption(t,e)},this),this.$el.on("reset.fileapi",e.proxy(this,"_onReset")).on("submit.fileapi",e.proxy(this,"_onSubmit")).on("upload.fileapi progress.fileapi complete.fileapi",e.proxy(this,"_onUploadEvent")).on("fileupload.fileapi fileprogress.fileapi filecomplete.fileapi",e.proxy(this,"_onFileUploadEvent")).on("click","["+a+"]",e.proxy(this,"_onActionClick"));var s=r.elements.ctrl;s&&(s.reset&&this.$el.on("click.fileapi",s.reset,e.proxy(this,"_onReset")),s.upload&&this.$el.on("click.fileapi",s.upload,e.proxy(this,"_onSubmit"))),this.elem("dnd.el",!0).dnd(e.proxy(this,"_onDropHover"),e.proxy(this,"_onDrop")),this.$progress=this.elem("progress"),this._crop={},this._rotate={},this.files=[],this.uploaded=[],this.clear()};s.prototype={constructor:s,_throw:function(e){throw"jquery.fileapi: "+e},_getFiles:function(e,n){var i=this.options,r=i.maxSize,a=i.filterFn,o=t.getFiles(e),s={all:o,files:[],other:[],duplicate:i.duplicate?[]:this._extractDuplicateFiles(o)},l=i.imageSize,c=this;l||a?t.filterFiles(o,function(e,t){var n=!0;return t&&l&&(n=(!l.minWidth||t.width>=l.minWidth)&&(!l.minHeight||t.height>=l.minHeight)&&(!l.maxWidth||t.height<=l.maxWidth)&&(!l.maxHeight||t.height<=l.maxHeight)),n&&(!r||r>=e.size)&&(!a||a(e,t))},function(e,t){s.files=e,s.other=t,n.call(c,s)}):(t.each(o,function(e){s[!r||r>=e.size?"files":"other"].push(e)}),n.call(c,s))},_extractDuplicateFiles:function(e){for(var t,n=[],i=e.length,r=this.files;i--;)for(t=r.length;t--;)if(this._fileCompare(e[i],r[t])){n.push(e.splice(i,1));break}return n},_fileCompare:function(e,t){return e.size==t.size&&e.name==t.name},_getFormatedSize:function(e){var n=this.options,i="B";return e>=t.TB?e/=t[i="TB"]:e>=t.GB?e/=t[i="GB"]:e>=t.MB?e/=t[i="MB"]:e>=t.KB&&(e/=t[i="KB"]),n.sizeFormat.replace(/^\d+([^\d]+)(\d*)/,function(t,r,a){return e=e.toFixed(a.length),(e+"").replace(".",r)+" "+n.lang[i]})},_onSelect:function(t){this._getFiles(t,e.proxy(function(e){e.all.length&&this.emit("select",e)!==!1&&this.add(e.files)},this))},_onActionClick:function(n){var i=n.currentTarget,r=e.attr(i,a),s=e(i).closest("["+o+"]",this.$el),l=s.attr(o),c=!0;"remove"==r?(s.remove(),this.queue=t.filter(this.queue,function(e){return t.uid(e)!=l}),this.files=t.filter(this.files,function(e){return t.uid(e)!=l}),this._redraw()):/^rotate/.test(r)?this.rotate(l,/ccw/.test(r)?"-=90":"+=90"):c=!1,c&&n.preventDefault()},_onSubmit:function(e){this.upload(),e.preventDefault()},_onReset:function(e){this.clear(),e.preventDefault()},_onDrop:function(e){this._getFiles(e,function(e){this.emit("drop",e)!==!1&&this.add(e.files)})},_onDropHover:function(t,n){if(this.emit("dropHover",{state:t,event:n})!==!1){var i=this.option("elements.dnd.hover");i&&e(n.currentTarget).toggleClass(i,t)}},_getUploadEvent:function(t){var n=this.xhr,i={xhr:n,file:n.currentFile,files:n.files,widget:this};return e.extend(i,t)},_emitUploadEvent:function(e){var t=this._getUploadEvent();this.emit(e+"upload",t)},_emitProgressEvent:function(e,t){var n=this._getUploadEvent(t);this.emit(e+"progress",n)},_emitCompleteEvent:function(t,n){var i=this.xhr,r=this._getUploadEvent({error:n,status:i.status,statusText:i.statusText,result:i.responseText});"json"==this.options.dataType&&(r.result=e.parseJSON(r.result)),this.emit(t+"complete",r)},_onUploadEvent:function(e,t){var n=this,i=this.$progress,r=e.type;if("progress"==r)i.stop().animate({width:100*(t.loaded/t.total)+"%"},300);else if("upload"==r)i.width(0);else{var a=function(){i.dequeue(),n.clear()};this.xhr=null,this.active=!1,i.length?i.queue(a):a()}},_onFileUploadPrepare:function(n,i){var r=t.uid(n),a=this._rotate[r],o=this._crop[r];if(a||o){var s=i.imageTransform=i.imageTransform||{};e.isEmptyObject(s)||parseInt(s.maxWidth||s.minWidth||s.width,10)>0||s.type||s.quality?(s.crop=o,s.rotate=a):t.each(s,function(e){e.crop=o,e.rotate=a})}},_onFileUploadEvent:function(e,n){var i=this,r=e.type.substr(4),o=t.uid(n.file),s=this.fileElem(o),l=this._$fileprogress;if(this.__fileId!==o&&(this.__fileId=o,this._$fileprogress=l=s.find(this.option("elements.file.progress"))),"progress"==r)l.stop().animate({width:100*(n.loaded/n.total)+"%"},300);else if("upload"==r||"complete"==r){var c=function(){var e="elements.file."+r;"upload"==r&&(s.find("["+a+'="remove"]').hide(),l.width(0)),l.dequeue(),s.find(i.option(e+".show")).show(),s.find(i.option(e+".hide")).hide()};l.length?l.queue(c):c(),"complete"==r&&(this.uploaded.push(n.file),delete this._rotate[o])}},_redraw:function(){var n=!!this.active,i=this.files,a=!i.length&&!n,s=!this.queue.length&&!n,l=[],c=0,u=this.$files,d=u.children().length,f=this.option("elements.file.preview");t.each(i,function(n,i){var r=t.uid(n);if(l.push(n.name),c+=n.size,u.length&&!this.fileElem(r).length){var a=this.itemTplFn({$idx:d+i,uid:n.uid,name:n.name,type:n.type,size:n.size,sizeText:this._getFormatedSize(n.size)});u.append(e(a).attr(o,r)),f.el&&this._makeFilePreview(r,n,f)}},this),this.elem("name").text(l.join(", ")),this.elem("size").text(this._getFormatedSize(c)),this.__empty!==a&&(this.__empty=a,this.elem("empty.show").toggle(a),this.elem("empty.hide").toggle(!a)),this.__emptyQueue!==s&&(this.__emptyQueue=a,this.elem("emptyQueue.show").toggle(s),this.elem("emptyQueue.hide").toggle(!s)),this.__active!==n&&(this.__active=n,this.elem("active.show").toggle(n),this.elem("active.hide").toggle(!n),this.$(".js-fileapi-wrapper,:file")[n?"attr":"removeAttr"]("aria-disabled",n)[r]("disabled",n)),this.elem("ctrl.upload").add(this.elem("ctrl.reset"))[a||n?"attr":"removeAttr"]("aria-disabled",a||n)[r]("disabled",a||n)},_makeFilePreview:function(e,n,i,r){var a=this,o=r?a.$(i.el):a.fileElem(e).find(i.el);if(/^image/.test(n.type)){t.log("_makeFilePreview:",e,n);var s=t.Image(n),l=function(){s.get(function(t,r){a._crop[e]||(t?(i.get&&i.get(o,n),a.emit("filePreviewError",{error:t,file:n})):o.html(r))})};i.width&&s.preview(i.width,i.height),i.rotate&&s.rotate(i.rotate),i.processing?i.processing(n,s,l):l()}else i.get&&i.get(o,n)},emit:function(t,n){var i,r=this.options,a=e.Event(t);return a.widget=this,t=e.camelCase("on-"+t.replace(/(file)(upload)/,"$1-$2")),e.isFunction(r[t])&&(i=r[t].call(this.el,a,n)),i!==!1&&this.$el.triggerHandler(a,n)},add:function(e){if(e.length){var n=this.options,i=n.sortFn,r=n.elements.preview;i&&e.sort(i),r&&r.el&&t.each(e,function(e){this._makeFilePreview(t.uid(e),e,r,!0)},this),this.xhr&&this.xhr.append(e),this.queue=this.queue.concat(e),this.files=this.files.concat(e),this.options.autoUpload?this.upload():this._redraw()}},$:function(t,n){return"string"==typeof t&&(t=/^#/.test(t)?t:(n?e(n):this.$el).find(t)),e(t)},elem:function(t,n){var i=this.option("elements."+t);return void 0===i&&n&&(i=this.option("elements."+t.substr(0,t.lastIndexOf(".")))),this.$("string"!=e.type(i)&&e.isEmptyObject(i)?[]:i)},fileElem:function(e){return this.$("["+o+'="'+e+'"]')},option:function(n,i){if(void 0!==i&&e.isPlainObject(i))return t.each(i,function(e,t){this.option(n+"."+t,e)},this),this;var r,a,o=this.options,s=o[n],l=0;if(-1!=n.indexOf("."))for(s=o,n=n.split("."),r=n.length;r>l;l++){if(a=n[l],void 0!==i&&1===r-l){s[a]=i;break}void 0===s[a]&&(s[a]={}),s=s[a]}else void 0!==i&&(o[n]=i);return void 0!==i&&(this._setOption(n,i,this._options[n]),this._options[n]=i),void 0!==i?i:s},_setOption:function(e,t){switch(e){case"accept":case"multiple":case"paramName":"paramName"==e&&(e="name"),t&&this.$(":file")[r](e,t)}},serialize:function(){var t,n={};return this.$el.find(":input").each(function(i,r){(i=r.name)&&!r.disabled&&(r.checked||/select|textarea|input/i.test(r.nodeName)&&/checkbox|radio/i.test(r.type))&&(t=e(r).val(),void 0!==n[i]?(n[i].push||(n[i]=[n[i]]),n[i].push(t)):n[i]=t)}),n},upload:function(){if(!this.active){this.active=!0;var n=this.$el,i=this.options,r={},a={url:i.url,data:e.extend({},this.serialize(),i.data),files:r,chunkSize:0|i.chunkSize,chunkUploadRetry:0|i.chunkUploadRetry,prepare:e.proxy(this,"_onFileUploadPrepare"),imageTransform:i.imageTransform};r[n.find(":file").attr("name")||"files[]"]=this.queue,t.each(["upload","progress","complete"],function(t){a[t]=e.proxy(this,e.camelCase("_emit-"+t+"Event"),""),a["file"+t]=e.proxy(this,e.camelCase("_emit-"+t+"Event"),"file")},this),this.xhr=t.upload(a),this._redraw()}},crop:function(n,i){var r=t.uid(n),a=this.options,o=a.multiple?this.option("elements.file.preview"):a.elements.preview,s=(a.multiple?this.fileElem(r):this.$el).find(o&&o.el);s.length&&t.getInfo(n,e.proxy(function(r,a){if(!r){s.find("div>div").length||s.html(e("<div><div></div></div>").css(o).css("overflow","hidden")),this.__cropFile!==n&&(this.__cropFile=n,t.Image(n).get(function(t,n){s.find(">div>div").html(e(n).width("100%").height("100%"))},"exactFit"));var l=o.width/i.w,c=o.height/i.h;s.find(">div>div").css({width:Math.round(l*a.width),height:Math.round(c*a.height),marginLeft:-Math.round(l*i.x),marginTop:-Math.round(c*i.y)})}},this)),this._crop[r]=i},rotate:function(e,n){var i="object"==typeof e?t.uid(e):e,r=this.options,a=r.multiple?this.option("elements.file.preview"):r.elements.preview,o=(r.multiple?this.fileElem(i):this.$el).find(a&&a.el),s=this._rotate;/([+-])=/.test(n)?n=s[i]=(s[i]||0)+("+"==RegExp.$1?1:-1)*n.substr(2):s[i]=n,o.css({"-webkit-transform":"rotate("+n+"deg)","-moz-transform":"rotate("+n+"deg)",transform:"rotate("+n+"deg)"})},clear:function(){this.queue=[],this._redraw()},widget:function(){return this},destroy:function(){this.$el.off(".fileapi").removeData("fileapi")}},e.fn.fileapi=function(t,n){var i=this.data("fileapi");if(i){if("widget"===t)return i;if("string"==typeof t){var r,a=i[t];return e.isFunction(a)?r=a.call(i,n,arguments[2]):void 0===a&&(r=this.option(t,n)),void 0===r?this:r}}else this.data("fileapi",new s(this,t));return this},e.fn.fileapi.version="0.1.0",e.fn.fileapi.tpl=function(e){var t=0,n="__b+='";return e.replace(/(?:&lt;|<)%([-=])?([\s\S]+?)%(?:&gt;|>)|$/g,function(i,r,a,o){return n+=e.slice(t,o).replace(/[\r\n"']/g,function(e){return"\\"+e}),a&&(n+=r?"'+\n((__x=("+a+"))==null?'':"+("-"==r?"__esc(__x)":"__x")+")\n+'":"';\n"+a+"\n__b+='"),t=o+i.length,i}),Function("ctx","var __x,__b='',__esc=function(val){return typeof val=='string'?val.replace(/</g,'&lt;').replace(/\"/g,'&quot;'):val;};with(ctx||{}){\n"+n+"';\n}return __b;")},e.fn.cropper=function(n){var i=this,r=n.file;return"string"==typeof n?i.Jcrop(n):t.getInfo(r,function(a,o){var s=t.Image(r);n.maxSize&&s.resize(n.maxSize[0],n.maxSize[1],"max"),s.get(function(r,a){n.setSelect=n.setSelect||[0,0,a.width,a.height],t.each(["onSelect","onChange"],function(e,t){(t=n[e])&&(n[e]=function(e){var n=o.width/a.width,i=o.height/a.height;t({x:0|e.x*n+.5,y:0|e.y*i+.5,w:0|e.w*n+.5,h:0|e.h*i+.5})})}),i.css("lineHeight",0).html(e(a).css("margin",0)).trigger("resize").Jcrop("destroy").Jcrop(n)})}),i}}(jQuery,FileAPI),function(){"use strict";var e=null;e="undefined"==typeof window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(e,t){function n(e,t,n,i){return a={label:n,sources:t},"function"==typeof i?i(e,t,n):e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}}))}var i,r={},a={},o={},s=t.getComponent("MenuItem"),l=t.extend(s,{constructor:function(e,t,n,i){this.onClickListener=n,this.label=i,s.call(this,e,t),this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0),this.addClass("vjs-selected"))},showAsLabel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(e){this.onClickListener(this);var t=this.player_.currentTime(),i=this.player_.paused();this.showAsLabel(),this.addClass("vjs-selected"),i||this.player_.bigPlayButton.hide(),"function"!=typeof e&&"function"==typeof this.options_.customSourcePicker&&(e=this.options_.customSourcePicker);var r="loadeddata";"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(r="timeupdate"),n(this.player_,this.src,this.options_.label,e).one(r,function(){this.player_.currentTime(t),this.player_.handleTechSeeked_(),i||this.player_.play().handleTechSeeked_(),this.player_.trigger("resolutionchange")})}}),c=t.getComponent("MenuButton"),u=t.extend(c,{constructor:function(e,n,i,r){if(this.sources=n.sources,this.label=r,this.label.innerHTML=n.initialySelectedLabel,c.call(this,e,n,i),this.controlText("Quality"),i.dynamicLabel)this.el().appendChild(r);else{var a=document.createElement("span");t.addClass(a,"vjs-resolution-button-staticlabel"),this.el().appendChild(a)}},createItems:function(){var e=[],t=this.sources&&this.sources.label||{},n=function(t){e.map(function(e){e.selected(e===t),e.removeClass("vjs-selected")})};for(var i in t)t.hasOwnProperty(i)&&(e.push(new l(this.player_,{label:i,src:t[i],initialySelected:i===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},n,this.label)),o[i]=e[e.length-1]);return e}});i=function(e){function i(e,t){return e.res&&t.res?+t.res-+e.res:0}function s(e){var t={label:{},res:{},type:{}};return e.map(function(e){l(t,"label",e),l(t,"res",e),l(t,"type",e),c(t,"label",e),c(t,"res",e),c(t,"type",e)}),t}function l(e,t,n){null==e[t][n[t]]&&(e[t][n[t]]=[])}function c(e,t,n){e[t][n[t]].push(n)}function d(e,t){var n=p["default"],i="";return"high"===n?(n=t[0].res,i=t[0].label):"low"!==n&&null!=n&&e.res[n]?e.res[n]&&(i=e.res[n][0].label):(n=t[t.length-1].res,i=t[t.length-1].label),{res:n,label:i,sources:e.res[n]}}function f(e){e.tech_.ytPlayer.setPlaybackQuality("default"),e.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(){e.trigger("resolutionchange")}),e.one("play",function(){var t=e.tech_.ytPlayer.getAvailableQualityLevels(),n={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"default"}},i=[];t.map(function(t){i.push({src:e.src().src,type:e.src().type,label:n[t].label,res:n[t].res,_yt:n[t].yt})}),m=s(i);var r=function(t,n,i){return e.tech_.ytPlayer.setPlaybackQuality(n[0]._yt),e},a={label:"auto",res:0,sources:m.label.auto},o=new u(e,{sources:m,initialySelectedLabel:a.label,initialySelectedRes:a.res,customSourcePicker:r},p,g);o.el().classList.add("vjs-resolution-button"),e.controlBar.resolutionSwitcher=e.controlBar.addChild(o)})}var p=t.mergeOptions(r,e),h=this,g=document.createElement("span"),m={};t.addClass(g,"vjs-resolution-button-label"),h.updateSrc=function(e){if(!e)return h.src();h.controlBar.resolutionSwitcher&&(h.controlBar.resolutionSwitcher.dispose(),delete h.controlBar.resolutionSwitcher),e=e.sort(i),m=s(e);var r=d(m,e),a=new u(h,{sources:m,initialySelectedLabel:r.label,initialySelectedRes:r.res,customSourcePicker:p.customSourcePicker},p,g);return t.addClass(a.el(),"vjs-resolution-button"),h.controlBar.resolutionSwitcher=h.controlBar.el_.insertBefore(a.el_,h.controlBar.getChild("fullscreenToggle").el_),h.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)},n(h,r.sources,r.label)},h.currentResolution=function(e,t){return null==e?a:(null!=o[e]&&o[e].onClick(t),h)},h.getGroupedSrc=function(){return m},h.ready(function(){h.options_.sources.length>1&&h.updateSrc(h.options_.sources),"Youtube"===h.techName_&&f(h)})},t.plugin("videoJsResolutionSwitcher",i)}(window,e)}(),function(e,t){"function"==typeof define&&define.amd?define(["video.js"],function(n){return e.Youtube=t(n)}):"object"==typeof module&&module.exports?module.exports=e.Youtube=t(require("video.js")):e.Youtube=t(e.videojs)}(this,function(e){"use strict";function t(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function n(){var e=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}var i=e.getComponent("Tech"),r=e.extend(i,{constructor:function(e,t){i.call(this,e,t),this.setPoster(e.poster),this.setSrc(this.options_.source,!0),setTimeout(function(){this.el_.parentNode.className+=" vjs-youtube",a&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),r.isApiReady?this.initYTPlayer():r.apiReadyQueue.push(this)}.bind(this))},dispose:function(){this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile","")},createEl:function(){var e=document.createElement("div");e.setAttribute("id",this.options_.techId),e.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute");var t=document.createElement("div");if(t.appendChild(e),!a&&!this.options_.ytControls){var n=document.createElement("div");n.setAttribute("class","vjs-iframe-blocker"),n.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),n.onclick=function(){this.pause()}.bind(this),t.appendChild(n)}return t},initYTPlayer:function(){var e={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0};"undefined"!=typeof this.options_.autohide&&(e.autohide=this.options_.autohide),"undefined"!=typeof this.options_.cc_load_policy&&(e.cc_load_policy=this.options_.cc_load_policy),"undefined"!=typeof this.options_.ytControls&&(e.controls=this.options_.ytControls),"undefined"!=typeof this.options_.disablekb&&(e.disablekb=this.options_.disablekb),"undefined"!=typeof this.options_.end&&(e.end=this.options_.end),"undefined"!=typeof this.options_.color&&(e.color=this.options_.color),e.controls?"undefined"!=typeof this.options_.fs&&(e.fs=this.options_.fs):e.fs=0,"undefined"!=typeof this.options_.end&&(e.end=this.options_.end),"undefined"!=typeof this.options_.hl?e.hl=this.options_.hl:"undefined"!=typeof this.options_.language&&(e.hl=this.options_.language.substr(0,2)),"undefined"!=typeof this.options_.iv_load_policy&&(e.iv_load_policy=this.options_.iv_load_policy),"undefined"!=typeof this.options_.list?e.list=this.options_.list:this.url&&"undefined"!=typeof this.url.listId&&(e.list=this.url.listId),"undefined"!=typeof this.options_.listType&&(e.listType=this.options_.listType),"undefined"!=typeof this.options_.modestbranding&&(e.modestbranding=this.options_.modestbranding),"undefined"!=typeof this.options_.playlist&&(e.playlist=this.options_.playlist),"undefined"!=typeof this.options_.playsinline&&(e.playsinline=this.options_.playsinline),"undefined"!=typeof this.options_.rel&&(e.rel=this.options_.rel),"undefined"!=typeof this.options_.showinfo&&(e.showinfo=this.options_.showinfo),"undefined"!=typeof this.options_.start&&(e.start=this.options_.start),"undefined"!=typeof this.options_.theme&&(e.theme=this.options_.theme),this.activeVideoId=this.url?this.url.videoId:null,this.activeList=e.list,this.ytPlayer=new YT.Player(this.options_.techId,{videoId:this.activeVideoId,playerVars:e,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onError:this.onPlayerError.bind(this)}})},onPlayerReady:function(){this.playerReady_=!0,this.triggerReady(),this.playOnReady&&this.play()},onPlayerPlaybackQualityChange:function(){},onPlayerStateChange:function(e){var t=e.data;if(t!==this.lastState&&!this.errorNumber){switch(t){case-1:this.trigger("loadedmetadata"),this.trigger("durationchange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate"),this.trigger("durationchange"),this.trigger("playing"),this.trigger("play"),this.isSeeking&&this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay"),this.isSeeking?this.onSeeked():this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting")}this.lastState=t}},onPlayerError:function(e){this.errorNumber=e.data,this.trigger("error"),this.ytPlayer.stopVideo(),this.ytPlayer.destroy(),this.ytPlayer=null},error:function(){switch(this.errorNumber){case 5:return{code:"Error while trying to play the video"};case 2:case 100:case 150:return{code:"Unable to find the video"};case 101:return{code:"Playback on other Websites has been disabled by the video owner."}}return{code:"YouTube unknown error ("+this.errorNumber+")"}},src:function(e){return e&&(this.setSrc({src:e}),this.options_.autoplay&&!a&&this.play()),this.source},poster:function(){return a?null:this.poster_},setPoster:function(e){this.poster_=e},setSrc:function(e){e&&e.src&&(delete this.errorNumber,this.source=e,this.url=r.parseUrl(e.src),this.options_.poster||this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.checkHighResPoster()),this.options_.autoplay&&!a&&(this.isReady_?this.play():this.playOnReady=!0))},play:function(){this.url&&this.url.videoId&&(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.ytPlayer.loadVideoById(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))},pause:function(){this.ytPlayer&&this.ytPlayer.pauseVideo()},paused:function(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0},setCurrentTime:function(e){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime()),this.isSeeking||(this.wasPausedBeforeSeek=this.paused()),this.ytPlayer.seekTo(e,!0),this.trigger("timeupdate"),this.trigger("seeking"),this.isSeeking=!0,this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==e&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval),this.isSeeking=!1,this.wasPausedBeforeSeek&&this.pause(),this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(e){this.ytPlayer&&(this.ytPlayer.setPlaybackRate(e),this.trigger("ratechange"))},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source},ended:function(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:!1},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(e){this.ytPlayer&&(this.ytPlayer.setVolume(100*e),this.setTimeout(function(){this.trigger("volumechange")},50))},muted:function(){return this.ytPlayer?this.ytPlayer.isMuted():!1},setMuted:function(e){this.ytPlayer&&(this.muted(!0),e?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},50))},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}};var e=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return{length:this.ytPlayer.getDuration(),start:function(){return 0},end:function(){return e}}},load:function(){},reset:function(){},supportsFullScreen:function(){return!0},checkHighResPoster:function(){var e="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var t=new Image;t.onload=function(){if("naturalHeight"in t){if(t.naturalHeight<=90||t.naturalWidth<=120)return}else if(t.height<=90||t.width<=120)return;this.poster_=e,this.trigger("posterchange")}.bind(this),t.onerror=function(){},t.src=e}catch(n){}}});r.isSupported=function(){return!0},r.canPlaySource=function(e){return"video/youtube"===e.type};var a=/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent);r.parseUrl=function(e){var t={videoId:null},n=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,i=e.match(n);i&&11===i[2].length&&(t.videoId=i[2]);var r=/[?&]list=([^#\&\?]+)/;return i=e.match(r),i&&i[1]&&(t.listId=i[1]),t},r.apiReadyQueue=[],window.onYouTubeIframeAPIReady=function(){r.isApiReady=!0;for(var e=0;e<r.apiReadyQueue.length;++e)r.apiReadyQueue[e].initYTPlayer()},t(),n(),"undefined"!=typeof e.registerTech?e.registerTech("Youtube",r):e.registerComponent("Youtube",r)}),function(e,t,n){"use strict";function i(e,t){return t=t||Error,function(){var n,i,r=arguments[0],a="["+(e?e+":":"")+r+"] ",o=arguments[1],s=arguments;for(n=a+o.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t+2<s.length?fe(s[t+2]):e}),n=n+"\nhttp://errors.angularjs.org/1.3.14/"+(e?e+"/":"")+r,i=2;i<arguments.length;i++)n=n+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(fe(arguments[i]));return new t(n)}}function r(e){if(null==e||k(e))return!1;var t=e.length;return e.nodeType===vi&&t?!0:b(e)||ui(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function a(e,t,n){var i,o;if(e)if(S(e))for(i in e)"prototype"==i||"length"==i||"name"==i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(n,e[i],i,e);else if(ui(e)||r(e)){var s="object"!=typeof e;for(i=0,o=e.length;o>i;i++)(s||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==a)e.forEach(t,n,e);else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);return e}function o(e){return Object.keys(e).sort()}function s(e,t,n){for(var i=o(e),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function l(e){return function(t,n){e(n,t)}}function c(){return++li}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function d(e){for(var t=e.$$hashKey,n=1,i=arguments.length;i>n;n++){var r=arguments[n];if(r)for(var a=Object.keys(r),o=0,s=a.length;s>o;o++){var l=a[o];e[l]=r[l]}}return u(e,t),e}function f(e){return parseInt(e,10)}function p(e,t){return d(Object.create(e),t)}function h(){}function g(e){return e}function m(e){return function(){return e}}function v(e){return"undefined"==typeof e}function y(e){return"undefined"!=typeof e}function $(e){return null!==e&&"object"==typeof e}function b(e){return"string"==typeof e}function w(e){return"number"==typeof e}function x(e){return"[object Date]"===ai.call(e)}function S(e){return"function"==typeof e}function C(e){return"[object RegExp]"===ai.call(e)}function k(e){return e&&e.window===e}function E(e){return e&&e.$evalAsync&&e.$watch}function A(e){return"[object File]"===ai.call(e)}function T(e){return"[object FormData]"===ai.call(e)}function D(e){return"[object Blob]"===ai.call(e)}function _(e){return"boolean"==typeof e}function I(e){return e&&S(e.then)}function P(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function M(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function R(e){return Gn(e.nodeName||e[0]&&e[0].nodeName)}function F(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),t}function N(e,t,n,i){if(k(e)||E(e))throw oi("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw oi("cpi","Can't copy! Source and destination are identical.");if(n=n||[],i=i||[],$(e)){var r=n.indexOf(e);if(-1!==r)return i[r];n.push(e),i.push(t)}var o;if(ui(e)){t.length=0;for(var s=0;s<e.length;s++)o=N(e[s],null,n,i),$(e[s])&&(n.push(e[s]),i.push(o)),t.push(o)}else{var l=t.$$hashKey;
ui(t)?t.length=0:a(t,function(e,n){delete t[n]});for(var c in e)e.hasOwnProperty(c)&&(o=N(e[c],null,n,i),$(e[c])&&(n.push(e[c]),i.push(o)),t[c]=o);u(t,l)}}else if(t=e,e)if(ui(e))t=N(e,[],n,i);else if(x(e))t=new Date(e.getTime());else if(C(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else if($(e)){var d=Object.create(Object.getPrototypeOf(e));t=N(e,d,n,i)}return t}function L(e,t){if(ui(e)){t=t||[];for(var n=0,i=e.length;i>n;n++)t[n]=e[n]}else if($(e)){t=t||{};for(var r in e)("$"!==r.charAt(0)||"$"!==r.charAt(1))&&(t[r]=e[r])}return t||e}function O(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var i,r,a,o=typeof e,s=typeof t;if(o==s&&"object"==o){if(!ui(e)){if(x(e))return x(t)?O(e.getTime(),t.getTime()):!1;if(C(e)&&C(t))return e.toString()==t.toString();if(E(e)||E(t)||k(e)||k(t)||ui(t))return!1;a={};for(r in e)if("$"!==r.charAt(0)&&!S(e[r])){if(!O(e[r],t[r]))return!1;a[r]=!0}for(r in t)if(!a.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t[r]!==n&&!S(t[r]))return!1;return!0}if(!ui(t))return!1;if((i=e.length)==t.length){for(r=0;i>r;r++)if(!O(e[r],t[r]))return!1;return!0}}return!1}function B(e,t,n){return e.concat(ni.call(t,n))}function U(e,t){return ni.call(e,t||0)}function H(e,t){var n=arguments.length>2?U(arguments,2):[];return!S(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,B(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function j(e,i){var r=i;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=n:k(i)?r="$WINDOW":i&&t===i?r="$DOCUMENT":E(i)&&(r="$SCOPE"),r}function z(e,t){return"undefined"==typeof e?n:(w(t)||(t=t?2:null),JSON.stringify(e,j,t))}function q(e){return b(e)?JSON.parse(e):e}function V(e){e=Zn(e).clone();try{e.empty()}catch(t){}var n=Zn("<div>").append(e).html();try{return e[0].nodeType===yi?Gn(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Gn(t)})}catch(t){return Gn(n)}}function W(e){try{return decodeURIComponent(e)}catch(t){}}function G(e){var t,n,i={};return a((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=W(t[0]),y(n))){var r=y(t[1])?W(t[1]):!0;Kn.call(i,n)?ui(i[n])?i[n].push(r):i[n]=[i[n],r]:i[n]=r}}),i}function K(e){var t=[];return a(e,function(e,n){ui(e)?a(e,function(e){t.push(Y(n,!0)+(e===!0?"":"="+Y(e,!0)))}):t.push(Y(n,!0)+(e===!0?"":"="+Y(e,!0)))}),t.length?t.join("&"):""}function X(e){return Y(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function Q(e,t){var n,i,r=hi.length;for(e=Zn(e),i=0;r>i;++i)if(n=hi[i]+t,b(n=e.attr(n)))return n;return null}function J(e,t){var n,i,r={};a(hi,function(t){var r=t+"app";!n&&e.hasAttribute&&e.hasAttribute(r)&&(n=e,i=e.getAttribute(r))}),a(hi,function(t){var r,a=t+"app";!n&&(r=e.querySelector("["+a.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(a))}),n&&(r.strictDi=null!==Q(n,"strict-di"),t(n,i?[i]:[],r))}function Z(n,i,r){$(r)||(r={});var o={strictDi:!1};r=d(o,r);var s=function(){if(n=Zn(n),n.injector()){var e=n[0]===t?"document":V(n);throw oi("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}i=i||[],i.unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.debugInfoEnabled&&i.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),i.unshift("ng");var a=qe(i,r.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),a},l=/^NG_ENABLE_DEBUG_INFO!/,c=/^NG_DEFER_BOOTSTRAP!/;return e&&l.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(l,"")),e&&!c.test(e.name)?s():(e.name=e.name.replace(c,""),si.resumeBootstrap=function(e){return a(e,function(e){i.push(e)}),s()},void(S(si.resumeDeferredBootstrap)&&si.resumeDeferredBootstrap()))}function ee(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function te(e){var t=si.element(e).injector();if(!t)throw oi("test","no injector found for element argument to getTestability");return t.get("$$testability")}function ne(e,t){return t=t||"_",e.replace(gi,function(e,n){return(n?t:"")+e.toLowerCase()})}function ie(){var t;mi||(ei=e.jQuery,ei&&ei.fn.on?(Zn=ei,d(ei.fn,{scope:Ni.scope,isolateScope:Ni.isolateScope,controller:Ni.controller,injector:Ni.injector,inheritedData:Ni.inheritedData}),t=ei.cleanData,ei.cleanData=function(e){var n;if(ci)ci=!1;else for(var i,r=0;null!=(i=e[r]);r++)n=ei._data(i,"events"),n&&n.$destroy&&ei(i).triggerHandler("$destroy");t(e)}):Zn=be,si.element=Zn,mi=!0)}function re(e,t,n){if(!e)throw oi("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function ae(e,t,n){return n&&ui(e)&&(e=e[e.length-1]),re(S(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function oe(e,t){if("hasOwnProperty"===e)throw oi("badname","hasOwnProperty is not a valid {0} name",t)}function se(e,t,n){if(!t)return e;for(var i,r=t.split("."),a=e,o=r.length,s=0;o>s;s++)i=r[s],e&&(e=(a=e)[i]);return!n&&S(e)?H(a,e):e}function le(e){var t=e[0],n=e[e.length-1],i=[t];do{if(t=t.nextSibling,!t)break;i.push(t)}while(t!==n);return Zn(i)}function ce(){return Object.create(null)}function ue(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=i("$injector"),r=i("ng"),a=t(e,"angular",Object);return a.$$minErr=a.$$minErr||i,t(a,"module",function(){var e={};return function(i,a,o){var s=function(e,t){if("hasOwnProperty"===e)throw r("badname","hasOwnProperty is not a valid {0} name",t)};return s(i,"module"),a&&e.hasOwnProperty(i)&&(e[i]=null),t(e,i,function(){function e(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),c}}if(!a)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],s=[],l=e("$injector","invoke","push",r),c={_invokeQueue:t,_configBlocks:r,_runBlocks:s,requires:a,name:i,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:l,run:function(e){return s.push(e),this}};return o&&l(o),c})}})}function de(e){var t=[];return JSON.stringify(e,function(e,n){if(n=j(e,n),$(n)){if(t.indexOf(n)>=0)return"<<already seen>>";t.push(n)}return n})}function fe(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?de(e):e}function pe(t){d(t,{bootstrap:Z,copy:N,extend:d,equals:O,element:Zn,forEach:a,injector:qe,noop:h,bind:H,toJson:z,fromJson:q,identity:g,isUndefined:v,isDefined:y,isString:b,isFunction:S,isObject:$,isNumber:w,isElement:P,isArray:ui,version:xi,isDate:x,lowercase:Gn,uppercase:Xn,callbacks:{counter:0},getTestability:te,$$minErr:i,$$csp:pi,reloadWithDebugInfo:ee}),ti=ue(e);try{ti("ngLocale")}catch(n){ti("ngLocale",[]).provider("$locale",mt)}ti("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Kt}),e.provider("$compile",Qe).directive({a:Tr,input:Vr,textarea:Vr,form:Mr,script:Ra,select:La,style:Ba,option:Oa,ngBind:Kr,ngBindHtml:Yr,ngBindTemplate:Xr,ngClass:Jr,ngClassEven:ea,ngClassOdd:Zr,ngCloak:ta,ngController:na,ngForm:Rr,ngHide:Ta,ngIf:aa,ngInclude:oa,ngInit:la,ngNonBindable:xa,ngPluralize:Sa,ngRepeat:Ca,ngShow:Aa,ngStyle:Da,ngSwitch:_a,ngSwitchWhen:Ia,ngSwitchDefault:Pa,ngOptions:Na,ngTransclude:Ma,ngModel:$a,ngList:ca,ngChange:Qr,pattern:Ha,ngPattern:Ha,required:Ua,ngRequired:Ua,minlength:za,ngMinlength:za,maxlength:ja,ngMaxlength:ja,ngValue:Gr,ngModelOptions:wa}).directive({ngInclude:sa}).directive(Dr).directive(ia),e.provider({$anchorScroll:Ve,$animate:Wi,$browser:Ke,$cacheFactory:Xe,$controller:tt,$document:nt,$exceptionHandler:it,$filter:sn,$interpolate:ht,$interval:gt,$http:ut,$httpBackend:ft,$location:_t,$log:It,$parse:jt,$rootScope:Gt,$q:zt,$$q:qt,$sce:Jt,$sceDelegate:Qt,$sniffer:Zt,$templateCache:Ye,$templateRequest:en,$$testability:tn,$timeout:nn,$window:on,$$rAF:Wt,$$asyncCallback:We,$$jqLite:Be})}])}function he(){return++Ci}function ge(e){return e.replace(Ai,function(e,t,n,i){return i?n.toUpperCase():n}).replace(Ti,"Moz$1")}function me(e){return!Pi.test(e)}function ve(e){var t=e.nodeType;return t===vi||!t||t===bi}function ye(e,t){var n,i,r,o,s=t.createDocumentFragment(),l=[];if(me(e))l.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),i=(Mi.exec(e)||["",""])[1].toLowerCase(),r=Fi[i]||Fi._default,n.innerHTML=r[1]+e.replace(Ri,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;l=B(l,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",a(l,function(e){s.appendChild(e)}),s}function $e(e,n){n=n||t;var i;return(i=Ii.exec(e))?[n.createElement(i[1])]:(i=ye(e,n))?i.childNodes:[]}function be(e){if(e instanceof be)return e;var t;if(b(e)&&(e=di(e),t=!0),!(this instanceof be)){if(t&&"<"!=e.charAt(0))throw _i("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new be(e)}t?_e(this,$e(e)):_e(this,e)}function we(e){return e.cloneNode(!0)}function xe(e,t){if(t||Ce(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),i=0,r=n.length;r>i;i++)Ce(n[i])}function Se(e,t,n,i){if(y(i))throw _i("offargs","jqLite#off() does not support the `selector` argument");var r=ke(e),o=r&&r.events,s=r&&r.handle;if(s)if(t)a(t.split(" "),function(t){if(y(n)){var i=o[t];if(F(i||[],n),i&&i.length>0)return}Ei(e,t,s),delete o[t]});else for(t in o)"$destroy"!==t&&Ei(e,t,s),delete o[t]}function Ce(e,t){var i=e.ng339,r=i&&Si[i];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Se(e)),delete Si[i],e.ng339=n}}function ke(e,t){var i=e.ng339,r=i&&Si[i];return t&&!r&&(e.ng339=i=he(),r=Si[i]={events:{},data:{},handle:n}),r}function Ee(e,t,n){if(ve(e)){var i=y(n),r=!i&&t&&!$(t),a=!t,o=ke(e,!r),s=o&&o.data;if(i)s[t]=n;else{if(a)return s;if(r)return s&&s[t];d(s,t)}}}function Ae(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Te(e,t){t&&e.setAttribute&&a(t.split(" "),function(t){e.setAttribute("class",di((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+di(t)+" "," ")))})}function De(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");a(t.split(" "),function(e){e=di(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",di(n))}}function _e(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;n>i;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function Ie(e,t){return Pe(e,"$"+(t||"ngController")+"Controller")}function Pe(e,t,i){e.nodeType==bi&&(e=e.documentElement);for(var r=ui(t)?t:[t];e;){for(var a=0,o=r.length;o>a;a++)if((i=Zn.data(e,r[a]))!==n)return i;e=e.parentNode||e.nodeType===wi&&e.host}}function Me(e){for(xe(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Re(e,t){t||xe(e);var n=e.parentNode;n&&n.removeChild(e)}function Fe(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Zn(n).on("load",t)}function Ne(e,t){var n=Li[t.toLowerCase()];return n&&Oi[R(e)]&&n}function Le(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&Bi[t]}function Oe(e,t){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=t[i||n.type],a=r?r.length:0;if(a){if(v(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},a>1&&(r=L(r));for(var s=0;a>s;s++)n.isImmediatePropagationStopped()||r[s].call(e,n)}};return n.elem=e,n}function Be(){this.$get=function(){return d(be,{hasClass:function(e,t){return e.attr&&(e=e[0]),Ae(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),De(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Te(e,t)}})}}function Ue(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var i=typeof e;return n="function"==i||"object"==i&&null!==e?e.$$hashKey=i+":"+(t||c)():i+":"+e}function He(e,t){if(t){var n=0;this.nextUid=function(){return++n}}a(e,this.put,this)}function je(e){var t=e.toString().replace(zi,""),n=t.match(Ui);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function ze(e,t,n){var i,r,o,s;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw b(n)&&n||(n=e.name||je(e)),qi("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);r=e.toString().replace(zi,""),o=r.match(Ui),a(o[1].split(Hi),function(e){e.replace(ji,function(e,t,n){i.push(n)})})}e.$inject=i}}else ui(e)?(s=e.length-1,ae(e[s],"fn"),i=e.slice(0,s)):ae(e,"fn",!0);return i}function qe(e,t){function i(e){return function(t,n){return $(t)?void a(t,l(e)):e(t,n)}}function r(e,t){if(oe(e,"service"),(S(t)||ui(t))&&(t=E.instantiate(t)),!t.$get)throw qi("pget","Provider '{0}' must define $get factory method.",e);return k[e+w]=t}function o(e,t){return function(){var n=T.invoke(t,this);if(v(n))throw qi("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return r(e,{$get:n!==!1?o(e,t):t})}function c(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function u(e,t){return s(e,m(t),!1)}function d(e,t){oe(e,"constant"),k[e]=t,A[e]=t}function f(e,t){var n=E.get(e+w),i=n.$get;n.$get=function(){var e=T.invoke(i,n);return T.invoke(t,null,{$delegate:e})}}function p(e){var t,n=[];return a(e,function(e){function i(e){var t,n;for(t=0,n=e.length;n>t;t++){var i=e[t],r=E.get(i[0]);r[i[1]].apply(r,i[2])}}if(!C.get(e)){C.put(e,!0);try{b(e)?(t=ti(e),n=n.concat(p(t.requires)).concat(t._runBlocks),i(t._invokeQueue),i(t._configBlocks)):S(e)?n.push(E.invoke(e)):ui(e)?n.push(E.invoke(e)):ae(e,"module")}catch(r){throw ui(e)&&(e=e[e.length-1]),r.message&&r.stack&&-1==r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),qi("modulerr","Failed to instantiate module {0} due to:\n{1}",e,r.stack||r.message||r)}}}),n}function g(e,n){function i(t,i){if(e.hasOwnProperty(t)){if(e[t]===y)throw qi("cdep","Circular dependency found: {0}",t+" <- "+x.join(" <- "));return e[t]}try{return x.unshift(t),e[t]=y,e[t]=n(t,i)}catch(r){throw e[t]===y&&delete e[t],r}finally{x.shift()}}function r(e,n,r,a){"string"==typeof r&&(a=r,r=null);var o,s,l,c=[],u=qe.$$annotate(e,t,a);for(s=0,o=u.length;o>s;s++){if(l=u[s],"string"!=typeof l)throw qi("itkn","Incorrect injection token! Expected service name as string, got {0}",l);c.push(r&&r.hasOwnProperty(l)?r[l]:i(l,a))}return ui(e)&&(e=e[o]),e.apply(n,c)}function a(e,t,n){var i=Object.create((ui(e)?e[e.length-1]:e).prototype||null),a=r(e,i,t,n);return $(a)||S(a)?a:i}return{invoke:r,instantiate:a,get:i,annotate:qe.$$annotate,has:function(t){return k.hasOwnProperty(t+w)||e.hasOwnProperty(t)}}}t=t===!0;var y={},w="Provider",x=[],C=new He([],!0),k={$provide:{provider:i(r),factory:i(s),service:i(c),value:i(u),constant:i(d),decorator:f}},E=k.$injector=g(k,function(e,t){throw si.isString(t)&&x.push(t),qi("unpr","Unknown provider: {0}",x.join(" <- "))}),A={},T=A.$injector=g(A,function(e,t){var i=E.get(e+w,t);return T.invoke(i.$get,i,n,e)});return a(p(e),function(e){T.invoke(e||h)}),T}function Ve(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,i){function r(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===R(e)?(t=e,!0):void 0}),t}function a(){var e=s.yOffset;if(S(e))e=e();else if(P(e)){var n=e[0],i=t.getComputedStyle(n);e="fixed"!==i.position?0:n.getBoundingClientRect().bottom}else w(e)||(e=0);return e}function o(e){if(e){e.scrollIntoView();var n=a();if(n){var i=e.getBoundingClientRect().top;t.scrollBy(0,i-n)}}else t.scrollTo(0,0)}function s(){var e,t=n.hash();t?(e=l.getElementById(t))?o(e):(e=r(l.getElementsByName(t)))?o(e):"top"===t&&o(null):o(null)}var l=t.document;return e&&i.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&Fe(function(){i.$evalAsync(s)})}),s}]}function We(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Ge(e,t,i,r){function o(e){try{e.apply(null,U(arguments,1))}finally{if(S--,0===S)for(;C.length;)try{C.pop()()}catch(t){i.error(t)}}}function s(e){var t=e.indexOf("#");return-1===t?"":e.substr(t+1)}function l(e,t){!function n(){a(E,function(e){e()}),k=t(n,e)}()}function c(){u(),d()}function u(){A=e.history.state,A=v(A)?null:A,O(A,R)&&(A=R),R=A}function d(){(D!==p.url()||T!==A)&&(D=p.url(),T=A,a(P,function(e){e(p.url(),A)}))}function f(e){try{return decodeURIComponent(e)}catch(t){return e}}var p=this,g=t[0],m=e.location,y=e.history,$=e.setTimeout,w=e.clearTimeout,x={};p.isMock=!1;var S=0,C=[];p.$$completeOutstandingRequest=o,p.$$incOutstandingRequestCount=function(){S++},p.notifyWhenNoOutstandingRequests=function(e){a(E,function(e){e()}),0===S?e():C.push(e)};var k,E=[];p.addPollFn=function(e){return v(k)&&l(100,$),E.push(e),e};var A,T,D=m.href,_=t.find("base"),I=null;u(),T=A,p.url=function(t,n,i){if(v(i)&&(i=null),m!==e.location&&(m=e.location),y!==e.history&&(y=e.history),t){var a=T===i;if(D===t&&(!r.history||a))return p;var o=D&&wt(D)===wt(t);return D=t,T=i,!r.history||o&&a?(o||(I=t),n?m.replace(t):o?m.hash=s(t):m.href=t):(y[n?"replaceState":"pushState"](i,"",t),u(),T=A),p}return I||m.href.replace(/%27/g,"'")},p.state=function(){return A};var P=[],M=!1,R=null;p.onUrlChange=function(t){return M||(r.history&&Zn(e).on("popstate",c),Zn(e).on("hashchange",c),M=!0),P.push(t),t},p.$$checkUrlChange=d,p.baseHref=function(){var e=_.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var F={},N="",L=p.baseHref();p.cookies=function(e,t){var r,a,o,s,l;if(!e){if(g.cookie!==N)for(N=g.cookie,a=N.split("; "),F={},s=0;s<a.length;s++)o=a[s],l=o.indexOf("="),l>0&&(e=f(o.substring(0,l)),F[e]===n&&(F[e]=f(o.substring(l+1))));return F}t===n?g.cookie=encodeURIComponent(e)+"=;path="+L+";expires=Thu, 01 Jan 1970 00:00:00 GMT":b(t)&&(r=(g.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+L).length+1,r>4096&&i.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+r+" > 4096 bytes)!"))},p.defer=function(e,t){var n;return S++,n=$(function(){delete x[n],o(e)},t||0),x[n]=!0,n},p.defer.cancel=function(e){return x[e]?(delete x[e],w(e),o(h),!0):!1}}function Ke(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new Ge(e,i,t,n)}]}function Xe(){this.$get=function(){function e(e,n){function r(e){e!=f&&(p?p==e&&(p=e.n):p=e,a(e.n,e.p),a(e,f),f=e,f.n=null)}function a(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var o=0,s=d({},n,{id:e}),l={},c=n&&n.capacity||Number.MAX_VALUE,u={},f=null,p=null;return t[e]={put:function(e,t){if(c<Number.MAX_VALUE){var n=u[e]||(u[e]={key:e});r(n)}if(!v(t))return e in l||o++,l[e]=t,o>c&&this.remove(p.key),t},get:function(e){if(c<Number.MAX_VALUE){var t=u[e];if(!t)return;r(t)}return l[e]},remove:function(e){if(c<Number.MAX_VALUE){var t=u[e];if(!t)return;t==f&&(f=t.p),t==p&&(p=t.n),a(t.n,t.p),delete u[e]}delete l[e],o--},removeAll:function(){l={},o=0,u={},f=p=null},destroy:function(){l=null,s=null,u=null,delete t[e]},info:function(){return d({},s,{size:o})}}}var t={};return e.info=function(){var e={};return a(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function Ye(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Qe(e,i){function r(e,t){var n=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return a(e,function(e,r){var a=e.match(n);if(!a)throw Gi("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,r,e);i[r]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||r}}),i}var o={},s="Directive",c=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,u=/(([\w\-]+)(?:\:([^;]+))?;?)/,f=M("ngSrc,ngSrcset,src,srcset"),v=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,w=/^(on[a-z]+|formaction)$/;this.directive=function C(t,n){return oe(t,"directive"),b(t)?(re(n,"directiveFactory"),o.hasOwnProperty(t)||(o[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var i=[];return a(o[t],function(a,o){try{var s=e.invoke(a);S(s)?s={compile:m(s)}:!s.compile&&s.link&&(s.compile=m(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",$(s.scope)&&(s.$$isolateBindings=r(s.scope,s.name)),i.push(s)}catch(l){n(l)}}),i}])),o[t].push(n)):a(t,l(C)),this},this.aHrefSanitizationWhitelist=function(e){return y(e)?(i.aHrefSanitizationWhitelist(e),this):i.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(i.imgSrcSanitizationWhitelist(e),this):i.imgSrcSanitizationWhitelist()};var x=!0;this.debugInfoEnabled=function(e){return y(e)?(x=e,this):x},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,i,r,l,m,y,C,k,A,T,D){function _(e,t){try{e.addClass(t)}catch(n){}}function I(e,t,n,i,r){e instanceof Zn||(e=Zn(e)),a(e,function(t,n){t.nodeType==yi&&t.nodeValue.match(/\S+/)&&(e[n]=Zn(t).wrap("<span></span>").parent()[0])});var o=M(e,t,e,n,i,r);I.$$addScopeClass(e);var s=null;return function(t,n,i){re(t,"scope"),i=i||{};var r=i.parentBoundTranscludeFn,a=i.transcludeControllers,l=i.futureParentElement;r&&r.$$boundTransclude&&(r=r.$$boundTransclude),s||(s=P(l));var c;if(c="html"!==s?Zn(J(s,Zn("<div>").append(e).html())):n?Ni.clone.call(e):e,a)for(var u in a)c.data("$"+u+"Controller",a[u].instance);return I.$$addScopeInfo(c,t),n&&n(c,t),o&&o(t,c,c,r),c}}function P(e){var t=e&&e[0];return t&&"foreignobject"!==R(t)&&t.toString().match(/SVG/)?"svg":"html"}function M(e,t,i,r,a,o){function s(e,i,r,a){var o,s,l,c,u,d,f,p,m;if(h){var v=i.length;for(m=new Array(v),u=0;u<g.length;u+=3)f=g[u],m[f]=i[f]}else m=i;for(u=0,d=g.length;d>u;)l=m[g[u++]],o=g[u++],s=g[u++],o?(o.scope?(c=e.$new(),I.$$addScopeInfo(Zn(l),c)):c=e,p=o.transcludeOnThisElement?N(e,o.transclude,a,o.elementTranscludeOnThisElement):!o.templateOnThisElement&&a?a:!a&&t?N(e,t):null,o(s,c,l,r,p)):s&&s(e,l.childNodes,n,a)}for(var l,c,u,d,f,p,h,g=[],m=0;m<e.length;m++)l=new oe,c=L(e[m],[],l,0===m?r:n,a),u=c.length?j(c,e[m],l,t,i,null,[],[],o):null,u&&u.scope&&I.$$addScopeClass(l.$$element),f=u&&u.terminal||!(d=e[m].childNodes)||!d.length?null:M(d,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||f)&&(g.push(m,u,f),p=!0,h=h||u),o=null;return p?s:null}function N(e,t,n,i){var r=function(i,r,a,o,s){return i||(i=e.$new(!1,s),i.$$transcluded=!0),t(i,r,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})};return r}function L(e,t,n,i,r){var a,o,s=e.nodeType,l=n.$attr;switch(s){case vi:q(t,Je(R(e)),"E",i,r);for(var d,f,p,h,g,m,v=e.attributes,y=0,w=v&&v.length;w>y;y++){var x=!1,S=!1;d=v[y],f=d.name,g=di(d.value),h=Je(f),(m=de.test(h))&&(f=f.replace(Ki,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var C=h.replace(/(Start|End)$/,"");W(C)&&h===C+"Start"&&(x=f,S=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),p=Je(f.toLowerCase()),l[p]=f,(m||!n.hasOwnProperty(p))&&(n[p]=g,Ne(e,p)&&(n[p]=!0)),ee(e,t,g,p,m),q(t,p,"A",i,r,x,S)}if(o=e.className,$(o)&&(o=o.animVal),b(o)&&""!==o)for(;a=u.exec(o);)p=Je(a[2]),q(t,p,"C",i,r)&&(n[p]=di(a[3])),o=o.substr(a.index+a[0].length);break;case yi:Q(t,e.nodeValue);break;case $i:try{a=c.exec(e.nodeValue),a&&(p=Je(a[1]),q(t,p,"M",i,r)&&(n[p]=di(a[2])))}catch(k){}}return t.sort(X),t}function B(e,t,n){var i=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Gi("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==vi&&(e.hasAttribute(t)&&r++,e.hasAttribute(n)&&r--),i.push(e),e=e.nextSibling}while(r>0)}else i.push(e);return Zn(i)}function H(e,t,n){return function(i,r,a,o,s){return r=B(r[0],t,n),e(i,r,a,o,s)}}function j(e,o,s,l,c,u,d,f,p){function h(e,t,n,i){e&&(n&&(e=H(e,n,i)),e.require=k.require,e.directiveName=A,(R===k||k.$$isolateScope)&&(e=ie(e,{isolateScope:!0})),d.push(e)),t&&(n&&(t=H(t,n,i)),t.require=k.require,t.directiveName=A,(R===k||k.$$isolateScope)&&(t=ie(t,{isolateScope:!0})),f.push(t))}function g(e,t,n,i){var r,o,s="data",l=!1,c=n;if(b(t)){if(o=t.match(v),t=t.substring(o[0].length),o[3]&&(o[1]?o[3]=null:o[1]=o[3]),"^"===o[1]?s="inheritedData":"^^"===o[1]&&(s="inheritedData",c=n.parent()),"?"===o[2]&&(l=!0),r=null,i&&"data"===s&&(r=i[t])&&(r=r.instance),r=r||c[s]("$"+t+"Controller"),!r&&!l)throw Gi("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return r||null}return ui(t)&&(r=[],a(t,function(t){r.push(g(e,t,n,i))})),r}function w(e,t,r,l,c){function u(e,t,i){var r;return E(e)||(i=t,t=e,e=n),W&&(r=w),i||(i=W?S.parent():S),c(e,t,r,i,D)}var p,h,v,$,b,w,x,S,k;if(o===r?(k=s,S=s.$$element):(S=Zn(r),k=new oe(S,s)),R&&(b=t.$new(!0)),c&&(x=u,x.$$boundTransclude=c),M&&(C={},w={},a(M,function(e){var n,i={$scope:e===R||e.$$isolateScope?b:t,$element:S,$attrs:k,$transclude:x};$=e.controller,"@"==$&&($=k[e.name]),n=y($,i,!0,e.controllerAs),w[e.name]=n,W||S.data("$"+e.name+"Controller",n.instance),C[e.name]=n})),R){I.$$addScopeInfo(S,b,!0,!(F&&(F===R||F===R.$$originalDirective))),I.$$addScopeClass(S,!0);var A=C&&C[R.name],T=b;A&&A.identifier&&R.bindToController===!0&&(T=A.instance),a(b.$$isolateBindings=R.$$isolateBindings,function(e,n){var r,a,o,s,l=e.attrName,c=e.optional,u=e.mode;switch(u){case"@":k.$observe(l,function(e){T[n]=e}),k.$$observers[l].$$scope=t,k[l]&&(T[n]=i(k[l])(t));break;case"=":if(c&&!k[l])return;a=m(k[l]),s=a.literal?O:function(e,t){return e===t||e!==e&&t!==t},o=a.assign||function(){throw r=T[n]=a(t),Gi("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",k[l],R.name)},r=T[n]=a(t);var d=function(e){return s(e,T[n])||(s(e,r)?o(t,e=T[n]):T[n]=e),r=e};d.$stateful=!0;var f;f=e.collection?t.$watchCollection(k[l],d):t.$watch(m(k[l],d),null,a.literal),b.$on("$destroy",f);break;case"&":a=m(k[l]),T[n]=function(e){return a(t,e)}}})}for(C&&(a(C,function(e){e()}),C=null),p=0,h=d.length;h>p;p++)v=d[p],ae(v,v.isolateScope?b:t,S,k,v.require&&g(v.directiveName,v.require,S,w),x);var D=t;for(R&&(R.template||null===R.templateUrl)&&(D=b),e&&e(D,r.childNodes,n,c),p=f.length-1;p>=0;p--)v=f[p],ae(v,v.isolateScope?b:t,S,k,v.require&&g(v.directiveName,v.require,S,w),x)}p=p||{};for(var x,C,k,A,T,D,_,P=-Number.MAX_VALUE,M=p.controllerDirectives,R=p.newIsolateScopeDirective,F=p.templateDirective,N=p.nonTlbTranscludeDirective,j=!1,q=!1,W=p.hasElementTranscludeDirective,X=s.$$element=Zn(o),Q=u,Z=l,ee=0,ne=e.length;ne>ee;ee++){k=e[ee];var re=k.$$start,se=k.$$end;if(re&&(X=B(o,re,se)),T=n,P>k.priority)break;if((_=k.scope)&&(k.templateUrl||($(_)?(Y("new/isolated scope",R||x,k,X),R=k):Y("new/isolated scope",R,k,X)),x=x||k),A=k.name,!k.templateUrl&&k.controller&&(_=k.controller,M=M||{},Y("'"+A+"' controller",M[A],k,X),M[A]=k),(_=k.transclude)&&(j=!0,k.$$tlb||(Y("transclusion",N,k,X),N=k),"element"==_?(W=!0,P=k.priority,T=X,X=s.$$element=Zn(t.createComment(" "+A+": "+s[A]+" ")),o=X[0],te(c,U(T),o),Z=I(T,l,P,Q&&Q.name,{nonTlbTranscludeDirective:N})):(T=Zn(we(o)).contents(),X.empty(),Z=I(T,l))),k.template)if(q=!0,Y("template",F,k,X),F=k,_=S(k.template)?k.template(X,s):k.template,_=ue(_),k.replace){if(Q=k,T=me(_)?[]:et(J(k.templateNamespace,di(_))),o=T[0],1!=T.length||o.nodeType!==vi)throw Gi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",A,"");te(c,X,o);var le={$attr:{}},ce=L(o,[],le),de=e.splice(ee+1,e.length-(ee+1));R&&z(ce),e=e.concat(ce).concat(de),G(s,le),ne=e.length}else X.html(_);if(k.templateUrl)q=!0,Y("template",F,k,X),F=k,k.replace&&(Q=k),w=K(e.splice(ee,e.length-ee),X,s,c,j&&Z,d,f,{controllerDirectives:M,newIsolateScopeDirective:R,templateDirective:F,nonTlbTranscludeDirective:N}),ne=e.length;else if(k.compile)try{D=k.compile(X,s,Z),S(D)?h(null,D,re,se):D&&h(D.pre,D.post,re,se)}catch(fe){r(fe,V(X))}k.terminal&&(w.terminal=!0,P=Math.max(P,k.priority))}return w.scope=x&&x.scope===!0,w.transcludeOnThisElement=j,w.elementTranscludeOnThisElement=W,w.templateOnThisElement=q,w.transclude=Z,p.hasElementTranscludeDirective=W,w}function z(e){for(var t=0,n=e.length;n>t;t++)e[t]=p(e[t],{$$isolateScope:!0})}function q(t,i,a,l,c,u,d){if(i===c)return null;var f=null;if(o.hasOwnProperty(i))for(var h,g=e.get(i+s),m=0,v=g.length;v>m;m++)try{h=g[m],(l===n||l>h.priority)&&-1!=h.restrict.indexOf(a)&&(u&&(h=p(h,{$$start:u,$$end:d})),t.push(h),f=h)}catch(y){r(y)}return f}function W(t){if(o.hasOwnProperty(t))for(var n,i=e.get(t+s),r=0,a=i.length;a>r;r++)if(n=i[r],n.multiElement)return!0;return!1}function G(e,t){var n=t.$attr,i=e.$attr,r=e.$$element;a(e,function(i,r){"$"!=r.charAt(0)&&(t[r]&&t[r]!==i&&(i+=("style"===r?";":" ")+t[r]),e.$set(r,i,!0,n[r]))}),a(t,function(t,a){"class"==a?(_(r,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==a?(r.attr("style",r.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==a.charAt(0)||e.hasOwnProperty(a)||(e[a]=t,i[a]=n[a])})}function K(e,t,n,i,r,o,s,c){var u,d,f=[],h=t[0],g=e.shift(),m=p(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),v=S(g.templateUrl)?g.templateUrl(t,n):g.templateUrl,y=g.templateNamespace;return t.empty(),l(A.getTrustedResourceUrl(v)).then(function(l){var p,b,w,x;if(l=ue(l),g.replace){if(w=me(l)?[]:et(J(y,di(l))),p=w[0],1!=w.length||p.nodeType!==vi)throw Gi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,v);b={$attr:{}},te(i,t,p);var S=L(p,[],b);$(g.scope)&&z(S),e=S.concat(e),G(n,b)}else p=h,t.html(l);for(e.unshift(m),u=j(e,p,n,r,t,g,o,s,c),a(i,function(e,n){e==p&&(i[n]=t[0])}),d=M(t[0].childNodes,r);f.length;){var C=f.shift(),k=f.shift(),E=f.shift(),A=f.shift(),T=t[0];if(!C.$$destroyed){if(k!==h){var D=k.className;c.hasElementTranscludeDirective&&g.replace||(T=we(p)),te(E,Zn(k),T),_(Zn(T),D)}x=u.transcludeOnThisElement?N(C,u.transclude,A):A,u(d,C,T,i,x)}}f=null}),function(e,t,n,i,r){var a=r;t.$$destroyed||(f?f.push(t,n,i,a):(u.transcludeOnThisElement&&(a=N(t,u.transclude,r)),u(d,t,n,i,a)))}}function X(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function Y(e,t,n,i){if(t)throw Gi("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,V(i))}function Q(e,t){var n=i(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),i=!!t.length;return i&&I.$$addBindingClass(t),function(e,t){var r=t.parent();i||I.$$addBindingClass(r),I.$$addBindingInfo(r,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function J(e,n){switch(e=Gn(e||"html")){case"svg":case"math":var i=t.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function Z(e,t){if("srcdoc"==t)return A.HTML;var n=R(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?A.RESOURCE_URL:void 0}function ee(e,t,n,r,a){var o=Z(e,r);a=f[r]||a;var s=i(n,!0,o,a);if(s){if("multiple"===r&&"select"===R(e))throw Gi("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",V(e));t.push({priority:100,compile:function(){return{pre:function(e,t,l){var c=l.$$observers||(l.$$observers={});if(w.test(r))throw Gi("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");
var u=l[r];u!==n&&(s=u&&i(u,!0,o,a),n=u),s&&(l[r]=s(e),(c[r]||(c[r]=[])).$$inter=!0,(l.$$observers&&l.$$observers[r].$$scope||e).$watch(s,function(e,t){"class"===r&&e!=t?l.$updateClass(e,t):l.$set(r,e)}))}}}})}}function te(e,n,i){var r,a,o=n[0],s=n.length,l=o.parentNode;if(e)for(r=0,a=e.length;a>r;r++)if(e[r]==o){e[r++]=i;for(var c=r,u=c+s-1,d=e.length;d>c;c++,u++)d>u?e[c]=e[u]:delete e[c];e.length-=s-1,e.context===o&&(e.context=i);break}l&&l.replaceChild(i,o);var f=t.createDocumentFragment();f.appendChild(o),Zn(i).data(Zn(o).data()),ei?(ci=!0,ei.cleanData([o])):delete Zn.cache[o[Zn.expando]];for(var p=1,h=n.length;h>p;p++){var g=n[p];Zn(g).remove(),f.appendChild(g),delete n[p]}n[0]=i,n.length=1}function ie(e,t){return d(function(){return e.apply(null,arguments)},e,t)}function ae(e,t,n,i,a,o){try{e(t,n,i,a,o)}catch(s){r(s,V(n))}}var oe=function(e,t){if(t){var n,i,r,a=Object.keys(t);for(n=0,i=a.length;i>n;n++)r=a[n],this[r]=t[r]}else this.$attr={};this.$$element=e};oe.prototype={$normalize:Je,$addClass:function(e){e&&e.length>0&&T.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&T.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Ze(e,t);n&&n.length&&T.addClass(this.$$element,n);var i=Ze(t,e);i&&i.length&&T.removeClass(this.$$element,i)},$set:function(e,t,i,o){var s,l=this.$$element[0],c=Ne(l,e),u=Le(l,e),d=e;if(c?(this.$$element.prop(e,t),o=c):u&&(this[u]=t,d=u),this[e]=t,o?this.$attr[e]=o:(o=this.$attr[e],o||(this.$attr[e]=o=ne(e,"-"))),s=R(this.$$element),"a"===s&&"href"===e||"img"===s&&"src"===e)this[e]=t=D(t,"src"===e);else if("img"===s&&"srcset"===e){for(var f="",p=di(t),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,g=/\s/.test(p)?h:/(,)/,m=p.split(g),v=Math.floor(m.length/2),y=0;v>y;y++){var $=2*y;f+=D(di(m[$]),!0),f+=" "+di(m[$+1])}var b=di(m[2*y]).split(/\s/);f+=D(di(b[0]),!0),2===b.length&&(f+=" "+di(b[1])),this[e]=t=f}i!==!1&&(null===t||t===n?this.$$element.removeAttr(o):this.$$element.attr(o,t));var w=this.$$observers;w&&a(w[d],function(e){try{e(t)}catch(n){r(n)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers=ce()),r=i[e]||(i[e]=[]);return r.push(t),C.$evalAsync(function(){!r.$$inter&&n.hasOwnProperty(e)&&t(n[e])}),function(){F(r,t)}}};var se=i.startSymbol(),le=i.endSymbol(),ue="{{"==se||"}}"==le?g:function(e){return e.replace(/\{\{/g,se).replace(/}}/g,le)},de=/^ngAttr[A-Z]/;return I.$$addBindingInfo=x?function(e,t){var n=e.data("$binding")||[];ui(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:h,I.$$addBindingClass=x?function(e){_(e,"ng-binding")}:h,I.$$addScopeInfo=x?function(e,t,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(r,t)}:h,I.$$addScopeClass=x?function(e,t){_(e,t?"ng-isolate-scope":"ng-scope")}:h,I}]}function Je(e){return ge(e.replace(Ki,""))}function Ze(e,t){var n="",i=e.split(/\s+/),r=t.split(/\s+/);e:for(var a=0;a<i.length;a++){for(var o=i[a],s=0;s<r.length;s++)if(o==r[s])continue e;n+=(n.length>0?" ":"")+o}return n}function et(e){e=Zn(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];n.nodeType===$i&&ii.call(e,t,1)}return e}function tt(){var e={},t=!1,r=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){oe(t,"controller"),$(t)?d(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(a,o){function s(e,t,n,r){if(!e||!$(e.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,t);e.$scope[t]=n}return function(i,l,c,u){var f,p,h,g;if(c=c===!0,u&&b(u)&&(g=u),b(i)){if(p=i.match(r),!p)throw Xi("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);h=p[1],g=g||p[3],i=e.hasOwnProperty(h)?e[h]:se(l.$scope,h,!0)||(t?se(o,h,!0):n),ae(i,h,!0)}if(c){var m=(ui(i)?i[i.length-1]:i).prototype;return f=Object.create(m||null),g&&s(l,g,f,h||i.name),d(function(){return a.invoke(i,f,l,h),f},{instance:f,identifier:g})}return f=a.instantiate(i,l,h),g&&s(l,g,f,h||i.name),f}}]}function nt(){this.$get=["$window",function(e){return Zn(e.document)}]}function it(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function rt(e,t){if(b(e)){var n=e.replace(er,"").trim();if(n){var i=t("Content-Type");(i&&0===i.indexOf(Yi)||at(n))&&(e=q(n))}}return e}function at(e){var t=e.match(Ji);return t&&Zi[t[0]].test(e)}function ot(e){var t,n,i,r=ce();return e?(a(e.split("\n"),function(e){i=e.indexOf(":"),t=Gn(di(e.substr(0,i))),n=di(e.substr(i+1)),t&&(r[t]=r[t]?r[t]+", "+n:n)}),r):r}function st(e){var t=$(e)?e:n;return function(n){if(t||(t=ot(e)),n){var i=t[Gn(n)];return void 0===i&&(i=null),i}return t}}function lt(e,t,n,i){return S(i)?i(e,t,n):(a(i,function(i){e=i(e,t,n)}),e)}function ct(e){return e>=200&&300>e}function ut(){var e=this.defaults={transformResponse:[rt],transformRequest:[function(e){return!$(e)||A(e)||D(e)||T(e)?e:z(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(Qi),put:L(Qi),patch:L(Qi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},t=!1;this.useApplyAsync=function(e){return y(e)?(t=!!e,this):t};var r=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(o,l,c,u,f,p){function h(t){function r(e){var t=d({},e);return e.data?t.data=lt(e.data,e.headers,e.status,l.transformResponse):t.data=e.data,ct(e.status)?t:f.reject(t)}function o(e){var t,n={};return a(e,function(e,i){S(e)?(t=e(),null!=t&&(n[i]=t)):n[i]=e}),n}function s(t){var n,i,r,a=e.headers,s=d({},t.headers);a=d({},a.common,a[Gn(t.method)]);e:for(n in a){i=Gn(n);for(r in s)if(Gn(r)===i)continue e;s[n]=a[n]}return o(s)}if(!si.isObject(t))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);var l=d({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},t);l.headers=s(t),l.method=Xn(l.method);var c=function(t){var i=t.headers,o=lt(t.data,st(i),n,t.transformRequest);return v(o)&&a(i,function(e,t){"content-type"===Gn(t)&&delete i[t]}),v(t.withCredentials)&&!v(e.withCredentials)&&(t.withCredentials=e.withCredentials),w(t,o).then(r,r)},u=[c,n],p=f.when(l);for(a(E,function(e){(e.request||e.requestError)&&u.unshift(e.request,e.requestError),(e.response||e.responseError)&&u.push(e.response,e.responseError)});u.length;){var h=u.shift(),g=u.shift();p=p.then(h,g)}return p.success=function(e){return p.then(function(t){e(t.data,t.status,t.headers,l)}),p},p.error=function(e){return p.then(null,function(t){e(t.data,t.status,t.headers,l)}),p},p}function g(e){a(arguments,function(e){h[e]=function(t,n){return h(d(n||{},{method:e,url:t}))}})}function m(e){a(arguments,function(e){h[e]=function(t,n,i){return h(d(i||{},{method:e,url:t,data:n}))}})}function w(i,r){function a(e,n,i,r){function a(){s(n,e,i,r)}p&&(ct(e)?p.put(x,[e,n,ot(i),r]):p.remove(x)),t?u.$applyAsync(a):(a(),u.$$phase||u.$apply())}function s(e,t,n,r){t=Math.max(t,0),(ct(t)?m.resolve:m.reject)({data:e,status:t,headers:st(n),config:i,statusText:r})}function c(e){s(e.data,e.status,L(e.headers()),e.statusText)}function d(){var e=h.pendingRequests.indexOf(i);-1!==e&&h.pendingRequests.splice(e,1)}var p,g,m=f.defer(),b=m.promise,w=i.headers,x=C(i.url,i.params);if(h.pendingRequests.push(i),b.then(d,d),!i.cache&&!e.cache||i.cache===!1||"GET"!==i.method&&"JSONP"!==i.method||(p=$(i.cache)?i.cache:$(e.cache)?e.cache:k),p&&(g=p.get(x),y(g)?I(g)?g.then(c,c):ui(g)?s(g[1],g[0],L(g[2]),g[3]):s(g,200,{},"OK"):p.put(x,b)),v(g)){var S=an(i.url)?l.cookies()[i.xsrfCookieName||e.xsrfCookieName]:n;S&&(w[i.xsrfHeaderName||e.xsrfHeaderName]=S),o(i.method,x,r,a,w,i.timeout,i.withCredentials,i.responseType)}return b}function C(e,t){if(!t)return e;var n=[];return s(t,function(e,t){null===e||v(e)||(ui(e)||(e=[e]),a(e,function(e){$(e)&&(e=x(e)?e.toISOString():z(e)),n.push(Y(t)+"="+Y(e))}))}),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}var k=c("$http"),E=[];return a(r,function(e){E.unshift(b(e)?p.get(e):p.invoke(e))}),h.pendingRequests=[],g("get","delete","head","jsonp"),m("post","put","patch"),h.defaults=e,h}]}function dt(){return new e.XMLHttpRequest}function ft(){this.$get=["$browser","$window","$document",function(e,t,n){return pt(e,dt,e.defer,t.angular.callbacks,n[0])}]}function pt(e,t,i,r,o){function s(e,t,n){var i=o.createElement("script"),a=null;return i.type="text/javascript",i.src=e,i.async=!0,a=function(e){Ei(i,"load",a),Ei(i,"error",a),o.body.removeChild(i),i=null;var s=-1,l="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},ki(i,"load",a),ki(i,"error",a),o.body.appendChild(i),a}return function(o,l,c,u,d,f,p,g){function m(){b&&b(),w&&w.abort()}function v(t,r,a,o,s){C!==n&&i.cancel(C),b=w=null,t(r,a,o,s),e.$$completeOutstandingRequest(h)}if(e.$$incOutstandingRequestCount(),l=l||e.url(),"jsonp"==Gn(o)){var $="_"+(r.counter++).toString(36);r[$]=function(e){r[$].data=e,r[$].called=!0};var b=s(l.replace("JSON_CALLBACK","angular.callbacks."+$),$,function(e,t){v(u,e,r[$].data,"",t),r[$]=h})}else{var w=t();w.open(o,l,!0),a(d,function(e,t){y(e)&&w.setRequestHeader(t,e)}),w.onload=function(){var e=w.statusText||"",t="response"in w?w.response:w.responseText,n=1223===w.status?204:w.status;0===n&&(n=t?200:"file"==rn(l).protocol?404:0),v(u,n,t,w.getAllResponseHeaders(),e)};var x=function(){v(u,-1,null,null,"")};if(w.onerror=x,w.onabort=x,p&&(w.withCredentials=!0),g)try{w.responseType=g}catch(S){if("json"!==g)throw S}w.send(c||null)}if(f>0)var C=i(m,f);else I(f)&&f.then(m)}}function ht(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function a(e){return"\\\\\\"+e}function o(a,o,f,p){function h(n){return n.replace(c,e).replace(u,t)}function g(e){try{return e=D(e),p&&!y(e)?e:_(e)}catch(t){var n=tr("interr","Can't interpolate: {0}\n{1}",a,t.toString());i(n)}}p=!!p;for(var m,$,b,w=0,x=[],C=[],k=a.length,E=[],A=[];k>w;){if(-1==(m=a.indexOf(e,w))||-1==($=a.indexOf(t,m+s))){w!==k&&E.push(h(a.substring(w)));break}w!==m&&E.push(h(a.substring(w,m))),b=a.substring(m+s,$),x.push(b),C.push(n(b,g)),w=$+l,A.push(E.length),E.push("")}if(f&&E.length>1)throw tr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a);if(!o||x.length){var T=function(e){for(var t=0,n=x.length;n>t;t++){if(p&&v(e[t]))return;E[A[t]]=e[t]}return E.join("")},D=function(e){return f?r.getTrusted(f,e):r.valueOf(e)},_=function(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=z(e)}return e};return d(function(e){var t=0,n=x.length,r=new Array(n);try{for(;n>t;t++)r[t]=C[t](e);return T(r)}catch(o){var s=tr("interr","Can't interpolate: {0}\n{1}",a,o.toString());i(s)}},{exp:a,expressions:x,$$watchDelegate:function(e,t,n){var i;return e.$watchGroup(C,function(n,r){var a=T(n);S(t)&&t.call(this,a,n!==r?i:a,e),i=a},n)}})}}var s=e.length,l=t.length,c=new RegExp(e.replace(/./g,a),"g"),u=new RegExp(t.replace(/./g,a),"g");return o.startSymbol=function(){return e},o.endSymbol=function(){return t},o}]}function gt(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,i){function r(r,o,s,l){var c=t.setInterval,u=t.clearInterval,d=0,f=y(l)&&!l,p=(f?i:n).defer(),h=p.promise;return s=y(s)?s:0,h.then(null,null,r),h.$$intervalId=c(function(){p.notify(d++),s>0&&d>=s&&(p.resolve(d),u(h.$$intervalId),delete a[h.$$intervalId]),f||e.$apply()},o),a[h.$$intervalId]=p,h}var a={};return r.cancel=function(e){return e&&e.$$intervalId in a?(a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0):!1},r}]}function mt(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"Â¤",posSuf:"",negPre:"(Â¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function vt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=X(t[n]);return t.join("/")}function yt(e,t){var n=rn(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=f(n.port)||ir[n.protocol]||null}function $t(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var i=rn(e);t.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=G(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function bt(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function wt(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function xt(e){return e.replace(/(#.+)|#$/,"$1")}function St(e){return e.substr(0,wt(e).lastIndexOf("/")+1)}function Ct(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function kt(e,t){this.$$html5=!0,t=t||"";var i=St(e);yt(e,this),this.$$parse=function(e){var t=bt(i,e);if(!b(t))throw rr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,i);$t(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=K(this.$$search),t=this.$$hash?"#"+X(this.$$hash):"";this.$$url=vt(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,a){if(a&&"#"===a[0])return this.hash(a.slice(1)),!0;var o,s,l;return(o=bt(e,r))!==n?(s=o,l=(o=bt(t,o))!==n?i+(bt("/",o)||o):e+s):(o=bt(i,r))!==n?l=i+o:i==r+"/"&&(l=i),l&&this.$$parse(l),!!l}}function Et(e,t){var n=St(e);yt(e,this),this.$$parse=function(i){function r(e,t,n){var i,r=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),r.exec(t)?e:(i=r.exec(e),i?i[1]:e)}var a,o=bt(e,i)||bt(n,i);"#"===o.charAt(0)?(a=bt(t,o),v(a)&&(a=o)):a=this.$$html5?o:"",$t(a,this),this.$$path=r(this.$$path,a,e),this.$$compose()},this.$$compose=function(){var n=K(this.$$search),i=this.$$hash?"#"+X(this.$$hash):"";this.$$url=vt(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return wt(e)==wt(t)?(this.$$parse(t),!0):!1}}function At(e,t){this.$$html5=!0,Et.apply(this,arguments);var n=St(e);this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var a,o;return e==wt(i)?a=i:(o=bt(n,i))?a=e+t+o:n===i+"/"&&(a=n),a&&this.$$parse(a),!!a},this.$$compose=function(){var n=K(this.$$search),i=this.$$hash?"#"+X(this.$$hash):"";this.$$url=vt(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+t+this.$$url}}function Tt(e){return function(){return this[e]}}function Dt(e,t){return function(n){return v(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function _t(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return y(t)?(e=t,this):e},this.html5Mode=function(e){return _(e)?(t.enabled=e,this):$(e)?(_(e.enabled)&&(t.enabled=e.enabled),_(e.requireBase)&&(t.requireBase=e.requireBase),_(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,a,o){function s(e,t,n){var r=c.url(),a=c.$$state;try{i.url(e,t,n),c.$$state=i.state()}catch(o){throw c.url(r),c.$$state=a,o}}function l(e,t){n.$broadcast("$locationChangeSuccess",c.absUrl(),e,c.$$state,t)}var c,u,d,f=i.baseHref(),p=i.url();if(t.enabled){if(!f&&t.requireBase)throw rr("nobase","$location in HTML5 mode requires a <base> tag to be present!");d=Ct(p)+(f||"/"),u=r.history?kt:At}else d=wt(p),u=Et;c=new u(d,"#"+e),c.$$parseLinkUrl(p,p),c.$$state=i.state();var h=/^\s*(javascript|mailto):/i;a.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var r=Zn(e.target);"a"!==R(r[0]);)if(r[0]===a[0]||!(r=r.parent())[0])return;var s=r.prop("href"),l=r.attr("href")||r.attr("xlink:href");$(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=rn(s.animVal).href),h.test(s)||!s||r.attr("target")||e.isDefaultPrevented()||c.$$parseLinkUrl(s,l)&&(e.preventDefault(),c.absUrl()!=i.url()&&(n.$apply(),o.angular["ff-684208-preventDefault"]=!0))}}),xt(c.absUrl())!=xt(p)&&i.url(c.absUrl(),!0);var g=!0;return i.onUrlChange(function(e,t){n.$evalAsync(function(){var i,r=c.absUrl(),a=c.$$state;c.$$parse(e),c.$$state=t,i=n.$broadcast("$locationChangeStart",e,r,t,a).defaultPrevented,c.absUrl()===e&&(i?(c.$$parse(r),c.$$state=a,s(r,!1,a)):(g=!1,l(r,a)))}),n.$$phase||n.$digest()}),n.$watch(function(){var e=xt(i.url()),t=xt(c.absUrl()),a=i.state(),o=c.$$replace,u=e!==t||c.$$html5&&r.history&&a!==c.$$state;(g||u)&&(g=!1,n.$evalAsync(function(){var t=c.absUrl(),i=n.$broadcast("$locationChangeStart",t,e,c.$$state,a).defaultPrevented;c.absUrl()===t&&(i?(c.$$parse(e),c.$$state=a):(u&&s(t,o,a===c.$$state?null:c.$$state),l(e,a)))})),c.$$replace=!1}),c}]}function It(){var e=!0,t=this;this.debugEnabled=function(t){return y(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function r(e){var t=n.console||{},r=t[e]||t.log||h,o=!1;try{o=!!r.apply}catch(s){}return o?function(){var e=[];return a(arguments,function(t){e.push(i(t))}),r.apply(t,e)}:function(e,t){r(e,null==t?"":t)}}return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var n=r("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Pt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw or("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Mt(e,t){if(e){if(e.constructor===e)throw or("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw or("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw or("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw or("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function Rt(e,t){if(e){if(e.constructor===e)throw or("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===sr||e===lr||e===cr)throw or("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function Ft(e){return e.constant}function Nt(e,t,n,i,r){Mt(e,r),Mt(t,r);for(var a,o=n.split("."),s=0;o.length>1;s++){a=Pt(o.shift(),r);var l=0===s&&t&&t[a]||e[a];l||(l={},e[a]=l),e=Mt(l,r)}return a=Pt(o.shift(),r),Mt(e[a],r),e[a]=i,i}function Lt(e){return"constructor"==e}function Ot(e,t,i,r,a,o,s){Pt(e,o),Pt(t,o),Pt(i,o),Pt(r,o),Pt(a,o);var l=function(e){return Mt(e,o)},c=s||Lt(e)?l:g,u=s||Lt(t)?l:g,d=s||Lt(i)?l:g,f=s||Lt(r)?l:g,p=s||Lt(a)?l:g;return function(o,s){var l=s&&s.hasOwnProperty(e)?s:o;return null==l?l:(l=c(l[e]),t?null==l?n:(l=u(l[t]),i?null==l?n:(l=d(l[i]),r?null==l?n:(l=f(l[r]),a?null==l?n:l=p(l[a]):l):l):l):l)}}function Bt(e,t){return function(n,i){return e(n,i,Mt,t)}}function Ut(e,t,i){var r=t.expensiveChecks,o=r?mr:gr,s=o[e];if(s)return s;var l=e.split("."),c=l.length;if(t.csp)s=6>c?Ot(l[0],l[1],l[2],l[3],l[4],i,r):function(e,t){var a,o=0;do a=Ot(l[o++],l[o++],l[o++],l[o++],l[o++],i,r)(e,t),t=n,e=a;while(c>o);return a};else{var u="";r&&(u+="s = eso(s, fe);\nl = eso(l, fe);\n");var d=r;a(l,function(e,t){Pt(e,i);var n=(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e;(r||Lt(e))&&(n="eso("+n+", fe)",d=!0),u+="if(s == null) return undefined;\ns="+n+";\n"}),u+="return s;";var f=new Function("s","l","eso","fe",u);f.toString=m(u),d&&(f=Bt(f,i)),s=f}return s.sharedGetter=!0,s.assign=function(t,n,i){return Nt(t,i,e,n,e)},o[e]=s,s}function Ht(e){return S(e.valueOf)?e.valueOf():vr.call(e)}function jt(){var e=ce(),t=ce();this.$get=["$filter","$sniffer",function(n,i){function r(e){var t=e;return e.sharedGetter&&(t=function(t,n){return e(t,n)},t.literal=e.literal,t.constant=e.constant,t.assign=e.assign),t}function o(e,t){for(var n=0,i=e.length;i>n;n++){var r=e[n];r.constant||(r.inputs?o(r.inputs,t):-1===t.indexOf(r)&&t.push(r))}return t}function s(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=Ht(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function l(e,t,n,i){var r,a=i.$$inputs||(i.$$inputs=o(i.inputs,[]));if(1===a.length){var l=s;return a=a[0],e.$watch(function(e){var t=a(e);return s(t,l)||(r=i(e),l=t&&Ht(t)),r},t,n)}for(var c=[],u=0,d=a.length;d>u;u++)c[u]=s;return e.$watch(function(e){for(var t=!1,n=0,o=a.length;o>n;n++){var l=a[n](e);(t||(t=!s(l,c[n])))&&(c[n]=l&&Ht(l))}return t&&(r=i(e)),r},t,n)}function c(e,t,n,i){var r,a;return r=e.$watch(function(e){return i(e)},function(e,n,i){a=e,S(t)&&t.apply(this,arguments),y(e)&&i.$$postDigest(function(){y(a)&&r()})},n)}function u(e,t,n,i){function r(e){var t=!0;return a(e,function(e){y(e)||(t=!1)}),t}var o,s;return o=e.$watch(function(e){return i(e)},function(e,n,i){s=e,S(t)&&t.call(this,e,n,i),r(e)&&i.$$postDigest(function(){r(s)&&o()})},n)}function d(e,t,n,i){var r;return r=e.$watch(function(e){return i(e)},function(e,n,i){S(t)&&t.apply(this,arguments),r()},n)}function f(e,t){if(!t)return e;var n=e.$$watchDelegate,i=n!==u&&n!==c,r=i?function(n,i){var r=e(n,i);return t(r,n,i)}:function(n,i){var r=e(n,i),a=t(r,n,i);return y(r)?a:r};return e.$$watchDelegate&&e.$$watchDelegate!==l?r.$$watchDelegate=e.$$watchDelegate:t.$stateful||(r.$$watchDelegate=l,r.inputs=[e]),r}var p={csp:i.csp,expensiveChecks:!1},g={csp:i.csp,expensiveChecks:!0};return function(i,a,o){var s,m,v;switch(typeof i){case"string":v=i=i.trim();var y=o?t:e;if(s=y[v],!s){":"===i.charAt(0)&&":"===i.charAt(1)&&(m=!0,i=i.substring(2));var $=o?g:p,b=new pr($),w=new hr(b,n,$);s=w.parse(i),s.constant?s.$$watchDelegate=d:m?(s=r(s),s.$$watchDelegate=s.literal?u:c):s.inputs&&(s.$$watchDelegate=l),y[v]=s}return f(s,a);case"function":return f(i,a);default:return f(h,a)}}}]}function zt(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Vt(function(t){e.$evalAsync(t)},t)}]}function qt(){this.$get=["$browser","$exceptionHandler",function(e,t){return Vt(function(t){e.defer(t)},t)}]}function Vt(e,t){function r(e,t,n){function i(t){return function(n){r||(r=!0,t.call(e,n))}}var r=!1;return[i(t),i(n)]}function o(){this.$$state={status:0}}function s(e,t){return function(n){t.call(e,n)}}function l(e){var i,r,a;a=e.pending,e.processScheduled=!1,e.pending=n;for(var o=0,s=a.length;s>o;++o){r=a[o][0],i=a[o][e.status];try{S(i)?r.resolve(i(e.value)):1===e.status?r.resolve(e.value):r.reject(e.value)}catch(l){r.reject(l),t(l)}}}function c(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){l(t)}))}function u(){this.promise=new o,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function d(e){var t=new u,n=0,i=ui(e)?[]:{};return a(e,function(e,r){n++,v(e).then(function(e){i.hasOwnProperty(r)||(i[r]=e,--n||t.resolve(i))},function(e){i.hasOwnProperty(r)||t.reject(e)})}),0===n&&t.resolve(i),t.promise}var f=i("$q",TypeError),p=function(){return new u};o.prototype={then:function(e,t,n){var i=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),this.$$state.status>0&&c(this.$$state),i.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return m(t,!0,e)},function(t){return m(t,!1,e)},t)}},u.prototype={resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(f("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,i;i=r(this,this.$$resolve,this.$$reject);try{($(e)||S(e))&&(n=e&&e.then),S(n)?(this.promise.$$state.status=-1,n.call(e,i[0],i[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,c(this.promise.$$state))}catch(a){i[1](a),t(a)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,c(this.promise.$$state)},notify:function(n){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&e(function(){for(var e,r,a=0,o=i.length;o>a;a++){r=i[a][0],e=i[a][3];try{r.notify(S(e)?e(n):n)}catch(s){t(s)}}})}};var h=function(e){var t=new u;return t.reject(e),t.promise},g=function(e,t){var n=new u;return t?n.resolve(e):n.reject(e),n.promise},m=function(e,t,n){var i=null;try{S(n)&&(i=n())}catch(r){return g(r,!1)}return I(i)?i.then(function(){return g(e,t)},function(e){return g(e,!1)}):g(e,t)},v=function(e,t,n,i){var r=new u;return r.resolve(e),r.promise.then(t,n,i)},y=function b(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}if(!S(e))throw f("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof b))return new b(e);var i=new u;return e(t,n),i.promise};return y.defer=p,y.reject=h,y.when=v,y.all=d,y}function Wt(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,r=!!n,a=r?function(e){var t=n(e);return function(){i(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return a.supported=r,a}]}function Gt(){var e=10,t=i("$rootScope"),n=null,o=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(i,s,l,u){function d(){this.$id=c(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function f(e){if(w.$$phase)throw t("inprog","{0} already in progress",w.$$phase);w.$$phase=e}function p(){w.$$phase=null}function g(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function m(){}function y(){for(;k.length;)try{k.shift()()}catch(e){s(e)}o=null}function b(){null===o&&(o=u.defer(function(){w.$apply(y)}))}d.prototype={constructor:d,$new:function(e,t){function n(){i.$$destroyed=!0}var i;return t=t||this,e?(i=new d,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=c(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),i=new this.$$ChildScope),i.$parent=t,i.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=i,t.$$childTail=i):t.$$childHead=t.$$childTail=i,(e||t!=this)&&i.$on("$destroy",n),i},$watch:function(e,t,i){var r=l(e);if(r.$$watchDelegate)return r.$$watchDelegate(this,t,i,r);var a=this,o=a.$$watchers,s={fn:t,last:m,get:r,exp:e,eq:!!i};return n=null,S(t)||(s.fn=h),o||(o=a.$$watchers=[]),o.unshift(s),function(){F(o,s),n=null}},$watchGroup:function(e,t){function n(){l=!1,c?(c=!1,t(r,r,s)):t(r,i,s)}var i=new Array(e.length),r=new Array(e.length),o=[],s=this,l=!1,c=!0;if(!e.length){var u=!0;return s.$evalAsync(function(){u&&t(r,r,s)}),function(){u=!1}}return 1===e.length?this.$watch(e[0],function(e,n,a){r[0]=e,i[0]=n,t(r,e===n?r:i,a)}):(a(e,function(e,t){var a=s.$watch(e,function(e,a){r[t]=e,i[t]=a,l||(l=!0,s.$evalAsync(n))});o.push(a)}),function(){for(;o.length;)o.shift()()})},$watchCollection:function(e,t){function n(e){a=e;var t,n,i,s,l;if(!v(a)){if($(a))if(r(a)){o!==p&&(o=p,m=o.length=0,d++),t=a.length,m!==t&&(d++,o.length=m=t);for(var c=0;t>c;c++)l=o[c],s=a[c],i=l!==l&&s!==s,i||l===s||(d++,o[c]=s)}else{o!==h&&(o=h={},m=0,d++),t=0;for(n in a)a.hasOwnProperty(n)&&(t++,s=a[n],l=o[n],n in o?(i=l!==l&&s!==s,i||l===s||(d++,o[n]=s)):(m++,o[n]=s,d++));if(m>t){d++;for(n in o)a.hasOwnProperty(n)||(m--,delete o[n])}}else o!==a&&(o=a,d++);return d}}function i(){if(g?(g=!1,t(a,a,c)):t(a,s,c),u)if($(a))if(r(a)){s=new Array(a.length);for(var e=0;e<a.length;e++)s[e]=a[e]}else{s={};for(var n in a)Kn.call(a,n)&&(s[n]=a[n])}else s=a}n.$stateful=!0;var a,o,s,c=this,u=t.length>1,d=0,f=l(e,n),p=[],h={},g=!0,m=0;return this.$watch(f,i)},$digest:function(){var i,r,a,l,c,d,h,g,v,$,b=e,k=this,E=[];f("$digest"),u.$$checkUrlChange(),this===w&&null!==o&&(u.defer.cancel(o),y()),n=null;do{for(d=!1,g=k;x.length;){try{$=x.shift(),$.scope.$eval($.expression,$.locals)}catch(A){s(A)}n=null}e:do{if(l=g.$$watchers)for(c=l.length;c--;)try{if(i=l[c])if((r=i.get(g))===(a=i.last)||(i.eq?O(r,a):"number"==typeof r&&"number"==typeof a&&isNaN(r)&&isNaN(a))){if(i===n){d=!1;break e}}else d=!0,n=i,i.last=i.eq?N(r,null):r,i.fn(r,a===m?r:a,g),5>b&&(v=4-b,E[v]||(E[v]=[]),E[v].push({msg:S(i.exp)?"fn: "+(i.exp.name||i.exp.toString()):i.exp,newVal:r,oldVal:a}))}catch(A){s(A)}if(!(h=g.$$childHead||g!==k&&g.$$nextSibling))for(;g!==k&&!(h=g.$$nextSibling);)g=g.$parent}while(g=h);if((d||x.length)&&!b--)throw p(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,E)}while(d||x.length);for(p();C.length;)try{C.shift()()}catch(A){s(A)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==w){for(var t in this.$$listenerCount)g(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=h,this.$on=this.$watch=this.$watchGroup=function(){return h},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(e,t){return l(e)(this,t)},$evalAsync:function(e,t){w.$$phase||x.length||u.defer(function(){x.length&&w.$digest()}),x.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){C.push(e)},$apply:function(e){try{return f("$apply"),this.$eval(e)}catch(t){s(t)}finally{p();try{w.$digest()}catch(t){throw s(t),t}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&k.push(t),b()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var i=this;do i.$$listenerCount[e]||(i.$$listenerCount[e]=0),i.$$listenerCount[e]++;while(i=i.$parent);var r=this;return function(){var i=n.indexOf(t);-1!==i&&(n[i]=null,g(r,1,e))}},$emit:function(e,t){var n,i,r,a=[],o=this,l=!1,c={name:e,targetScope:o,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=B([c],arguments,1);do{for(n=o.$$listeners[e]||a,c.currentScope=o,i=0,r=n.length;r>i;i++)if(n[i])try{n[i].apply(null,u)}catch(d){s(d)}else n.splice(i,1),i--,r--;if(l)return c.currentScope=null,c;o=o.$parent}while(o);return c.currentScope=null,c},$broadcast:function(e,t){var n=this,i=n,r=n,a={name:e,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return a;for(var o,l,c,u=B([a],arguments,1);i=r;){for(a.currentScope=i,o=i.$$listeners[e]||[],l=0,c=o.length;c>l;l++)if(o[l])try{o[l].apply(null,u)}catch(d){s(d)}else o.splice(l,1),l--,c--;if(!(r=i.$$listenerCount[e]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(r=i.$$nextSibling);)i=i.$parent;
}return a.currentScope=null,a}};var w=new d,x=w.$$asyncQueue=[],C=w.$$postDigestQueue=[],k=w.$$applyAsyncQueue=[];return w}]}function Kt(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.$get=function(){return function(n,i){var r,a=i?t:e;return r=rn(n).href,""===r||r.match(a)?n:"unsafe:"+r}}}function Xt(e){if("self"===e)return e;if(b(e)){if(e.indexOf("***")>-1)throw yr("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=fi(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(C(e))return new RegExp("^"+e.source+"$");throw yr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Yt(e){var t=[];return y(e)&&a(e,function(e){t.push(Xt(e))}),t}function Qt(){this.SCE_CONTEXTS=$r;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Yt(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Yt(e)),t},this.$get=["$injector",function(i){function r(e,t){return"self"===e?an(t):!!e.exec(t.href)}function a(n){var i,a,o=rn(n.toString()),s=!1;for(i=0,a=e.length;a>i;i++)if(r(e[i],o)){s=!0;break}if(s)for(i=0,a=t.length;a>i;i++)if(r(t[i],o)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var i=f.hasOwnProperty(e)?f[e]:null;if(!i)throw yr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw yr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new i(t)}function l(e){return e instanceof d?e.$$unwrapTrustedValue():e}function c(e,t){if(null===t||t===n||""===t)return t;var i=f.hasOwnProperty(e)?f[e]:null;if(i&&t instanceof i)return t.$$unwrapTrustedValue();if(e===$r.RESOURCE_URL){if(a(t))return t;throw yr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===$r.HTML)return u(t);throw yr("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(e){throw yr("unsafe","Attempting to use an unsafe value in a safe context.")};i.has("$sanitize")&&(u=i.get("$sanitize"));var d=o(),f={};return f[$r.HTML]=o(d),f[$r.CSS]=o(d),f[$r.URL]=o(d),f[$r.JS]=o(d),f[$r.RESOURCE_URL]=o(f[$r.URL]),{trustAs:s,getTrusted:c,valueOf:l}}]}function Jt(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>Jn)throw yr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=L($r);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=g),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var r=i.parseAs,o=i.getTrusted,s=i.trustAs;return a($r,function(e,t){var n=Gn(t);i[ge("parse_as_"+n)]=function(t){return r(e,t)},i[ge("get_trusted_"+n)]=function(t){return o(e,t)},i[ge("trust_as_"+n)]=function(t){return s(e,t)}}),i}]}function Zt(){this.$get=["$window","$document",function(e,t){var n,i,r={},a=f((/android (\d+)/.exec(Gn((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},l=/^(Moz|webkit|ms)(?=[A-Z])/,c=s.body&&s.body.style,u=!1,d=!1;if(c){for(var p in c)if(i=l.exec(p)){n=i[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in c&&"webkit"),u=!!("transition"in c||n+"Transition"in c),d=!!("animation"in c||n+"Animation"in c),!a||u&&d||(u=b(s.body.style.webkitTransition),d=b(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>a||o),hasEvent:function(e){if("input"===e&&11>=Jn)return!1;if(v(r[e])){var t=s.createElement("div");r[e]="on"+e in t}return r[e]},csp:pi(),vendorPrefix:n,transitions:u,animations:d,android:a}}]}function en(){this.$get=["$templateCache","$http","$q",function(e,t,n){function i(r,a){function o(e){if(!a)throw Gi("tpload","Failed to load template: {0}",r);return n.reject(e)}i.totalPendingRequests++;var s=t.defaults&&t.defaults.transformResponse;ui(s)?s=s.filter(function(e){return e!==rt}):s===rt&&(s=null);var l={cache:e,transformResponse:s};return t.get(r,l)["finally"](function(){i.totalPendingRequests--}).then(function(e){return e.data},o)}return i.totalPendingRequests=0,i}]}function tn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={};return i.findBindings=function(e,t,n){var i=e.getElementsByClassName("ng-binding"),r=[];return a(i,function(e){var i=si.element(e).data("$binding");i&&a(i,function(i){if(n){var a=new RegExp("(^|\\s)"+fi(t)+"(\\s|\\||$)");a.test(i)&&r.push(e)}else-1!=i.indexOf(t)&&r.push(e)})}),r},i.findModels=function(e,t,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var a=n?"=":"*=",o="["+i[r]+"model"+a+'"'+t+'"]',s=e.querySelectorAll(o);if(s.length)return s}},i.getLocation=function(){return n.url()},i.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function nn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,i,r){function a(a,s,l){var c,u=y(l)&&!l,d=(u?i:n).defer(),f=d.promise;return c=t.defer(function(){try{d.resolve(a())}catch(t){d.reject(t),r(t)}finally{delete o[f.$$timeoutId]}u||e.$apply()},s),f.$$timeoutId=c,o[c]=d,f}var o={};return a.cancel=function(e){return e&&e.$$timeoutId in o?(o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},a}]}function rn(e){var t=e;return Jn&&(br.setAttribute("href",t),t=br.href),br.setAttribute("href",t),{href:br.href,protocol:br.protocol?br.protocol.replace(/:$/,""):"",host:br.host,search:br.search?br.search.replace(/^\?/,""):"",hash:br.hash?br.hash.replace(/^#/,""):"",hostname:br.hostname,port:br.port,pathname:"/"===br.pathname.charAt(0)?br.pathname:"/"+br.pathname}}function an(e){var t=b(e)?rn(e):e;return t.protocol===wr.protocol&&t.host===wr.host}function on(){this.$get=m(e)}function sn(e){function t(i,r){if($(i)){var o={};return a(i,function(e,n){o[n]=t(n,e)}),o}return e.factory(i+n,r)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",dn),t("date",xn),t("filter",ln),t("json",Sn),t("limitTo",Cn),t("lowercase",Er),t("number",fn),t("orderBy",kn),t("uppercase",Ar)}function ln(){return function(e,t,n){if(!ui(e))return e;var i,r;switch(typeof t){case"function":i=t;break;case"boolean":case"number":case"string":r=!0;case"object":i=cn(t,n,r);break;default:return e}return e.filter(i)}}function cn(e,t,n){var i,r=$(e)&&"$"in e;return t===!0?t=O:S(t)||(t=function(e,t){return $(e)||$(t)?!1:(e=Gn(""+e),t=Gn(""+t),-1!==e.indexOf(t))}),i=function(i){return r&&!$(i)?un(i,e.$,t,!1):un(i,e,t,n)}}function un(e,t,n,i,r){var a=typeof e,o=typeof t;if("string"===o&&"!"===t.charAt(0))return!un(e,t.substring(1),n,i);if(ui(e))return e.some(function(e){return un(e,t,n,i)});switch(a){case"object":var s;if(i){for(s in e)if("$"!==s.charAt(0)&&un(e[s],t,n,!0))return!0;return r?!1:un(e,t,n,!1)}if("object"===o){for(s in t){var l=t[s];if(!S(l)){var c="$"===s,u=c?e:e[s];if(!un(u,l,n,c,c))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function dn(e){var t=e.NUMBER_FORMATS;return function(e,n,i){return v(n)&&(n=t.CURRENCY_SYM),v(i)&&(i=t.PATTERNS[1].maxFrac),null==e?e:pn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function fn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:pn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function pn(e,t,n,i,r){if(!isFinite(e)||$(e))return"";var a=0>e;e=Math.abs(e);var o=e+"",s="",l=[],c=!1;if(-1!==o.indexOf("e")){var u=o.match(/([\d\.]+)e(-?)(\d+)/);u&&"-"==u[2]&&u[3]>r+1?e=0:(s=o,c=!0)}if(c)r>0&&1>e&&(s=e.toFixed(r),e=parseFloat(s));else{var d=(o.split(xr)[1]||"").length;v(r)&&(r=Math.min(Math.max(t.minFrac,d),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+r)).toString()+"e"+-r);var f=(""+e).split(xr),p=f[0];f=f[1]||"";var h,g=0,m=t.lgSize,y=t.gSize;if(p.length>=m+y)for(g=p.length-m,h=0;g>h;h++)(g-h)%y===0&&0!==h&&(s+=n),s+=p.charAt(h);for(h=g;h<p.length;h++)(p.length-h)%m===0&&0!==h&&(s+=n),s+=p.charAt(h);for(;f.length<r;)f+="0";r&&"0"!==r&&(s+=i+f.substr(0,r))}return 0===e&&(a=!1),l.push(a?t.negPre:t.posPre,s,a?t.negSuf:t.posSuf),l.join("")}function hn(e,t,n){var i="";for(0>e&&(i="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function gn(e,t,n,i){return n=n||0,function(r){var a=r["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12==n&&(a=12),hn(a,t,i)}}function mn(e,t){return function(n,i){var r=n["get"+e](),a=Xn(t?"SHORT"+e:e);return i[a][r]}}function vn(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=hn(Math[t>0?"floor":"ceil"](t/60),2)+hn(Math.abs(t%60),2)}function yn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function $n(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function bn(e){return function(t){var n=yn(t.getFullYear()),i=$n(t),r=+i-+n,a=1+Math.round(r/6048e5);return hn(a,e)}}function wn(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function xn(e){function t(e){var t;if(t=e.match(n)){var i=new Date(0),r=0,a=0,o=t[8]?i.setUTCFullYear:i.setFullYear,s=t[8]?i.setUTCHours:i.setHours;t[9]&&(r=f(t[9]+t[10]),a=f(t[9]+t[11])),o.call(i,f(t[1]),f(t[2])-1,f(t[3]));var l=f(t[4]||0)-r,c=f(t[5]||0)-a,u=f(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(i,l,c,u,d),i}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var o,s,l="",c=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,b(n)&&(n=kr.test(n)?f(n):t(n)),w(n)&&(n=new Date(n)),!x(n))return n;for(;i;)s=Cr.exec(i),s?(c=B(c,s,1),i=c.pop()):(c.push(i),i=null);return r&&"UTC"===r&&(n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+n.getTimezoneOffset())),a(c,function(t){o=Sr[t],l+=o?o(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function Sn(){return function(e,t){return v(t)&&(t=2),z(e,t)}}function Cn(){return function(e,t){return w(e)&&(e=e.toString()),ui(e)||b(e)?(t=Math.abs(Number(t))===1/0?Number(t):f(t),t?t>0?e.slice(0,t):e.slice(t):b(e)?"":[]):e}}function kn(e){return function(t,n,i){function a(e,t){for(var i=0;i<n.length;i++){var r=n[i](e,t);if(0!==r)return r}return 0}function o(e,t){return t?function(t,n){return e(n,t)}:e}function s(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function l(e){return null===e?"null":"function"==typeof e.valueOf&&(e=e.valueOf(),s(e))?e:"function"==typeof e.toString&&(e=e.toString(),s(e))?e:""}function c(e,t){var n=typeof e,i=typeof t;return n===i&&"object"===n&&(e=l(e),t=l(t)),n===i?("string"===n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):i>n?-1:1}return r(t)?(n=ui(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(t){var n=!1,i=t||g;if(b(t)){if(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),""===t)return o(c,n);if(i=e(t),i.constant){var r=i();return o(function(e,t){return c(e[r],t[r])},n)}}return o(function(e,t){return c(i(e),i(t))},n)}),ni.call(t).sort(o(a,i))):t}}function En(e){return S(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function An(e,t){e.$name=t}function Tn(e,t,i,r,o){var s=this,l=[],c=s.$$parentForm=e.parent().controller("form")||_r;s.$error={},s.$$success={},s.$pending=n,s.$name=o(t.name||t.ngForm||"")(i),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,c.$addControl(s),s.$rollbackViewValue=function(){a(l,function(e){e.$rollbackViewValue()})},s.$commitViewValue=function(){a(l,function(e){e.$commitViewValue()})},s.$addControl=function(e){oe(e.$name,"input"),l.push(e),e.$name&&(s[e.$name]=e)},s.$$renameControl=function(e,t){var n=e.$name;s[n]===e&&delete s[n],s[t]=e,e.$name=t},s.$removeControl=function(e){e.$name&&s[e.$name]===e&&delete s[e.$name],a(s.$pending,function(t,n){s.$setValidity(n,null,e)}),a(s.$error,function(t,n){s.$setValidity(n,null,e)}),a(s.$$success,function(t,n){s.$setValidity(n,null,e)}),F(l,e)},zn({ctrl:this,$element:e,set:function(e,t,n){var i=e[t];if(i){var r=i.indexOf(n);-1===r&&i.push(n)}else e[t]=[n]},unset:function(e,t,n){var i=e[t];i&&(F(i,n),0===i.length&&delete e[t])},parentForm:c,$animate:r}),s.$setDirty=function(){r.removeClass(e,fa),r.addClass(e,pa),s.$dirty=!0,s.$pristine=!1,c.$setDirty()},s.$setPristine=function(){r.setClass(e,fa,pa+" "+Ir),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,a(l,function(e){e.$setPristine()})},s.$setUntouched=function(){a(l,function(e){e.$setUntouched()})},s.$setSubmitted=function(){r.addClass(e,Ir),s.$submitted=!0,c.$setSubmitted()}}function Dn(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function _n(e,t,n,i,r,a){In(e,t,n,i,r,a),Dn(i)}function In(e,t,n,i,r,a){var o=Gn(t[0].type);if(!r.android){var s=!1;t.on("compositionstart",function(e){s=!0}),t.on("compositionend",function(){s=!1,l()})}var l=function(e){if(c&&(a.defer.cancel(c),c=null),!s){var r=t.val(),l=e&&e.type;"password"===o||n.ngTrim&&"false"===n.ngTrim||(r=di(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,l)}};if(r.hasEvent("input"))t.on("input",l);else{var c,u=function(e,t,n){c||(c=a.defer(function(){c=null,t&&t.value===n||l(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||u(e,this,this.value)}),r.hasEvent("paste")&&t.on("paste cut",u)}t.on("change",l),i.$render=function(){t.val(i.$isEmpty(i.$viewValue)?"":i.$viewValue)}}function Pn(e,t){if(x(e))return e;if(b(e)){Hr.lastIndex=0;var n=Hr.exec(e);if(n){var i=+n[1],r=+n[2],a=0,o=0,s=0,l=0,c=yn(i),u=7*(r-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(i,0,c.getDate()+u,a,o,s,l)}}return NaN}function Mn(e,t){return function(n,i){var r,o;if(x(n))return n;if(b(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Fr.test(n))return new Date(n);if(e.lastIndex=0,r=e.exec(n))return r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},a(r,function(e,n){n<t.length&&(o[t[n]]=+e)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function Rn(e,t,i,r){return function(a,o,s,l,c,u,d){function f(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function p(e){return y(e)?x(e)?e:i(e):n}Fn(a,o,s,l),In(a,o,s,l,c,u);var h,g=l&&l.$options&&l.$options.timezone;if(l.$$parserName=e,l.$parsers.push(function(e){if(l.$isEmpty(e))return null;if(t.test(e)){var r=i(e,h);return"UTC"===g&&r.setMinutes(r.getMinutes()-r.getTimezoneOffset()),r}return n}),l.$formatters.push(function(e){if(e&&!x(e))throw va("datefmt","Expected `{0}` to be a date",e);if(f(e)){if(h=e,h&&"UTC"===g){var t=6e4*h.getTimezoneOffset();h=new Date(h.getTime()+t)}return d("date")(e,r,g)}return h=null,""}),y(s.min)||s.ngMin){var m;l.$validators.min=function(e){return!f(e)||v(m)||i(e)>=m},s.$observe("min",function(e){m=p(e),l.$validate()})}if(y(s.max)||s.ngMax){var $;l.$validators.max=function(e){return!f(e)||v($)||i(e)<=$},s.$observe("max",function(e){$=p(e),l.$validate()})}}}function Fn(e,t,i,r){var a=t[0],o=r.$$hasNativeValidators=$(a.validity);o&&r.$parsers.push(function(e){var i=t.prop(Wn)||{};return i.badInput&&!i.typeMismatch?n:e})}function Nn(e,t,i,r,a,o){if(Fn(e,t,i,r),In(e,t,i,r,a,o),r.$$parserName="number",r.$parsers.push(function(e){return r.$isEmpty(e)?null:Or.test(e)?parseFloat(e):n}),r.$formatters.push(function(e){if(!r.$isEmpty(e)){if(!w(e))throw va("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),y(i.min)||i.ngMin){var s;r.$validators.min=function(e){return r.$isEmpty(e)||v(s)||e>=s},i.$observe("min",function(e){y(e)&&!w(e)&&(e=parseFloat(e,10)),s=w(e)&&!isNaN(e)?e:n,r.$validate()})}if(y(i.max)||i.ngMax){var l;r.$validators.max=function(e){return r.$isEmpty(e)||v(l)||l>=e},i.$observe("max",function(e){y(e)&&!w(e)&&(e=parseFloat(e,10)),l=w(e)&&!isNaN(e)?e:n,r.$validate()})}}function Ln(e,t,n,i,r,a){In(e,t,n,i,r,a),Dn(i),i.$$parserName="url",i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||Nr.test(n)}}function On(e,t,n,i,r,a){In(e,t,n,i,r,a),Dn(i),i.$$parserName="email",i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||Lr.test(n)}}function Bn(e,t,n,i){v(n.name)&&t.attr("name",c());var r=function(e){t[0].checked&&i.$setViewValue(n.value,e&&e.type)};t.on("click",r),i.$render=function(){var e=n.value;t[0].checked=e==i.$viewValue},n.$observe("value",i.$render)}function Un(e,t,n,r,a){var o;if(y(r)){if(o=e(r),!o.constant)throw i("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(t)}return a}function Hn(e,t,n,i,r,a,o,s){var l=Un(s,e,"ngTrueValue",n.ngTrueValue,!0),c=Un(s,e,"ngFalseValue",n.ngFalseValue,!1),u=function(e){i.$setViewValue(t[0].checked,e&&e.type)};t.on("click",u),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return e===!1},i.$formatters.push(function(e){return O(e,l)}),i.$parsers.push(function(e){return e?l:c})}function jn(e,t){return e="ngClass"+e,["$animate",function(n){function i(e,t){var n=[];e:for(var i=0;i<e.length;i++){for(var r=e[i],a=0;a<t.length;a++)if(r==t[a])continue e;n.push(r)}return n}function r(e){if(ui(e))return e;if(b(e))return e.split(" ");if($(e)){var t=[];return a(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(o,s,l){function c(e){var t=d(e,1);l.$addClass(t)}function u(e){var t=d(e,-1);l.$removeClass(t)}function d(e,t){var n=s.data("$classCounts")||{},i=[];return a(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))}),s.data("$classCounts",n),i.join(" ")}function f(e,t){var r=i(t,e),a=i(e,t);r=d(r,1),a=d(a,-1),r&&r.length&&n.addClass(s,r),a&&a.length&&n.removeClass(s,a)}function p(e){if(t===!0||o.$index%2===t){var n=r(e||[]);if(h){if(!O(e,h)){var i=r(h);f(i,n)}}else c(n)}h=L(e)}var h;o.$watch(l[e],p,!0),l.$observe("class",function(t){p(o.$eval(l[e]))}),"ngClass"!==e&&o.$watch("$index",function(n,i){var a=1&n;if(a!==(1&i)){var s=r(o.$eval(l[e]));a===t?c(s):u(s)}})}}}]}function zn(e){function t(e,t,l){t===n?i("$pending",e,l):r("$pending",e,l),_(t)?t?(d(s.$error,e,l),u(s.$$success,e,l)):(u(s.$error,e,l),d(s.$$success,e,l)):(d(s.$error,e,l),d(s.$$success,e,l)),s.$pending?(a(ma,!0),s.$valid=s.$invalid=n,o("",null)):(a(ma,!1),s.$valid=qn(s.$error),s.$invalid=!s.$valid,o("",s.$valid));var c;c=s.$pending&&s.$pending[e]?n:s.$error[e]?!1:s.$$success[e]?!0:null,o(e,c),f.$setValidity(e,c,s)}function i(e,t,n){s[e]||(s[e]={}),u(s[e],t,n)}function r(e,t,i){s[e]&&d(s[e],t,i),qn(s[e])&&(s[e]=n)}function a(e,t){t&&!c[e]?(p.addClass(l,e),c[e]=!0):!t&&c[e]&&(p.removeClass(l,e),c[e]=!1)}function o(e,t){e=e?"-"+ne(e,"-"):"",a(ua+e,t===!0),a(da+e,t===!1)}var s=e.ctrl,l=e.$element,c={},u=e.set,d=e.unset,f=e.parentForm,p=e.$animate;c[da]=!(c[ua]=l.hasClass(ua)),s.$setValidity=t}function qn(e){if(e)for(var t in e)return!1;return!0}var Vn=/^\/(.+)\/([a-z]*)$/,Wn="validity",Gn=function(e){return b(e)?e.toLowerCase():e},Kn=Object.prototype.hasOwnProperty,Xn=function(e){return b(e)?e.toUpperCase():e},Yn=function(e){return b(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Qn=function(e){return b(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Gn=Yn,Xn=Qn);var Jn,Zn,ei,ti,ni=[].slice,ii=[].splice,ri=[].push,ai=Object.prototype.toString,oi=i("ng"),si=e.angular||(e.angular={}),li=0;Jn=t.documentMode,h.$inject=[],g.$inject=[];var ci,ui=Array.isArray,di=function(e){return b(e)?e.trim():e},fi=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},pi=function(){if(y(pi.isActive_))return pi.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(n){e=!0}return pi.isActive_=e},hi=["ng-","data-ng-","ng:","x-ng-"],gi=/[A-Z]/g,mi=!1,vi=1,yi=3,$i=8,bi=9,wi=11,xi={full:"1.3.14",major:1,minor:3,dot:14,codeName:"instantaneous-browserification"};be.expando="ng339";var Si=be.cache={},Ci=1,ki=function(e,t,n){e.addEventListener(t,n,!1)},Ei=function(e,t,n){e.removeEventListener(t,n,!1)};be._data=function(e){return this.cache[e[this.expando]]||{}};var Ai=/([\:\-\_]+(.))/g,Ti=/^moz([A-Z])/,Di={mouseleave:"mouseout",mouseenter:"mouseover"},_i=i("jqLite"),Ii=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Pi=/<|&#?\w+;/,Mi=/<([\w:]+)/,Ri=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fi.optgroup=Fi.option,Fi.tbody=Fi.tfoot=Fi.colgroup=Fi.caption=Fi.thead,Fi.th=Fi.td;var Ni=be.prototype={ready:function(n){function i(){r||(r=!0,n())}var r=!1;"complete"===t.readyState?setTimeout(i):(this.on("DOMContentLoaded",i),be(e).on("load",i))},toString:function(){var e=[];return a(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Zn(e>=0?this[e]:this[this.length+e])},length:0,push:ri,sort:[].sort,splice:[].splice},Li={};a("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Li[Gn(e)]=e});var Oi={};a("input,select,option,textarea,button,form,details".split(","),function(e){Oi[e]=!0});var Bi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};a({data:Ee,removeData:Ce},function(e,t){be[t]=e}),a({data:Ee,inheritedData:Pe,scope:function(e){return Zn.data(e,"$scope")||Pe(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Zn.data(e,"$isolateScope")||Zn.data(e,"$isolateScopeNoTemplate")},controller:Ie,injector:function(e){return Pe(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Ae,css:function(e,t,n){return t=ge(t),y(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,i){var r=Gn(t);if(Li[r]){if(!y(i))return e[t]||(e.attributes.getNamedItem(t)||h).specified?r:n;i?(e[t]=!0,e.setAttribute(t,r)):(e[t]=!1,e.removeAttribute(r))}else if(y(i))e.setAttribute(t,i);else if(e.getAttribute){var a=e.getAttribute(t,2);return null===a?n:a}},prop:function(e,t,n){return y(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(v(t)){var n=e.nodeType;return n===vi||n===yi?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(v(t)){if(e.multiple&&"select"===R(e)){var n=[];return a(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return v(t)?e.innerHTML:(xe(e,!0),void(e.innerHTML=t))},empty:Me},function(e,t){be.prototype[t]=function(t,i){var r,a,o=this.length;if(e!==Me&&(2==e.length&&e!==Ae&&e!==Ie?t:i)===n){if($(t)){for(r=0;o>r;r++)if(e===Ee)e(this[r],t);else for(a in t)e(this[r],a,t[a]);return this}for(var s=e.$dv,l=s===n?Math.min(o,1):o,c=0;l>c;c++){var u=e(this[c],t,i);s=s?s+u:u}return s}for(r=0;o>r;r++)e(this[r],t,i);return this}}),a({removeData:Ce,on:function qa(e,t,n,i){if(y(i))throw _i("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ve(e)){var r=ke(e,!0),a=r.events,o=r.handle;o||(o=r.handle=Oe(e,a));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],l=s.length;l--;){t=s[l];var c=a[t];c||(a[t]=[],"mouseenter"===t||"mouseleave"===t?qa(e,Di[t],function(e){var n=this,i=e.relatedTarget;(!i||i!==n&&!n.contains(i))&&o(e,t)}):"$destroy"!==t&&ki(e,t,o),c=a[t]),c.push(n)}}},off:Se,one:function(e,t,n){e=Zn(e),e.on(t,function i(){e.off(t,n),e.off(t,i)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;xe(e),a(new be(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return a(e.childNodes,function(e){e.nodeType===vi&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===vi||n===wi){t=new be(t);for(var i=0,r=t.length;r>i;i++){var a=t[i];e.appendChild(a)}}},prepend:function(e,t){if(e.nodeType===vi){var n=e.firstChild;a(new be(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=Zn(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:Re,detach:function(e){Re(e,!0)},after:function(e,t){var n=e,i=e.parentNode;t=new be(t);for(var r=0,a=t.length;a>r;r++){var o=t[r];i.insertBefore(o,n.nextSibling),n=o}},addClass:De,removeClass:Te,toggleClass:function(e,t,n){t&&a(t.split(" "),function(t){var i=n;v(i)&&(i=!Ae(e,t)),(i?De:Te)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==wi?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:we,triggerHandler:function(e,t,n){var i,r,o,s=t.type||t,l=ke(e),c=l&&l.events,u=c&&c[s];u&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:h,type:s,target:e},t.type&&(i=d(i,t)),r=L(u),o=n?[i].concat(n):[i],a(r,function(t){i.isImmediatePropagationStopped()||t.apply(e,o)}))}},function(e,t){be.prototype[t]=function(t,n,i){for(var r,a=0,o=this.length;o>a;a++)v(r)?(r=e(this[a],t,n,i),y(r)&&(r=Zn(r))):_e(r,e(this[a],t,n,i));return y(r)?r:this},be.prototype.bind=be.prototype.on,be.prototype.unbind=be.prototype.off}),He.prototype={put:function(e,t){this[Ue(e,this.nextUid)]=t},get:function(e){return this[Ue(e,this.nextUid)]},remove:function(e){var t=this[e=Ue(e,this.nextUid)];return delete this[e],t}};var Ui=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Hi=/,/,ji=/^\s*(_?)(\S+?)\1\s*$/,zi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,qi=i("$injector");qe.$$annotate=ze;var Vi=i("$animate"),Wi=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var i=t+"-animation";if(t&&"."!=t.charAt(0))throw Vi("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=i,e.factory(i,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(e,t,n){function i(t){var i,r=e.defer();return r.promise.$$cancelFn=function(){i&&i()},n.$$postDigest(function(){i=t(function(){r.resolve()})}),r.promise}function r(e,t){var n=[],i=[],r=ce();return a((e.attr("class")||"").split(/\s+/),function(e){r[e]=!0}),a(t,function(e,t){var a=r[t];e===!1&&a?i.push(t):e!==!0||a||n.push(t)}),n.length+i.length>0&&[n.length?n:null,i.length?i:null]}function o(e,t,n){for(var i=0,r=t.length;r>i;++i){var a=t[i];e[a]=n}}function s(){return c||(c=e.defer(),t(function(){c.resolve(),c=null})),c.promise}function l(e,t){if(si.isObject(t)){var n=d(t.from||{},t.to||{});e.css(n)}}var c;return{animate:function(e,t,n){return l(e,{from:t,to:n}),s()},enter:function(e,t,n,i){return l(e,i),n?n.after(e):t.prepend(e),s()},leave:function(e,t){return e.remove(),s()},move:function(e,t,n,i){return this.enter(e,t,n,i)},addClass:function(e,t,n){return this.setClass(e,t,[],n)},$$addClassImmediately:function(e,t,n){return e=Zn(e),t=b(t)?t:ui(t)?t.join(" "):"",a(e,function(e){De(e,t)}),l(e,n),s()},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},$$removeClassImmediately:function(e,t,n){return e=Zn(e),t=b(t)?t:ui(t)?t.join(" "):"",a(e,function(e){Te(e,t)}),l(e,n),s()},setClass:function(e,t,n,a){var s=this,l="$$animateClasses",c=!1;e=Zn(e);var u=e.data(l);u?a&&u.options&&(u.options=si.extend(u.options||{},a)):(u={classes:{},options:a},c=!0);var d=u.classes;return t=ui(t)?t:t.split(" "),n=ui(n)?n:n.split(" "),o(d,t,!0),o(d,n,!1),c&&(u.promise=i(function(t){var n=e.data(l);if(e.removeData(l),n){var i=r(e,n.classes);i&&s.$$setClassImmediately(e,i[0],i[1],n.options)}t()}),e.data(l,u)),u.promise},$$setClassImmediately:function(e,t,n,i){return t&&this.$$addClassImmediately(e,t),n&&this.$$removeClassImmediately(e,n),l(e,i),s()},enabled:h,cancel:h}}]}],Gi=i("$compile");Qe.$inject=["$provide","$$sanitizeUriProvider"];var Ki=/^((?:x|data)[\:\-_])/i,Xi=i("$controller"),Yi="application/json",Qi={"Content-Type":Yi+";charset=utf-8"},Ji=/^\[|^\{(?!\{)/,Zi={"[":/]$/,"{":/}$/},er=/^\)\]\}',?\n/,tr=i("$interpolate"),nr=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ir={http:80,https:443,ftp:21},rr=i("$location"),ar={$$html5:!1,$$replace:!1,absUrl:Tt("$$absUrl"),url:function(e){if(v(e))return this.$$url;var t=nr.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Tt("$$protocol"),host:Tt("$$host"),port:Tt("$$port"),path:Dt("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(b(e)||w(e))e=e.toString(),this.$$search=G(e);else{if(!$(e))throw rr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=N(e,{}),a(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:v(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Dt("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};a([At,Et,kt],function(e){e.prototype=Object.create(ar),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==kt||!this.$$html5)throw rr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=v(t)?null:t,this}});var or=i("$parse"),sr=Function.prototype.call,lr=Function.prototype.apply,cr=Function.prototype.bind,ur=ce();a({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(e,t){e.constant=e.literal=e.sharedGetter=!0,ur[t]=e}),ur["this"]=function(e){return e},ur["this"].sharedGetter=!0;var dr=d(ce(),{"+":function(e,t,i,r){return i=i(e,t),r=r(e,t),y(i)?y(r)?i+r:i:y(r)?r:n},"-":function(e,t,n,i){return n=n(e,t),i=i(e,t),(y(n)?n:0)-(y(i)?i:0)},"*":function(e,t,n,i){return n(e,t)*i(e,t)},"/":function(e,t,n,i){return n(e,t)/i(e,t)},"%":function(e,t,n,i){return n(e,t)%i(e,t)},"===":function(e,t,n,i){return n(e,t)===i(e,t)},"!==":function(e,t,n,i){return n(e,t)!==i(e,t)},"==":function(e,t,n,i){return n(e,t)==i(e,t)},"!=":function(e,t,n,i){return n(e,t)!=i(e,t)},"<":function(e,t,n,i){return n(e,t)<i(e,t)},">":function(e,t,n,i){return n(e,t)>i(e,t)},"<=":function(e,t,n,i){return n(e,t)<=i(e,t)},">=":function(e,t,n,i){return n(e,t)>=i(e,t)},"&&":function(e,t,n,i){return n(e,t)&&i(e,t)},"||":function(e,t,n,i){return n(e,t)||i(e,t)},"!":function(e,t,n){return!n(e,t)},"=":!0,"|":!0}),fr={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},pr=function(e){this.options=e};pr.prototype={constructor:pr,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({
index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),i=n+this.peek(2),r=dr[t],a=dr[n],o=dr[i];if(r||a||o){var s=o?i:a?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||"Â "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=y(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw or("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Gn(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,r=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(i+=a,r){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{var s=fr[a];n+=s||a}r=!1}else if("\\"===a)r=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:i,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var hr=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};hr.ZERO=d(function(){return 0},{sharedGetter:!0,constant:!0}),hr.prototype={constructor:hr,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.peek().identifier&&this.peek().text in ur?e=ur[this.consume().text]:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t,n;t=this.expect("(","[",".");)"("===t.text?(e=this.functionCall(e,n),n=null):"["===t.text?(n=e,e=this.objectIndex(e)):"."===t.text?(n=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw or("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw or("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){return this.peekAhead(0,e,t,n,i)},peekAhead:function(e,t,n,i,r){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===n||o===i||o===r||!t&&!n&&!i&&!r)return a}return!1},expect:function(e,t,n,i){var r=this.peek(e,t,n,i);return r?(this.tokens.shift(),r):!1},consume:function(e){if(0===this.tokens.length)throw or("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},unaryFn:function(e,t){var n=dr[e];return d(function(e,i){return n(e,i,t)},{constant:t.constant,inputs:[t]})},binaryFn:function(e,t,n,i){var r=dr[t];return d(function(t,i){return r(t,i,e,n)},{constant:e.constant&&n.constant,inputs:!i&&[e,n]})},identifier:function(){for(var e=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)e+=this.consume().text+this.consume().text;return Ut(e,this.options,this.text)},constant:function(){var e=this.consume().value;return d(function(){return e},{constant:!0,literal:!0})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var i,r=0,a=e.length;a>r;r++)i=e[r](t,n);return i}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},filter:function(e){var t,i,r=this.$filter(this.consume().text);if(this.peek(":"))for(t=[],i=[];this.expect(":");)t.push(this.expression());var a=[e].concat(t||[]);return d(function(a,o){var s=e(a,o);if(i){i[0]=s;for(var l=t.length;l--;)i[l+1]=t[l](a,o);return r.apply(n,i)}return r(s)},{constant:!r.$stateful&&a.every(Ft),inputs:!r.$stateful&&a})},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),d(function(t,i){return n.assign(t,e(t,i),i)},{inputs:[n,e]})):n},ternary:function(){var e,t,n=this.logicalOR();if((t=this.expect("?"))&&(e=this.assignment(),this.consume(":"))){var i=this.assignment();return d(function(t,r){return n(t,r)?e(t,r):i(t,r)},{constant:n.constant&&e.constant&&i.constant})}return n},logicalOR:function(){for(var e,t=this.logicalAND();e=this.expect("||");)t=this.binaryFn(t,e.text,this.logicalAND(),!0);return t},logicalAND:function(){for(var e,t=this.equality();e=this.expect("&&");)t=this.binaryFn(t,e.text,this.equality(),!0);return t},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t=this.binaryFn(t,e.text,this.relational());return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t=this.binaryFn(t,e.text,this.additive());return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.text,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.text,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(hr.ZERO,e.text,this.unary()):(e=this.expect("!"))?this.unaryFn(e.text,this.unary()):this.primary()},fieldAccess:function(e){var t=this.identifier();return d(function(i,r,a){var o=a||e(i,r);return null==o?n:t(o)},{assign:function(n,i,r){var a=e(n,r);return a||e.assign(n,a={},r),t.assign(a,i)}})},objectIndex:function(e){var t=this.text,i=this.expression();return this.consume("]"),d(function(r,a){var o,s=e(r,a),l=i(r,a);return Pt(l,t),s?o=Mt(s[l],t):n},{assign:function(n,r,a){var o=Pt(i(n,a),t),s=Mt(e(n,a),t);return s||e.assign(n,s={},a),s[o]=r}})},functionCall:function(e,t){var i=[];if(")"!==this.peekToken().text)do i.push(this.expression());while(this.expect(","));this.consume(")");var r=this.text,a=i.length?[]:null;return function(o,s){var l=t?t(o,s):y(t)?n:o,c=e(o,s,l)||h;if(a)for(var u=i.length;u--;)a[u]=Mt(i[u](o,s),r);Mt(l,r),Rt(c,r);var d=c.apply?c.apply(l,a):c(a[0],a[1],a[2],a[3],a[4]);return a&&(a.length=0),Mt(d,r)}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),d(function(t,n){for(var i=[],r=0,a=e.length;a>r;r++)i.push(e[r](t,n));return i},{literal:!0,constant:e.every(Ft),inputs:e})},object:function(){var e=[],t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.consume();n.constant?e.push(n.value):n.identifier?e.push(n.text):this.throwError("invalid key",n),this.consume(":"),t.push(this.expression())}while(this.expect(","));return this.consume("}"),d(function(n,i){for(var r={},a=0,o=t.length;o>a;a++)r[e[a]]=t[a](n,i);return r},{literal:!0,constant:t.every(Ft),inputs:t})}};var gr=ce(),mr=ce(),vr=Object.prototype.valueOf,yr=i("$sce"),$r={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Gi=i("$compile"),br=t.createElement("a"),wr=rn(e.location.href);sn.$inject=["$provide"],dn.$inject=["$locale"],fn.$inject=["$locale"];var xr=".",Sr={yyyy:gn("FullYear",4),yy:gn("FullYear",2,0,!0),y:gn("FullYear",1),MMMM:mn("Month"),MMM:mn("Month",!0),MM:gn("Month",2,1),M:gn("Month",1,1),dd:gn("Date",2),d:gn("Date",1),HH:gn("Hours",2),H:gn("Hours",1),hh:gn("Hours",2,-12),h:gn("Hours",1,-12),mm:gn("Minutes",2),m:gn("Minutes",1),ss:gn("Seconds",2),s:gn("Seconds",1),sss:gn("Milliseconds",3),EEEE:mn("Day"),EEE:mn("Day",!0),a:wn,Z:vn,ww:bn(2),w:bn(1)},Cr=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,kr=/^\-?\d+$/;xn.$inject=["$locale"];var Er=m(Gn),Ar=m(Xn);kn.$inject=["$parse"];var Tr=m({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref||t.name?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===ai.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Dr={};a(Li,function(e,t){if("multiple"!=e){var n=Je("ng-"+t);Dr[n]=function(){return{restrict:"A",priority:100,link:function(e,i,r){e.$watch(r[n],function(e){r.$set(t,!!e)})}}}}}),a(Bi,function(e,t){Dr[t]=function(){return{priority:100,link:function(e,n,i){if("ngPattern"===t&&"/"==i.ngPattern.charAt(0)){var r=i.ngPattern.match(Vn);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}e.$watch(i[t],function(e){i.$set(t,e)})}}}}),a(["src","srcset","href"],function(e){var t=Je("ng-"+e);Dr[t]=function(){return{priority:99,link:function(n,i,r){var a=e,o=e;"href"===e&&"[object SVGAnimatedString]"===ai.call(i.prop("href"))&&(o="xlinkHref",r.$attr[o]="xlink:href",a=null),r.$observe(t,function(t){return t?(r.$set(o,t),void(Jn&&a&&i.prop(a,r[o]))):void("href"===e&&r.$set(o,null))})}}}});var _r={$addControl:h,$$renameControl:An,$removeControl:h,$setValidity:h,$setDirty:h,$setPristine:h,$setSubmitted:h},Ir="ng-submitted";Tn.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Pr=function(e){return["$timeout",function(t){var i={name:"form",restrict:e?"EAC":"E",controller:Tn,compile:function(e){return e.addClass(fa).addClass(ua),{pre:function(e,i,r,a){if(!("action"in r)){var o=function(t){e.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),t.preventDefault()};ki(i[0],"submit",o),i.on("$destroy",function(){t(function(){Ei(i[0],"submit",o)},0,!1)})}var s=a.$$parentForm,l=a.$name;l&&(Nt(e,null,l,a,l),r.$observe(r.name?"name":"ngForm",function(t){l!==t&&(Nt(e,null,l,n,l),l=t,Nt(e,null,l,a,l),s.$$renameControl(a,l))})),i.on("$destroy",function(){s.$removeControl(a),l&&Nt(e,null,l,n,l),d(a,_r)})}}}};return i}]},Mr=Pr(),Rr=Pr(!0),Fr=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Nr=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Lr=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Or=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Br=/^(\d{4})-(\d{2})-(\d{2})$/,Ur=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Hr=/^(\d{4})-W(\d\d)$/,jr=/^(\d{4})-(\d\d)$/,zr=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,qr={text:_n,date:Rn("date",Br,Mn(Br,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Rn("datetimelocal",Ur,Mn(Ur,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Rn("time",zr,Mn(zr,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Rn("week",Hr,Pn,"yyyy-Www"),month:Rn("month",jr,Mn(jr,["yyyy","MM"]),"yyyy-MM"),number:Nn,url:Ln,email:On,radio:Bn,checkbox:Hn,hidden:h,button:h,submit:h,reset:h,file:h},Vr=["$browser","$sniffer","$filter","$parse",function(e,t,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,a,o,s){s[0]&&(qr[Gn(o.type)]||qr.text)(r,a,o,s[0],t,e,n,i)}}}}],Wr=/^(true|false|\d+)$/,Gr=function(){return{restrict:"A",priority:100,compile:function(e,t){return Wr.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Kr=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,i,r){e.$$addBindingInfo(i,r.ngBind),i=i[0],t.$watch(r.ngBind,function(e){i.textContent=e===n?"":e})}}}}],Xr=["$interpolate","$compile",function(e,t){return{compile:function(i){return t.$$addBindingClass(i),function(i,r,a){var o=e(r.attr(a.$attr.ngBindTemplate));t.$$addBindingInfo(r,o.expressions),r=r[0],a.$observe("ngBindTemplate",function(e){r.textContent=e===n?"":e})}}}}],Yr=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(i,r){var a=t(r.ngBindHtml),o=t(r.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(i),function(t,i,r){n.$$addBindingInfo(i,r.ngBindHtml),t.$watch(o,function(){i.html(e.getTrustedHtml(a(t))||"")})}}}}],Qr=m({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Jr=jn("",!0),Zr=jn("Odd",0),ea=jn("Even",1),ta=En({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),na=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ia={},ra={blur:!0,focus:!0};a("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Je("ng-"+e);ia[t]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,a){var o=n(a[t],null,!0);return function(t,n){n.on(e,function(n){var r=function(){o(t,{$event:n})};ra[e]&&i.$$phase?t.$evalAsync(r):t.$apply(r)})}}}}]});var aa=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,a,o){var s,l,c;n.$watch(r.ngIf,function(n){n?l||o(function(n,a){l=a,n[n.length++]=t.createComment(" end ngIf: "+r.ngIf+" "),s={clone:n},e.enter(n,i.parent(),i)}):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),s&&(c=le(s.clone),e.leave(c).then(function(){c=null}),s=null))})}}}],oa=["$templateRequest","$anchorScroll","$animate","$sce",function(e,t,n,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:si.noop,compile:function(r,a){var o=a.ngInclude||a.src,s=a.onload||"",l=a.autoscroll;return function(r,a,c,u,d){var f,p,h,g=0,m=function(){p&&(p.remove(),p=null),f&&(f.$destroy(),f=null),h&&(n.leave(h).then(function(){p=null}),p=h,h=null)};r.$watch(i.parseAsResourceUrl(o),function(i){var o=function(){!y(l)||l&&!r.$eval(l)||t()},c=++g;i?(e(i,!0).then(function(e){if(c===g){var t=r.$new();u.template=e;var l=d(t,function(e){m(),n.enter(e,null,a).then(o)});f=t,h=l,f.$emit("$includeContentLoaded",i),r.$eval(s)}},function(){c===g&&(m(),r.$emit("$includeContentError",i))}),r.$emit("$includeContentRequested",i)):(m(),u.template=null)})}}}}],sa=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,a){return/SVG/.test(i[0].toString())?(i.empty(),void e(ye(a.template,t).childNodes)(n,function(e){i.append(e)},{futureParentElement:i})):(i.html(a.template),void e(i.contents())(n))}}}],la=En({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),ca=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,i,r){var o=t.attr(i.$attr.ngList)||", ",s="false"!==i.ngTrim,l=s?di(o):o,c=function(e){if(!v(e)){var t=[];return e&&a(e.split(l),function(e){e&&t.push(s?di(e):e)}),t}};r.$parsers.push(c),r.$formatters.push(function(e){return ui(e)?e.join(o):n}),r.$isEmpty=function(e){return!e||!e.length}}}},ua="ng-valid",da="ng-invalid",fa="ng-pristine",pa="ng-dirty",ha="ng-untouched",ga="ng-touched",ma="ng-pending",va=new i("ngModel"),ya=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,i,r,o,s,l,c,u,d){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=d(i.name||"",!1)(e);var f,p=o(i.ngModel),g=p.assign,m=p,$=g,b=null,x=this;this.$$setOptions=function(e){if(x.$options=e,e&&e.getterSetter){var t=o(i.ngModel+"()"),n=o(i.ngModel+"($$$p)");m=function(e){var n=p(e);return S(n)&&(n=t(e)),n},$=function(e,t){S(p(e))?n(e,{$$$p:x.$modelValue}):g(e,x.$modelValue)}}else if(!p.assign)throw va("nonassign","Expression '{0}' is non-assignable. Element: {1}",i.ngModel,V(r))},this.$render=h,this.$isEmpty=function(e){return v(e)||""===e||null===e||e!==e};var C=r.inheritedData("$formController")||_r,k=0;zn({ctrl:this,$element:r,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:C,$animate:s}),this.$setPristine=function(){x.$dirty=!1,x.$pristine=!0,s.removeClass(r,pa),s.addClass(r,fa)},this.$setDirty=function(){x.$dirty=!0,x.$pristine=!1,s.removeClass(r,fa),s.addClass(r,pa),C.$setDirty()},this.$setUntouched=function(){x.$touched=!1,x.$untouched=!0,s.setClass(r,ha,ga)},this.$setTouched=function(){x.$touched=!0,x.$untouched=!1,s.setClass(r,ga,ha)},this.$rollbackViewValue=function(){l.cancel(b),x.$viewValue=x.$$lastCommittedViewValue,x.$render()},this.$validate=function(){if(!w(x.$modelValue)||!isNaN(x.$modelValue)){var e=x.$$lastCommittedViewValue,t=x.$$rawModelValue,i=x.$valid,r=x.$modelValue,a=x.$options&&x.$options.allowInvalid;x.$$runValidators(t,e,function(e){a||i===e||(x.$modelValue=e?t:n,x.$modelValue!==r&&x.$$writeModelToScope())})}},this.$$runValidators=function(e,t,i){function r(){var e=x.$$parserName||"parse";return f!==n?(f||(a(x.$validators,function(e,t){l(t,null)}),a(x.$asyncValidators,function(e,t){l(t,null)})),l(e,f),f):(l(e,null),!0)}function o(){var n=!0;return a(x.$validators,function(i,r){var a=i(e,t);n=n&&a,l(r,a)}),n?!0:(a(x.$asyncValidators,function(e,t){l(t,null)}),!1)}function s(){var i=[],r=!0;a(x.$asyncValidators,function(a,o){var s=a(e,t);if(!I(s))throw va("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);l(o,n),i.push(s.then(function(){l(o,!0)},function(e){r=!1,l(o,!1)}))}),i.length?u.all(i).then(function(){c(r)},h):c(!0)}function l(e,t){d===k&&x.$setValidity(e,t)}function c(e){d===k&&i(e)}k++;var d=k;return r()&&o()?void s():void c(!1)},this.$commitViewValue=function(){var e=x.$viewValue;l.cancel(b),(x.$$lastCommittedViewValue!==e||""===e&&x.$$hasNativeValidators)&&(x.$$lastCommittedViewValue=e,x.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){x.$modelValue!==o&&x.$$writeModelToScope()}var i=x.$$lastCommittedViewValue,r=i;if(f=v(r)?n:!0)for(var a=0;a<x.$parsers.length;a++)if(r=x.$parsers[a](r),v(r)){f=!1;break}w(x.$modelValue)&&isNaN(x.$modelValue)&&(x.$modelValue=m(e));var o=x.$modelValue,s=x.$options&&x.$options.allowInvalid;x.$$rawModelValue=r,s&&(x.$modelValue=r,t()),x.$$runValidators(r,x.$$lastCommittedViewValue,function(e){s||(x.$modelValue=e?r:n,t())})},this.$$writeModelToScope=function(){$(e,x.$modelValue),a(x.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){x.$viewValue=e,(!x.$options||x.$options.updateOnDefault)&&x.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,i=0,r=x.$options;r&&y(r.debounce)&&(n=r.debounce,w(n)?i=n:w(n[t])?i=n[t]:w(n["default"])&&(i=n["default"])),l.cancel(b),i?b=l(function(){x.$commitViewValue()},i):c.$$phase?x.$commitViewValue():e.$apply(function(){x.$commitViewValue()})},e.$watch(function(){var t=m(e);if(t!==x.$modelValue){x.$modelValue=x.$$rawModelValue=t,f=n;for(var i=x.$formatters,r=i.length,a=t;r--;)a=i[r](a);x.$viewValue!==a&&(x.$viewValue=x.$$lastCommittedViewValue=a,x.$render(),x.$$runValidators(t,a,h))}return t})}],$a=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ya,priority:1,compile:function(t){return t.addClass(fa).addClass(ha).addClass(ua),{pre:function(e,t,n,i){var r=i[0],a=i[1]||_r;r.$$setOptions(i[2]&&i[2].$options),a.$addControl(r),n.$observe("name",function(e){r.$name!==e&&a.$$renameControl(r,e)}),e.$on("$destroy",function(){a.$removeControl(r)})},post:function(t,n,i,r){var a=r[0];a.$options&&a.$options.updateOn&&n.on(a.$options.updateOn,function(e){a.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(n){a.$touched||(e.$$phase?t.$evalAsync(a.$setTouched):t.$apply(a.$setTouched))})}}}}}],ba=/(\s+|^)default(\s+|$)/,wa=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var i=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=di(this.$options.updateOn.replace(ba,function(){return i.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},xa=En({terminal:!0,priority:1e3}),Sa=["$locale","$interpolate",function(e,t){var n=/{}/g,i=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(r,o,s){function l(e){o.text(e||"")}var c,u=s.count,d=s.$attr.when&&o.attr(s.$attr.when),f=s.offset||0,p=r.$eval(d)||{},h={},g=t.startSymbol(),m=t.endSymbol(),v=g+u+"-"+f+m,y=si.noop;a(s,function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+Gn(n[2]);p[r]=o.attr(s.$attr[t])}}),a(p,function(e,i){h[i]=t(e.replace(n,v))}),r.$watch(u,function(t){var n=parseFloat(t),i=isNaN(n);i||n in p||(n=e.pluralCat(n-f)),n===c||i&&isNaN(c)||(y(),y=r.$watch(h[n],l),c=n)})}}}],Ca=["$parse","$animate",function(e,o){var s="$$NG_REMOVED",l=i("ngRepeat"),c=function(e,t,n,i,r,a,o){e[n]=i,r&&(e[r]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},u=function(e){return e.clone[0]},d=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,f){var p=f.ngRepeat,h=t.createComment(" end ngRepeat: "+p+" "),g=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!g)throw l("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var m=g[1],v=g[2],y=g[3],$=g[4];if(g=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!g)throw l("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var b=g[3]||g[1],w=g[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw l("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var x,S,C,k,E={$id:Ue};return $?x=e($):(C=function(e,t){return Ue(t)},k=function(e){return e}),function(e,t,i,f,g){x&&(S=function(t,n,i){return w&&(E[w]=t),E[b]=n,E.$index=i,x(e,E)});var m=ce();e.$watchCollection(v,function(i){var f,v,$,x,E,A,T,D,_,I,P,M,R=t[0],F=ce();if(y&&(e[y]=i),r(i))_=i,D=S||C;else{D=S||k,_=[];for(var N in i)i.hasOwnProperty(N)&&"$"!=N.charAt(0)&&_.push(N);_.sort()}for(x=_.length,P=new Array(x),f=0;x>f;f++)if(E=i===_?f:_[f],A=i[E],T=D(E,A,f),m[T])I=m[T],delete m[T],F[T]=I,P[f]=I;else{if(F[T])throw a(P,function(e){e&&e.scope&&(m[e.id]=e)}),l("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,T,A);P[f]={id:T,scope:n,clone:n},F[T]=!0}for(var L in m){if(I=m[L],M=le(I.clone),o.leave(M),M[0].parentNode)for(f=0,v=M.length;v>f;f++)M[f][s]=!0;I.scope.$destroy()}for(f=0;x>f;f++)if(E=i===_?f:_[f],A=i[E],I=P[f],I.scope){$=R;do $=$.nextSibling;while($&&$[s]);u(I)!=$&&o.move(le(I.clone),null,Zn(R)),R=d(I),c(I.scope,f,b,A,w,E,x)}else g(function(e,t){I.scope=t;var n=h.cloneNode(!1);e[e.length++]=n,o.enter(e,null,Zn(R)),R=n,I.clone=e,F[I.id]=I,c(I.scope,f,b,A,w,E,x)});m=F})}}}}],ka="ng-hide",Ea="ng-hide-animate",Aa=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngShow,function(t){e[t?"removeClass":"addClass"](n,ka,{tempClasses:Ea})})}}}],Ta=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngHide,function(t){e[t?"addClass":"removeClass"](n,ka,{tempClasses:Ea})})}}}],Da=En(function(e,t,n){e.$watchCollection(n.ngStyle,function(e,n){n&&e!==n&&a(n,function(e,n){t.css(n,"")}),e&&t.css(e)})}),_a=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var s=r.ngSwitch||r.on,l=[],c=[],u=[],d=[],f=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var i,r;for(i=0,r=u.length;r>i;++i)e.cancel(u[i]);for(u.length=0,i=0,r=d.length;r>i;++i){var s=le(c[i].clone);d[i].$destroy();var p=u[i]=e.leave(s);p.then(f(u,i))}c.length=0,d.length=0,(l=o.cases["!"+n]||o.cases["?"])&&a(l,function(n){n.transclude(function(i,r){d.push(r);var a=n.element;i[i.length++]=t.createComment(" end ngSwitchWhen: ");var o={clone:i};c.push(o),e.enter(i,a.parent(),a)})})})}}}],Ia=En({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:t})}}),Pa=En({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:t})}}),Ma=En({restrict:"EAC",link:function(e,t,n,r,a){if(!a)throw i("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",V(t));a(function(e){t.empty(),t.append(e)})}}),Ra=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var i=n.id,r=t[0].text;e.put(i,r)}}}}],Fa=i("ngOptions"),Na=m({restrict:"A",terminal:!0}),La=["$compile","$parse",function(e,i){var r=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:h};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var i,r,a=this,o={},l=s;a.databound=n.ngModel,a.init=function(e,t,n){l=e,i=t,r=n},a.addOption=function(t,n){oe(t,'"option value"'),o[t]=!0,l.$viewValue==t&&(e.val(t),r.parent()&&r.remove()),n&&n[0].hasAttribute("selected")&&(n[0].selected=!0)},a.removeOption=function(e){this.hasOption(e)&&(delete o[e],l.$viewValue===e&&this.renderUnknownOption(e))},a.renderUnknownOption=function(t){var n="? "+Ue(t)+" ?";r.val(n),e.prepend(r),e.val(n),r.prop("selected",!0)},a.hasOption=function(e){return o.hasOwnProperty(e)},t.$on("$destroy",function(){a.renderUnknownOption=h})}],link:function(s,l,c,u){function d(e,t,n,i){n.$render=function(){var e=n.$viewValue;i.hasOption(e)?(k.parent()&&k.remove(),t.val(e),""===e&&h.prop("selected",!0)):v(e)&&h?t.val(""):i.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){k.parent()&&k.remove(),n.$setViewValue(t.val())})})}function f(e,t,n){var i;n.$render=function(){var e=new He(n.$viewValue);a(t.find("option"),function(t){t.selected=y(e.get(t.value))})},e.$watch(function(){O(i,n.$viewValue)||(i=L(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];a(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function p(t,s,l){function c(e,n,i){return O[A]=i,_&&(O[_]=n),e(t,O)}function u(){t.$apply(function(){var e,n=M(t)||[];if($)e=[],a(s.val(),function(t){t=F?N[t]:t,e.push(d(t,n[t]))});else{var i=F?N[s.val()]:s.val();e=d(i,n[i])}l.$setViewValue(e),v()})}function d(e,t){if("?"===e)return n;if(""===e)return null;var i=D?D:P;return c(i,e,t)}function f(){var e,n=M(t);if(n&&ui(n)){e=new Array(n.length);for(var i=0,r=n.length;r>i;i++)e[i]=c(E,i,n[i]);return e}if(n){e={};for(var a in n)n.hasOwnProperty(a)&&(e[a]=c(E,a,n[a]))}return e}function p(e){var t;if($)if(F&&ui(e)){t=new He([]);for(var n=0;n<e.length;n++)t.put(c(F,null,e[n]),!0)}else t=new He(e);else F&&(e=c(F,null,e));return function(n,i){var r;return r=F?F:D?D:P,$?y(t.remove(c(r,n,i))):e===c(r,n,i)}}function h(){x||(t.$$postDigest(v),x=!0)}function m(e,t,n){e[t]=e[t]||0,e[t]+=n?1:-1}function v(){x=!1;var e,n,i,r,u,d,f,h,v,b,k,A,T,D,P,R,B,U={"":[]},H=[""],j=l.$viewValue,z=M(t)||[],q=_?o(z):z,V={},W=p(j),G=!1;for(N={},A=0;b=q.length,b>A;A++)f=A,_&&(f=q[A],"$"===f.charAt(0))||(h=z[f],e=c(I,f,h)||"",(n=U[e])||(n=U[e]=[],H.push(e)),T=W(f,h),G=G||T,R=c(E,f,h),R=y(R)?R:"",B=F?F(t,O):_?q[A]:A,F&&(N[B]=f),n.push({id:B,label:R,selected:T}));for($||(w||null===j?U[""].unshift({id:"",label:"",selected:!G}):G||U[""].unshift({id:"?",label:"",selected:!0})),k=0,v=H.length;v>k;k++){for(e=H[k],n=U[e],L.length<=k?(r={element:C.clone().attr("label",e),label:n.label},u=[r],L.push(u),s.append(r.element)):(u=L[k],r=u[0],r.label!=e&&r.element.attr("label",r.label=e)),D=null,A=0,b=n.length;b>A;A++)i=n[A],(d=u[A+1])?(D=d.element,d.label!==i.label&&(m(V,d.label,!1),m(V,i.label,!0),D.text(d.label=i.label),D.prop("label",d.label)),d.id!==i.id&&D.val(d.id=i.id),D[0].selected!==i.selected&&(D.prop("selected",d.selected=i.selected),Jn&&D.prop("selected",d.selected))):(""===i.id&&w?P=w:(P=S.clone()).val(i.id).prop("selected",i.selected).attr("selected",i.selected).prop("label",i.label).text(i.label),u.push(d={element:P,label:i.label,id:i.id,selected:i.selected}),m(V,i.label,!0),D?D.after(P):r.element.append(P),D=P);for(A++;u.length>A;)i=u.pop(),m(V,i.label,!1),i.element.remove()}for(;L.length>k;){for(n=L.pop(),A=1;A<n.length;++A)m(V,n[A].label,!1);n[0].element.remove()}a(V,function(e,t){e>0?g.addOption(t):0>e&&g.removeOption(t)})}var k;if(!(k=b.match(r)))throw Fa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",b,V(s));var E=i(k[2]||k[1]),A=k[4]||k[6],T=/ as /.test(k[0])&&k[1],D=T?i(T):null,_=k[5],I=i(k[3]||""),P=i(k[2]?k[1]:A),M=i(k[7]),R=k[8],F=R?i(k[8]):null,N={},L=[[{element:s,label:""}]],O={};w&&(e(w)(t),w.removeClass("ng-scope"),w.remove()),s.empty(),s.on("change",u),l.$render=v,t.$watchCollection(M,h),t.$watchCollection(f,h),$&&t.$watchCollection(function(){return l.$modelValue},h)}if(u[1]){for(var h,g=u[0],m=u[1],$=c.multiple,b=c.ngOptions,w=!1,x=!1,S=Zn(t.createElement("option")),C=Zn(t.createElement("optgroup")),k=S.clone(),E=0,A=l.children(),T=A.length;T>E;E++)if(""===A[E].value){h=w=A.eq(E);break}g.init(m,w,k),$&&(m.$isEmpty=function(e){return!e||0===e.length}),b?p(s,l,m):$?f(s,l,m):d(s,l,m,g)}}}}],Oa=["$interpolate",function(e){var t={addOption:h,removeOption:h};return{restrict:"E",priority:100,compile:function(n,i){if(v(i.value)){var r=e(n.text(),!0);r||i.$set("value",n.text())}return function(e,n,i){var a="$selectController",o=n.parent(),s=o.data(a)||o.parent().data(a);s&&s.databound||(s=t),r?e.$watch(r,function(e,t){i.$set("value",e),t!==e&&s.removeOption(t),s.addOption(e,n)}):s.addOption(i.value,n),n.on("$destroy",function(){s.removeOption(i.value)})}}}}],Ba=m({restrict:"E",terminal:!1}),Ua=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i&&(n.required=!0,i.$validators.required=function(e,t){return!n.required||!i.$isEmpty(t)},n.$observe("required",function(){i.$validate()}))}}},Ha=function(){return{restrict:"A",require:"?ngModel",
link:function(e,t,r,a){if(a){var o,s=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(b(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,V(t));o=e||n,a.$validate()}),a.$validators.pattern=function(e){return a.$isEmpty(e)||v(o)||o.test(e)}}}}},ja=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=-1;n.$observe("maxlength",function(e){var t=f(e);r=isNaN(t)?-1:t,i.$validate()}),i.$validators.maxlength=function(e,t){return 0>r||i.$isEmpty(t)||t.length<=r}}}}},za=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=0;n.$observe("minlength",function(e){r=f(e)||0,i.$validate()}),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=r}}}}};e.angular.bootstrap||(ie(),pe(si),Zn(t).ready(function(){J(t,Z)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(e,t,n){"use strict";t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var e="$$ngAnimateChildren";return function(n,i,r){var a=r.ngAnimateChildren;t.isString(a)&&0===a.length?i.data(e,!0):n.$watch(a,function(t){i.data(e,!!t)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){var n=t[0].body;return function(t){return e(function(){n.offsetWidth+1;t()})}}]).config(["$provide","$animateProvider",function(i,r){function a(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==m)return n}}function o(e){return e&&t.element(e)}function s(e){return t.element(a(e))}function l(e,t){return a(e)==a(t)}var c,u=t.noop,d=t.forEach,f=r.$$selectors,p=t.isArray,h=t.isString,g=t.isObject,m=1,v="$$ngAnimateState",y="$$ngAnimateChildren",$="ng-animate",b={running:!0};i.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(e,n,i,m,w,x,S,C,k,E){function A(e,t){var n=e.data(v)||{};return t&&(n.running=!0,n.structural=!0,e.data(v,n)),n.disabled||n.running&&n.structural}function T(e){var t,i=n.defer();return i.promise.$$cancelFn=function(){t&&t()},S.$$postDigest(function(){t=e(function(){i.resolve()})}),i.promise}function D(e){return g(e)?(e.tempClasses&&h(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e):void 0}function _(e,t,n){n=n||{};var i={};d(n,function(e,t){d(t.split(" "),function(t){i[t]=e})});var r=Object.create(null);d((e.attr("class")||"").split(/\s+/),function(e){r[e]=!0});var a=[],o=[];return d(t&&t.classes||[],function(e,t){var n=r[t],s=i[t]||{};e===!1?(n||"addClass"==s.event)&&o.push(t):e===!0&&(n&&"removeClass"!=s.event||a.push(t))}),a.length+o.length>0&&[a.join(" "),o.join(" ")]}function I(e){if(e){var t=[],n={},r=e.substr(1).split(".");(m.transitions||m.animations)&&t.push(i.get(f[""]));for(var a=0;a<r.length;a++){var o=r[a],s=f[o];s&&!n[o]&&(t.push(i.get(s)),n[o]=!0)}return t}}function P(e,n,i,r){function a(e,t){var n=e[t],i=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];return n||i?("leave"==t&&(i=n,n=null),x.push({event:t,fn:n}),$.push({event:t,fn:i}),!0):void 0}function o(t,n,a){function o(e){if(n){if((n[e]||u)(),++f<s.length)return;n=null}a()}var s=[];d(t,function(e){e.fn&&s.push(e)});var f=0;d(s,function(t,a){var s=function(){o(a)};switch(t.event){case"setClass":n.push(t.fn(e,l,c,s,r));break;case"animate":n.push(t.fn(e,i,r.from,r.to,s));break;case"addClass":n.push(t.fn(e,l||i,s,r));break;case"removeClass":n.push(t.fn(e,c||i,s,r));break;default:n.push(t.fn(e,s,r))}}),n&&0===n.length&&a()}var s=e[0];if(s){r&&(r.to=r.to||{},r.from=r.from||{});var l,c;p(i)&&(l=i[0],c=i[1],l?c?i=l+" "+c:(i=l,n="addClass"):(i=c,n="removeClass"));var f="setClass"==n,h=f||"addClass"==n||"removeClass"==n||"animate"==n,g=e.attr("class"),m=g+" "+i;if(U(m)){var v=u,y=[],$=[],b=u,w=[],x=[],S=(" "+m).replace(/\s+/g,".");return d(I(S),function(e){var t=a(e,n);!t&&f&&(a(e,"addClass"),a(e,"removeClass"))}),{node:s,event:n,className:i,isClassBased:h,isSetClassOperation:f,applyStyles:function(){r&&e.css(t.extend(r.from||{},r.to||{}))},before:function(e){v=e,o($,y,function(){v=u,e()})},after:function(e){b=e,o(x,w,function(){b=u,e()})},cancel:function(){y&&(d(y,function(e){(e||u)(!0)}),v(!0)),w&&(d(w,function(e){(e||u)(!0)}),b(!0))}}}}}function M(e,n,i,r,a,o,s,l){function f(t){var r="$animate:"+t;S&&S[r]&&S[r].length>0&&x(function(){i.triggerHandler(r,{event:e,className:n})})}function p(){f("before")}function h(){f("after")}function g(){f("close"),l()}function m(){m.hasBeenRun||(m.hasBeenRun=!0,o())}function y(){if(!y.hasBeenRun){w&&w.applyStyles(),y.hasBeenRun=!0,s&&s.tempClasses&&d(s.tempClasses,function(e){c.removeClass(i,e)});var t=i.data(v);t&&(w&&w.isClassBased?F(i,n):(x(function(){var t=i.data(v)||{};M==t.index&&F(i,n,e)}),i.data(v,t))),g()}}var b=u,w=P(i,e,n,s);if(!w)return m(),p(),h(),y(),b;e=w.event,n=w.className;var S=t.element._data(w.node);if(S=S&&S.events,r||(r=a?a.parent():i.parent()),N(i,r))return m(),p(),h(),y(),b;var C=i.data(v)||{},k=C.active||{},E=C.totalActive||0,A=C.last,T=!1;if(E>0){var D=[];if(w.isClassBased){if("setClass"==A.event)D.push(A),F(i,n);else if(k[n]){var _=k[n];_.event==e?T=!0:(D.push(_),F(i,n))}}else if("leave"==e&&k["ng-leave"])T=!0;else{for(var I in k)D.push(k[I]);C={},F(i,!0)}D.length>0&&d(D,function(e){e.cancel()})}if(!w.isClassBased||w.isSetClassOperation||"animate"==e||T||(T="addClass"==e==i.hasClass(n)),T)return m(),p(),h(),g(),b;k=C.active||{},E=C.totalActive||0,"leave"==e&&i.one("$destroy",function(e){var n=t.element(this),i=n.data(v);if(i){var r=i.active["ng-leave"];r&&(r.cancel(),F(n,"ng-leave"))}}),c.addClass(i,$),s&&s.tempClasses&&d(s.tempClasses,function(e){c.addClass(i,e)});var M=O++;return E++,k[n]=w,i.data(v,{last:w,active:k,index:M,totalActive:E}),p(),w.before(function(t){var r=i.data(v);t=t||!r||!r.active[n]||w.isClassBased&&r.active[n].event!=e,m(),t===!0?y():(h(),w.after(y))}),w.cancel}function R(e){var n=a(e);if(n){var i=t.isFunction(n.getElementsByClassName)?n.getElementsByClassName($):n.querySelectorAll("."+$);d(i,function(e){e=t.element(e);var n=e.data(v);n&&n.active&&d(n.active,function(e){e.cancel()})})}}function F(e,t){if(l(e,w))b.disabled||(b.running=!1,b.structural=!1);else if(t){var n=e.data(v)||{},i=t===!0;!i&&n.active&&n.active[t]&&(n.totalActive--,delete n.active[t]),(i||!n.totalActive)&&(c.removeClass(e,$),e.removeData(v))}}function N(e,n){if(b.disabled)return!0;if(l(e,w))return b.running;var i,r,a;do{if(0===n.length)break;var o=l(n,w),s=o?b:n.data(v)||{};if(s.disabled)return!0;if(o&&(a=!0),i!==!1){var c=n.data(y);t.isDefined(c)&&(i=c)}r=r||s.running||s.last&&!s.last.isClassBased}while(n=n.parent());return!a||!i&&r}c=E,w.data(v,b);var L=S.$watch(function(){return k.totalPendingRequests},function(e,t){0===e&&(L(),S.$$postDigest(function(){S.$$postDigest(function(){b.running=!1})}))}),O=0,B=r.classNameFilter(),U=B?function(e){return B.test(e)}:function(){return!0};return{animate:function(e,t,n,i,r){return i=i||"ng-inline-animate",r=D(r)||{},r.from=n?t:null,r.to=n?n:t,T(function(t){return M("animate",i,s(e),null,null,u,r,t)})},enter:function(n,i,r,a){return a=D(a),n=t.element(n),i=o(i),r=o(r),A(n,!0),e.enter(n,i,r),T(function(e){return M("enter","ng-enter",s(n),i,r,u,a,e)})},leave:function(n,i){return i=D(i),n=t.element(n),R(n),A(n,!0),T(function(t){return M("leave","ng-leave",s(n),null,null,function(){e.leave(n)},i,t)})},move:function(n,i,r,a){return a=D(a),n=t.element(n),i=o(i),r=o(r),R(n),A(n,!0),e.move(n,i,r),T(function(e){return M("move","ng-move",s(n),i,r,u,a,e)})},addClass:function(e,t,n){return this.setClass(e,t,[],n)},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},setClass:function(n,i,r,o){o=D(o);var l="$$animateClasses";if(n=t.element(n),n=s(n),A(n))return e.$$setClassImmediately(n,i,r,o);var c,u=n.data(l),f=!!u;return u||(u={},u.classes={}),c=u.classes,i=p(i)?i:i.split(" "),d(i,function(e){e&&e.length&&(c[e]=!0)}),r=p(r)?r:r.split(" "),d(r,function(e){e&&e.length&&(c[e]=!1)}),f?(o&&u.options&&(u.options=t.extend(u.options||{},o)),u.promise):(n.data(l,u={classes:c,options:o}),u.promise=T(function(t){var i=n.parent(),r=a(n),o=r.parentNode;if(!o||o.$$NG_REMOVED||r.$$NG_REMOVED)return void t();var s=n.data(l);n.removeData(l);var c=n.data(v)||{},u=_(n,s,c.active);return u?M("setClass",u,n,i,null,function(){u[0]&&e.$$addClassImmediately(n,u[0]),u[1]&&e.$$removeClassImmediately(n,u[1])},s.options,t):t()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)F(t);else{var n=t.data(v)||{};n.disabled=!0,t.data(v,n)}break;case 1:b.disabled=!e;break;default:e=!b.disabled}return!!e}}}]),r.register("",["$window","$sniffer","$timeout","$$animateReflow",function(i,r,o,s){function l(){F||(F=s(function(){K=[],F=null,W={}}))}function f(e,t){F&&F(),K.push(t),F=s(function(){d(K,function(e){e()}),K=[],F=null,W={}})}function g(e,n){var i=a(e);e=t.element(i),Q.push(e);var r=Date.now()+n;Y>=r||(o.cancel(X),Y=r,X=o(function(){v(Q),Q=[]},n,!1))}function v(e){d(e,function(e){var t=e.data(j);t&&d(t.closeAnimationFns,function(e){e()})})}function y(e,t){var n=t?W[t]:null;if(!n){var r=0,a=0,o=0,s=0;d(e,function(e){if(e.nodeType==m){var t=i.getComputedStyle(e)||{},n=t[_+N];r=Math.max($(n),r);var l=t[_+O];a=Math.max($(l),a);t[P+O];s=Math.max($(t[P+O]),s);var c=$(t[P+N]);c>0&&(c*=parseInt(t[P+B],10)||1),o=Math.max(c,o)}}),n={total:0,transitionDelay:a,transitionDuration:r,animationDelay:s,animationDuration:o},t&&(W[t]=n)}return n}function $(e){var t=0,n=h(e)?e.split(/\s*,\s*/):[];return d(n,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function b(e){var t=e.parent(),n=t.data(H);return n||(t.data(H,++G),n=G),n+"-"+a(e).getAttribute("class")}function w(e,t,n,i){var r=["ng-enter","ng-leave","ng-move"].indexOf(n)>=0,o=b(t),s=o+" "+n,l=W[s]?++W[s].total:0,u={};if(l>0){var d=n+"-stagger",f=o+" "+d,p=!W[f];p&&c.addClass(t,d),u=y(t,f),p&&c.removeClass(t,d)}c.addClass(t,n);var h=t.data(j)||{},g=y(t,s),m=g.transitionDuration,v=g.animationDuration;if(r&&0===m&&0===v)return c.removeClass(t,n),!1;var $=i||r&&m>0,w=v>0&&u.animationDelay>0&&0===u.animationDuration,x=h.closeAnimationFns||[];t.data(j,{stagger:u,cacheKey:s,running:h.running||0,itemIndex:l,blockTransition:$,closeAnimationFns:x});var k=a(t);return $&&(S(k,!0),i&&t.css(i)),w&&C(k,!0),!0}function x(e,t,n,i,r){function s(){t.off(O,l),c.removeClass(t,p),c.removeClass(t,h),N&&o.cancel(N),T(t,n);var e=a(t);for(var i in v)e.style.removeProperty(v[i])}function l(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||t.timeStamp||Date.now(),r=parseFloat(t.elapsedTime.toFixed(z));Math.max(n-L,0)>=P&&r>=D&&i()}var u=a(t),f=t.data(j);if(-1==u.getAttribute("class").indexOf(n)||!f)return void i();var p="",h="";d(n.split(" "),function(e,t){var n=(t>0?" ":"")+e;p+=n+"-active",h+=n+"-pending"});var m="",v=[],$=f.itemIndex,b=f.stagger,w=0;if($>0){var x=0;b.transitionDelay>0&&0===b.transitionDuration&&(x=b.transitionDelay*$);var k=0;b.animationDelay>0&&0===b.animationDuration&&(k=b.animationDelay*$,v.push(R+"animation-play-state")),w=Math.round(100*Math.max(x,k))/100}w||(c.addClass(t,p),f.blockTransition&&S(u,!1));var E=f.cacheKey+" "+p,A=y(t,E),D=Math.max(A.transitionDuration,A.animationDuration);if(0===D)return c.removeClass(t,p),T(t,n),void i();!w&&r&&Object.keys(r).length>0&&(A.transitionDuration||(t.css("transition",A.animationDuration+"s linear all"),v.push("transition")),t.css(r));var _=Math.max(A.transitionDelay,A.animationDelay),P=_*V;if(v.length>0){var F=u.getAttribute("style")||"";";"!==F.charAt(F.length-1)&&(F+=";"),u.setAttribute("style",F+" "+m)}var N,L=Date.now(),O=M+" "+I,B=(_+D)*q,U=(w+B)*V;return w>0&&(c.addClass(t,h),N=o(function(){N=null,A.transitionDuration>0&&S(u,!1),A.animationDuration>0&&C(u,!1),c.addClass(t,p),c.removeClass(t,h),r&&(0===A.transitionDuration&&t.css("transition",A.animationDuration+"s linear all"),t.css(r),v.push("transition"))},w*V,!1)),t.on(O,l),f.closeAnimationFns.push(function(){s(),i()}),f.running++,g(t,U),s}function S(e,t){e.style[_+L]=t?"none":""}function C(e,t){e.style[P+U]=t?"paused":""}function k(e,t,n,i){return w(e,t,n,i)?function(e){e&&T(t,n)}:void 0}function E(e,t,n,i,r){return t.data(j)?x(e,t,n,i,r):(T(t,n),void i())}function A(e,t,n,i,r){var a=k(e,t,n,r.from);if(!a)return l(),void i();var o=a;return f(t,function(){o=E(e,t,n,i,r.to)}),function(e){(o||u)(e)}}function T(e,t){c.removeClass(e,t);var n=e.data(j);n&&(n.running&&n.running--,n.running&&0!==n.running||e.removeData(j))}function D(e,t){var n="";return e=p(e)?e:e.split(/\s+/),d(e,function(e,i){e&&e.length>0&&(n+=(i>0?" ":"")+e+t)}),n}var _,I,P,M,R="";e.ontransitionend===n&&e.onwebkittransitionend!==n?(R="-webkit-",_="WebkitTransition",I="webkitTransitionEnd transitionend"):(_="transition",I="transitionend"),e.onanimationend===n&&e.onwebkitanimationend!==n?(R="-webkit-",P="WebkitAnimation",M="webkitAnimationEnd animationend"):(P="animation",M="animationend");var F,N="Duration",L="Property",O="Delay",B="IterationCount",U="PlayState",H="$$ngAnimateKey",j="$$ngAnimateCSS3Data",z=3,q=1.5,V=1e3,W={},G=0,K=[],X=null,Y=0,Q=[];return{animate:function(e,t,n,i,r,a){return a=a||{},a.from=n,a.to=i,A("animate",e,t,r,a)},enter:function(e,t,n){return n=n||{},A("enter",e,"ng-enter",t,n)},leave:function(e,t,n){return n=n||{},A("leave",e,"ng-leave",t,n)},move:function(e,t,n){return n=n||{},A("move",e,"ng-move",t,n)},beforeSetClass:function(e,t,n,i,r){r=r||{};var a=D(n,"-remove")+" "+D(t,"-add"),o=k("setClass",e,a,r.from);return o?(f(e,i),o):(l(),void i())},beforeAddClass:function(e,t,n,i){i=i||{};var r=k("addClass",e,D(t,"-add"),i.from);return r?(f(e,n),r):(l(),void n())},beforeRemoveClass:function(e,t,n,i){i=i||{};var r=k("removeClass",e,D(t,"-remove"),i.from);return r?(f(e,n),r):(l(),void n())},setClass:function(e,t,n,i,r){r=r||{},n=D(n,"-remove"),t=D(t,"-add");var a=n+" "+t;return E("setClass",e,a,i,r.to)},addClass:function(e,t,n,i){return i=i||{},E("addClass",e,D(t,"-add"),n,i.to)},removeClass:function(e,t,n,i){return i=i||{},E("removeClass",e,D(t,"-remove"),n,i.to)}}}])}])}(window,window.angular),angular.module("ngNumeraljs",[]).provider("$numeraljsConfig",function(){var e={};this.setFormat=function(t,n){e[t]=n},this.setDefaultFormat=function(e){numeral.defaultFormat(e)},this.setLanguage=function(e,t){numeral.language(e,t)},this.setCurrentLanguage=function(e){numeral.language(e)},this.$get=function(){return{customFormat:function(t){return e[t]||t}}}}).filter("numeraljs",["$numeraljsConfig",function(e){return function(t,n){return null==t?t:(n=e.customFormat(n),numeral(t).format(n))}}]),function(e,t,n){"use strict";function i(){function e(e,n){return t.extend(Object.create(e),n)}function n(e,t){var n=t.caseInsensitiveMatch,i={originalPath:e,regexp:e},r=i.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,n,i){var a="?"===i?i:null,o="*"===i?i:null;return r.push({name:n,optional:!!a}),t=t||"",""+(a?"":t)+"(?:"+(a?t:"")+(o&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),i.regexp=new RegExp("^"+e+"$",n?"i":""),i}var i={};this.when=function(e,r){var a=t.copy(r);if(t.isUndefined(a.reloadOnSearch)&&(a.reloadOnSearch=!0),t.isUndefined(a.caseInsensitiveMatch)&&(a.caseInsensitiveMatch=this.caseInsensitiveMatch),i[e]=t.extend(a,e&&n(e,a)),e){var o="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";i[o]=t.extend({redirectTo:e},n(o,a))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(n,r,a,o,s,c,u){function d(e,t){var n=t.keys,i={};if(!t.regexp)return null;var r=t.regexp.exec(e);if(!r)return null;for(var a=1,o=r.length;o>a;++a){var s=n[a-1],l=r[a];s&&l&&(i[s.name]=l)}return i}function f(e){var i=$.current;m=h(),v=m&&i&&m.$$route===i.$$route&&t.equals(m.pathParams,i.pathParams)&&!m.reloadOnSearch&&!y,v||!i&&!m||n.$broadcast("$routeChangeStart",m,i).defaultPrevented&&e&&e.preventDefault()}function p(){var e=$.current,i=m;v?(e.params=i.params,t.copy(e.params,a),n.$broadcast("$routeUpdate",e)):(i||e)&&(y=!1,$.current=i,i&&i.redirectTo&&(t.isString(i.redirectTo)?r.path(g(i.redirectTo,i.params)).search(i.params).replace():r.url(i.redirectTo(i.pathParams,r.path(),r.search())).replace()),o.when(i).then(function(){if(i){var e,n,r=t.extend({},i.resolve);return t.forEach(r,function(e,n){r[n]=t.isString(e)?s.get(e):s.invoke(e,null,null,n)}),t.isDefined(e=i.template)?t.isFunction(e)&&(e=e(i.params)):t.isDefined(n=i.templateUrl)&&(t.isFunction(n)&&(n=n(i.params)),n=u.getTrustedResourceUrl(n),t.isDefined(n)&&(i.loadedTemplateUrl=n,e=c(n))),t.isDefined(e)&&(r.$template=e),o.all(r)}}).then(function(r){i==$.current&&(i&&(i.locals=r,t.copy(i.params,a)),n.$broadcast("$routeChangeSuccess",i,e))},function(t){i==$.current&&n.$broadcast("$routeChangeError",i,e,t)}))}function h(){var n,a;return t.forEach(i,function(i,o){!a&&(n=d(r.path(),i))&&(a=e(i,{params:t.extend({},r.search(),n),pathParams:n}),a.$$route=i)}),a||i[null]&&e(i[null],{params:{},pathParams:{}})}function g(e,n){var i=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)i.push(e);else{var r=e.match(/(\w+)(?:[?*])?(.*)/),a=r[1];i.push(n[a]),i.push(r[2]||""),delete n[a]}}),i.join("")}var m,v,y=!1,$={routes:i,reload:function(){y=!0,n.$evalAsync(function(){f(),p()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw l("norout","Tried updating route when with no current route");var n={},i=this;t.forEach(Object.keys(e),function(t){i.current.pathParams[t]||(n[t]=e[t])}),e=t.extend({},this.current.params,e),r.path(g(this.current.$$route.originalPath,e)),r.search(t.extend({},r.search(),n))}};return n.$on("$locationChangeStart",f),n.$on("$locationChangeSuccess",p),$}]}function r(){this.$get=function(){return{}}}function a(e,n,i){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(r,a,o,s,l){function c(){p&&(i.cancel(p),p=null),d&&(d.$destroy(),d=null),f&&(p=i.leave(f),p.then(function(){p=null}),f=null)}function u(){var o=e.current&&e.current.locals,s=o&&o.$template;if(t.isDefined(s)){var u=r.$new(),p=e.current,m=l(u,function(e){i.enter(e,null,f||a).then(function(){!t.isDefined(h)||h&&!r.$eval(h)||n()}),c()});f=m,d=p.scope=u,d.$emit("$viewContentLoaded"),d.$eval(g)}else c()}var d,f,p,h=o.autoscroll,g=o.onload||"";r.$on("$routeChangeSuccess",u),u()}}}function o(e,t,n){return{restrict:"ECA",priority:-400,link:function(i,r){var a=n.current,o=a.locals;r.html(o.$template);var s=e(r.contents());if(a.controller){o.$scope=i;var l=t(a.controller,o);a.controllerAs&&(i[a.controllerAs]=l),r.data("$ngControllerController",l),r.children().data("$ngControllerController",l)}s(i)}}}var s=t.module("ngRoute",["ng"]).provider("$route",i),l=t.$$minErr("ngRoute");s.provider("$routeParams",r),s.directive("ngView",a),s.directive("ngView",o),a.$inject=["$route","$anchorScroll","$animate"],o.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,t,n){"use strict";function i(){this.$get=["$$sanitizeUri",function(e){return function(t){var n=[];return o(t,c(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function r(e){var n=[],i=c(n,t.noop);return i.chars(e),n.join("")}function a(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function o(e,n){function i(e,i,a,o){if(i=t.lowercase(i),k[i])for(;$.last()&&E[$.last()];)r("",$.last());C[i]&&$.last()==i&&r("",i),o=w[i]||!!o,o||$.push(i);var l={};a.replace(p,function(e,t,n,i,r){var a=n||i||r||"";l[t]=s(a)}),n.start&&n.start(i,l,o)}function r(e,i){var r,a=0;if(i=t.lowercase(i))for(a=$.length-1;a>=0&&$[a]!=i;a--);if(a>=0){for(r=$.length-1;r>=a;r--)n.end&&n.end($[r]);$.length=a}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var a,o,l,c,$=[],b=e;for($.last=function(){return $[$.length-1]};e;){if(c="",o=!0,$.last()&&T[$.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+$.last()+"[^>]*>","i"),function(e,t){return t=t.replace(m,"$1").replace(y,"$1"),n.chars&&n.chars(s(t)),""}),r("",$.last())):(0===e.indexOf("<!--")?(a=e.indexOf("--",4),a>=0&&e.lastIndexOf("-->",a)===a&&(n.comment&&n.comment(e.substring(4,a)),e=e.substring(a+3),o=!1)):v.test(e)?(l=e.match(v),l&&(e=e.replace(l[0],""),o=!1)):g.test(e)?(l=e.match(f),l&&(e=e.substring(l[0].length),l[0].replace(f,r),o=!1)):h.test(e)&&(l=e.match(d),l?(l[4]&&(e=e.substring(l[0].length),l[0].replace(d,i)),o=!1):(c+="<",e=e.substring(1))),o&&(a=e.indexOf("<"),c+=0>a?e:e.substring(0,a),e=0>a?"":e.substring(a),n.chars&&n.chars(s(c)))),e==b)throw u("badparse","The sanitizer was unable to parse the following block of html: {0}",e);b=e}r()}function s(e){return e?(R.innerHTML=e.replace(/</g,"&lt;"),R.textContent):""}function l(e){return e.replace(/&/g,"&amp;").replace($,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(b,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(e,n){var i=!1,r=t.bind(e,e.push);return{start:function(e,a,o){e=t.lowercase(e),!i&&T[e]&&(i=e),i||D[e]!==!0||(r("<"),r(e),t.forEach(a,function(i,a){var o=t.lowercase(a),s="img"===e&&"src"===o||"background"===o;M[o]!==!0||_[o]===!0&&!n(i,s)||(r(" "),r(a),r('="'),r(l(i)),r('"'))}),r(o?"/>":">"))},end:function(e){e=t.lowercase(e),i||D[e]!==!0||(r("</"),r(e),r(">")),e==i&&(i=!1)},chars:function(e){i||r(l(e))}}}var u=t.$$minErr("$sanitize"),d=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,f=/^<\/\s*([\w:-]+)[^>]*>/,p=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,h=/^</,g=/^<\//,m=/<!--(.*?)-->/g,v=/<!DOCTYPE([^>]*?)>/i,y=/<!\[CDATA\[(.*?)]]>/g,$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/([^\#-~| |!])/g,w=a("area,br,col,hr,img,wbr"),x=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),S=a("rp,rt"),C=t.extend({},S,x),k=t.extend({},x,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),E=t.extend({},S,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),A=a("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),T=a("script,style"),D=t.extend({},w,k,E,C,A),_=a("background,cite,href,longdesc,src,usemap,xlink:href"),I=a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),P=a("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),M=t.extend({},_,P,I),R=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",i),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"â€â€™]/,i=/^mailto:/;return function(a,o){function s(e){e&&p.push(r(e))}function l(e,n){p.push("<a "),t.isDefined(o)&&p.push('target="',o,'" '),p.push('href="',e.replace(/"/g,"&quot;"),'">'),s(n),p.push("</a>")}if(!a)return a;for(var c,u,d,f=a,p=[];c=f.match(n);)u=c[0],c[2]||c[4]||(u=(c[3]?"http://":"mailto:")+u),d=c.index,s(f.substr(0,d)),l(u,c[0].replace(i,"")),f=f.substring(d+c[0].length);return s(f),e(p.join(""))}}])}(window,window.angular);var duScrollDefaultEasing=function(e){"use strict";return.5>e?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2};angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset",function(e,t,n,i,r,a,o){"use strict";var s={},l=function(e){return"undefined"!=typeof HTMLDocument&&e instanceof HTMLDocument||e.nodeType&&e.nodeType===e.DOCUMENT_NODE},c=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e.nodeType&&e.nodeType===e.ELEMENT_NODE},u=function(e){return c(e)||l(e)?e:e[0]};s.duScrollTo=function(t,n,i,r){var a;if(angular.isElement(t)?a=this.duScrollToElement:angular.isDefined(i)&&(a=this.duScrollToAnimated),a)return a.apply(this,arguments);var o=u(this);return l(o)?e.scrollTo(t,n):(o.scrollLeft=t,void(o.scrollTop=n))};var d,f;s.duScrollToAnimated=function(e,a,o,s){o&&!s&&(s=r);var l=this.duScrollLeft(),c=this.duScrollTop(),u=Math.round(e-l),p=Math.round(a-c),h=null,g=0,m=this,v="scroll mousedown mousewheel touchmove keydown",y=function(e){(!e||g&&e.which>0)&&(m.unbind(v,y),n(d),f.reject(),d=null)};if(d&&y(),f=t.defer(),0===o||!u&&!p)return 0===o&&m.duScrollTo(e,a),f.resolve(),f.promise;var $=function(e){null===h&&(h=e),g=e-h;var t=g>=o?1:s(g/o);m.scrollTo(l+Math.ceil(u*t),c+Math.ceil(p*t)),1>t?d=i($):(m.unbind(v,y),d=null,f.resolve())};return m.duScrollTo(l,c),m.bind(v,y),d=i($),f.promise},s.duScrollToElement=function(e,t,n,i){var r=u(this);(!angular.isNumber(t)||isNaN(t))&&(t=o);var a=this.duScrollTop()+u(e).getBoundingClientRect().top-t;return c(r)&&(a-=r.getBoundingClientRect().top),this.duScrollTo(0,a,n,i)},s.duScrollLeft=function(t,n,i){if(angular.isNumber(t))return this.duScrollTo(t,this.duScrollTop(),n,i);var r=u(this);return l(r)?e.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:r.scrollLeft},s.duScrollTop=function(t,n,i){if(angular.isNumber(t))return this.duScrollTo(this.duScrollLeft(),t,n,i);var r=u(this);return l(r)?e.scrollY||document.documentElement.scrollTop||document.body.scrollTop:r.scrollTop},s.duScrollToElementAnimated=function(e,t,n,i){return this.duScrollToElement(e,t,n||a,i)},s.duScrollTopAnimated=function(e,t,n){return this.duScrollTop(e,t||a,n)},s.duScrollLeftAnimated=function(e,t,n){return this.duScrollLeft(e,t||a,n)},angular.forEach(s,function(e,t){angular.element.prototype[t]=e;var n=t.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[n])&&(angular.element.prototype[n]=e)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(e){"use strict";var t=["webkit","moz","o","ms"];return function(n,i){if(e[n])return e[n];for(var r,a=n.substr(0,1).toUpperCase()+n.substr(1),o=0;o<t.length;o++)if(r=t[o]+a,e[r])return e[r];return i}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(e,t){"use strict";var n=0,i=function(e,i){var r=(new Date).getTime(),a=Math.max(0,16-(r-n)),o=t(function(){e(r+a)},a);return n=r+a,o};return e("requestAnimationFrame",i)}]).factory("cancelAnimation",["polyfill","$timeout",function(e,t){"use strict";var n=function(e){t.cancel(e)};return e("cancelAnimationFrame",n)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait",function(e,t,n,i,r,a,o){"use strict";var s=function(r){var s=!1,l=!1,c=function(){l=!1;var t,o=r.container,s=o[0],c=0;"undefined"!=typeof HTMLElement&&s instanceof HTMLElement||s.nodeType&&s.nodeType===s.ELEMENT_NODE?(c=s.getBoundingClientRect().top,t=Math.round(s.scrollTop+s.clientHeight)>=s.scrollHeight):t=Math.round(n.pageYOffset+n.innerHeight)>=i[0].body.scrollHeight;var u,d,f,p,h,g,m=t?"bottom":"top";for(p=r.spies,d=r.currentlyActive,f=void 0,u=0;u<p.length;u++)h=p[u],g=h.getTargetPosition(),g&&(t||g.top+h.offset-c<20&&(a||-1*g.top+c)<g.height)&&(!f||f[m]<g[m])&&(f={spy:h},f[m]=g[m]);f&&(f=f.spy),d===f||a&&!f||(d&&(d.$element.removeClass("active"),e.$broadcast("duScrollspy:becameInactive",d.$element)),f&&(f.$element.addClass("active"),e.$broadcast("duScrollspy:becameActive",f.$element)),r.currentlyActive=f)};return o?function(){s?l=!0:(c(),s=t(function(){s=!1,l&&c()},o,!1))}:c},l={},c=function(e){var t=e.$id,n={spies:[]};return n.handler=s(n),l[t]=n,e.$on("$destroy",function(){u(e)}),t},u=function(e){var t=e.$id,n=l[t],i=n.container;i&&i.off("scroll",n.handler),delete l[t]},d=c(e),f=function(e){return l[e.$id]?l[e.$id]:e.$parent?f(e.$parent):l[d]},p=function(e){var t,n,i=e.$scope;if(i)return f(i);for(n in l)if(t=l[n],-1!==t.spies.indexOf(e))return t},h=function(e){for(;e.parentNode;)if(e=e.parentNode,e===document)return!0;return!1},g=function(e){var t=p(e);t&&(t.spies.push(e),t.container&&h(t.container)||(t.container&&t.container.off("scroll",t.handler),t.container=r.getContainer(e.$scope),t.container.on("scroll",t.handler).triggerHandler("scroll")))},m=function(e){var t=p(e);e===t.currentlyActive&&(t.currentlyActive=null);var n=t.spies.indexOf(e);-1!==n&&t.spies.splice(n,1),e.$element=null};return{addSpy:g,removeSpy:m,createContext:c,destroyContext:u,getContextForScope:f}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(e){"use strict";var t={},n=function(e,n){var i=e.$id;return t[i]=n,i},i=function(e){return t[e.$id]?e.$id:e.$parent?i(e.$parent):void 0},r=function(n){var r=i(n);return r?t[r]:e},a=function(e){var n=i(e);n&&delete t[n]};return{getContainerId:i,getContainer:r,setContainer:n,removeContainer:a}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(e,t,n){"use strict";return{link:function(i,r,a){r.on("click",function(r){if(a.href&&-1!==a.href.indexOf("#")){var o=document.getElementById(a.href.replace(/.*(?=#[^\s]+$)/,"").substring(1));if(o&&o.getBoundingClientRect){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault();var s=a.offset?parseInt(a.offset,10):t,l=a.duration?parseInt(a.duration,10):e,c=n.getContainer(i);c.duScrollToElement(angular.element(o),isNaN(s)?0:s,isNaN(l)?0:l)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(e){"use strict";return{restrict:"A",scope:!0,compile:function(t,n,i){return{
pre:function(t,n,i,r){e.createContext(t)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(e){"use strict";return{restrict:"A",scope:!0,compile:function(t,n,i){return{pre:function(t,n,i,r){i.$observe("duScrollContainer",function(i){angular.isString(i)&&(i=document.getElementById(i)),i=angular.isElement(i)?angular.element(i):n,e.setContainer(t,i),t.$on("$destroy",function(){e.removeContainer(t)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(e,t,n,i){"use strict";var r=function(e,t,n,i){angular.isElement(e)?this.target=e:angular.isString(e)&&(this.targetId=e),this.$scope=t,this.$element=n,this.offset=i};return r.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)),this.target},r.prototype.getTargetPosition=function(){var e=this.getTargetElement();return e?e.getBoundingClientRect():void 0},r.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(a,o,s){var l,c=s.ngHref||s.href;c&&-1!==c.indexOf("#")?l=c.replace(/.*(?=#[^\s]+$)/,"").substring(1):s.duScrollspy&&(l=s.duScrollspy),l&&n(function(){var n=new r(l,a,o,-(s.offset?parseInt(s.offset,10):t));e.addSpy(n),a.$on("$destroy",function(){e.removeSpy(n)}),a.$on("$locationChangeSuccess",n.flushTargetCache.bind(n)),i.$on("$stateChangeSuccess",n.flushTargetCache.bind(n))},0,!1)}}}]),angular.module("ui.chart",[]).directive("uiChart",function(){return{restrict:"EACM",template:"<div></div>",replace:!0,link:function(e,t,n){var i=function(){var i=e.$eval(n.uiChart);if(t.html(""),angular.isArray(i)){var r={};if(!angular.isUndefined(n.chartOptions)&&(r=e.$eval(n.chartOptions),!angular.isObject(r)))throw"Invalid ui.chart options attribute";t.jqplot(i,r)}};e.$watch(n.uiChart,function(){i()},!0),e.$watch(n.chartOptions,function(){i()})}}});var timerModule=angular.module("timer",[]).directive("timer",["$compile",function(e){return{restrict:"EA",replace:!1,scope:{interval:"=interval",startTimeAttr:"=startTime",endTimeAttr:"=endTime",countdownattr:"=countdown",finishCallback:"&finishCallback",autoStart:"&autoStart",language:"@?",fallback:"@?",maxTimeUnit:"="},controller:["$scope","$element","$attrs","$timeout","I18nService","$interpolate","progressBarService",function(t,n,i,r,a,o,s){function l(){t.timeoutId&&clearTimeout(t.timeoutId)}function c(){var e={};void 0!==i.startTime&&(t.millis=moment().diff(moment(t.startTimeAttr))),e=u.getTimeUnits(t.millis),t.maxTimeUnit&&"day"!==t.maxTimeUnit?"second"===t.maxTimeUnit?(t.seconds=Math.floor(t.millis/1e3),t.minutes=0,t.hours=0,t.days=0,t.months=0,t.years=0):"minute"===t.maxTimeUnit?(t.seconds=Math.floor(t.millis/1e3%60),t.minutes=Math.floor(t.millis/6e4),t.hours=0,t.days=0,t.months=0,t.years=0):"hour"===t.maxTimeUnit?(t.seconds=Math.floor(t.millis/1e3%60),t.minutes=Math.floor(t.millis/6e4%60),t.hours=Math.floor(t.millis/36e5),t.days=0,t.months=0,t.years=0):"month"===t.maxTimeUnit?(t.seconds=Math.floor(t.millis/1e3%60),t.minutes=Math.floor(t.millis/6e4%60),t.hours=Math.floor(t.millis/36e5%24),t.days=Math.floor(t.millis/36e5/24%30),t.months=Math.floor(t.millis/36e5/24/30),t.years=0):"year"===t.maxTimeUnit&&(t.seconds=Math.floor(t.millis/1e3%60),t.minutes=Math.floor(t.millis/6e4%60),t.hours=Math.floor(t.millis/36e5%24),t.days=Math.floor(t.millis/36e5/24%30),t.months=Math.floor(t.millis/36e5/24/30%12),t.years=Math.floor(t.millis/36e5/24/365)):(t.seconds=Math.floor(t.millis/1e3%60),t.minutes=Math.floor(t.millis/6e4%60),t.hours=Math.floor(t.millis/36e5%24),t.days=Math.floor(t.millis/36e5/24),t.months=0,t.years=0),t.secondsS=1===t.seconds?"":"s",t.minutesS=1===t.minutes?"":"s",t.hoursS=1===t.hours?"":"s",t.daysS=1===t.days?"":"s",t.monthsS=1===t.months?"":"s",t.yearsS=1===t.years?"":"s",t.secondUnit=e.seconds,t.minuteUnit=e.minutes,t.hourUnit=e.hours,t.dayUnit=e.days,t.monthUnit=e.months,t.yearUnit=e.years,t.sseconds=t.seconds<10?"0"+t.seconds:t.seconds,t.mminutes=t.minutes<10?"0"+t.minutes:t.minutes,t.hhours=t.hours<10?"0"+t.hours:t.hours,t.ddays=t.days<10?"0"+t.days:t.days,t.mmonths=t.months<10?"0"+t.months:t.months,t.yyears=t.years<10?"0"+t.years:t.years}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t.autoStart=i.autoStart||i.autostart,t.language=t.language||"en",t.fallback=t.fallback||"en",t.$watch("language",function(e,n){void 0!==e&&u.init(e,t.fallback)});var u=new a;u.init(t.language,t.fallback),t.displayProgressBar=0,t.displayProgressActive="active",0===n.html().trim().length?n.append(e("<span>"+o.startSymbol()+"millis"+o.endSymbol()+"</span>")(t)):n.append(e(n.contents())(t)),t.startTime=null,t.endTime=null,t.timeoutId=null,t.countdown=t.countdownattr&&parseInt(t.countdownattr,10)>=0?parseInt(t.countdownattr,10):void 0,t.isRunning=!1,t.$on("timer-start",function(){t.start()}),t.$on("timer-resume",function(){t.resume()}),t.$on("timer-stop",function(){t.stop()}),t.$on("timer-clear",function(){t.clear()}),t.$on("timer-reset",function(){t.reset()}),t.$on("timer-set-countdown",function(e,n){t.countdown=n}),t.$watch("startTimeAttr",function(e,n){e!==n&&t.isRunning&&t.start()}),t.$watch("endTimeAttr",function(e,n){e!==n&&t.isRunning&&t.start()}),t.start=n[0].start=function(){t.startTime=t.startTimeAttr?moment(t.startTimeAttr):moment(),t.endTime=t.endTimeAttr?moment(t.endTimeAttr):null,t.countdown||(t.countdown=t.countdownattr&&parseInt(t.countdownattr,10)>0?parseInt(t.countdownattr,10):void 0),l(),d(),t.isRunning=!0},t.resume=n[0].resume=function(){l(),t.countdownattr&&(t.countdown+=1),t.startTime=moment().diff(moment(t.stoppedTime).diff(moment(t.startTime))),d(),t.isRunning=!0},t.stop=t.pause=n[0].stop=n[0].pause=function(){var e=t.timeoutId;t.clear(),t.$emit("timer-stopped",{timeoutId:e,millis:t.millis,seconds:t.seconds,minutes:t.minutes,hours:t.hours,days:t.days})},t.clear=n[0].clear=function(){t.stoppedTime=moment(),l(),t.timeoutId=null,t.isRunning=!1},t.reset=n[0].reset=function(){t.startTime=t.startTimeAttr?moment(t.startTimeAttr):moment(),t.endTime=t.endTimeAttr?moment(t.endTimeAttr):null,t.countdown=t.countdownattr&&parseInt(t.countdownattr,10)>0?parseInt(t.countdownattr,10):void 0,l(),d(),t.isRunning=!1,t.clear()},n.bind("$destroy",function(){l(),t.isRunning=!1}),t.countdownattr?(t.millis=1e3*t.countdownattr,t.addCDSeconds=n[0].addCDSeconds=function(e){t.countdown+=e,t.$digest(),t.isRunning||t.start()},t.$on("timer-add-cd-seconds",function(e,n){r(function(){t.addCDSeconds(n)})}),t.$on("timer-set-countdown-seconds",function(e,n){t.isRunning||t.clear(),t.countdown=n,t.millis=1e3*n,c()})):t.millis=0,c();var d=function f(){var e=null;t.millis=moment().diff(t.startTime);var n=t.millis%1e3;return t.endTimeAttr&&(e=t.endTimeAttr,t.millis=moment(t.endTime).diff(moment()),n=t.interval-t.millis%1e3),t.countdownattr&&(e=t.countdownattr,t.millis=1e3*t.countdown),t.millis<0?(t.stop(),t.millis=0,c(),void(t.finishCallback&&t.$eval(t.finishCallback))):(c(),t.timeoutId=setTimeout(function(){f(),t.$digest()},t.interval-n),t.$emit("timer-tick",{timeoutId:t.timeoutId,millis:t.millis}),t.countdown>0?t.countdown--:t.countdown<=0&&(t.stop(),t.finishCallback&&t.$eval(t.finishCallback)),void(null!==e&&(t.progressBar=s.calculateProgressBar(t.startTime,t.millis,t.endTime,t.countdownattr),100===t.progressBar&&(t.displayProgressActive=""))))};(void 0===t.autoStart||t.autoStart===!0)&&t.start()}]}}]);"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports=timerModule);var app=angular.module("timer");app.factory("I18nService",function(){var e=function(){};return e.prototype.language="en",e.prototype.fallback="en",e.prototype.timeHumanizer={},e.prototype.init=function(e,t){var n=humanizeDuration.getSupportedLanguages();this.fallback=void 0!==t?t:"en",-1===n.indexOf(t)&&(this.fallback="en"),this.language=e,-1===n.indexOf(e)&&(this.language=this.fallback),moment.locale(this.language),this.timeHumanizer=humanizeDuration.humanizer({language:this.language,halfUnit:!1})},e.prototype.getTimeUnits=function(e){var t=1e3*Math.round(e/1e3),n={};return"undefined"!=typeof this.timeHumanizer&&(n={millis:this.timeHumanizer(t,{units:["milliseconds"]}),seconds:this.timeHumanizer(t,{units:["seconds"]}),minutes:this.timeHumanizer(t,{units:["minutes","seconds"]}),hours:this.timeHumanizer(t,{units:["hours","minutes","seconds"]}),days:this.timeHumanizer(t,{units:["days","hours","minutes","seconds"]}),months:this.timeHumanizer(t,{units:["months","days","hours","minutes","seconds"]}),years:this.timeHumanizer(t,{units:["years","months","days","hours","minutes","seconds"]})}),n},e});var app=angular.module("timer");app.factory("progressBarService",function(){var e=function(){};return e.prototype.calculateProgressBar=function(e,t,n,i){var r,a,o=0;return t/=1e3,null!==n?(r=moment(n),a=r.diff(e,"seconds"),o=100*t/a):o=100*t/i,o=100-o,o=Math.round(10*o)/10,o>100&&(o=100),o},new e}),!function(e,t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)t(require("jquery"),require("moment"));else{if(!jQuery)throw new Error("bootstrap-datetimepicker requires jQuery to be loaded first");if(!moment)throw new Error("bootstrap-datetimepicker requires moment.js to be loaded first");t(e.jQuery,moment)}}(this,function(e,t){"use strict";if("undefined"==typeof t)throw new Error("momentjs is required");var n=0,i=function(i,r){var a,o=e.fn.datetimepicker.defaults,s={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},l=this,c=!1,u=function(){var a,c,u=!1;if(l.options=e.extend({},o,r),l.options.icons=e.extend({},s,l.options.icons),l.element=e(i),f(),!l.options.pickTime&&!l.options.pickDate)throw new Error("Must choose at least one picker");if(l.id=n++,t.locale(l.options.language),l.date=t(),l.unset=!1,l.isInput=l.element.is("input"),l.component=!1,l.element.hasClass("input-group")&&(l.component=l.element.find(0===l.element.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),l.format=l.options.format,a=t().localeData(),l.format||(l.format=l.options.pickDate?a.longDateFormat("L"):"",l.options.pickDate&&l.options.pickTime&&(l.format+=" "),l.format+=l.options.pickTime?a.longDateFormat("LT"):"",l.options.useSeconds&&(-1!==a.longDateFormat("LT").indexOf(" A")?l.format=l.format.split(" A")[0]+":ss A":l.format+=":ss")),l.use24hours=l.format.toLowerCase().indexOf("a")<0&&l.format.indexOf("h")<0,l.component&&(u=l.component.find("span")),l.options.pickTime&&u&&u.addClass(l.options.icons.time),l.options.pickDate&&u&&(u.removeClass(l.options.icons.time),u.addClass(l.options.icons.date)),l.options.widgetParent="string"==typeof l.options.widgetParent&&l.options.widgetParent||l.element.parents().filter(function(){return"scroll"===e(this).css("overflow-y")}).get(0)||"body",l.widget=e(j()).appendTo(l.options.widgetParent),l.minViewMode=l.options.minViewMode||0,"string"==typeof l.minViewMode)switch(l.minViewMode){case"months":l.minViewMode=1;break;case"years":l.minViewMode=2;break;default:l.minViewMode=0}if(l.viewMode=l.options.viewMode||0,"string"==typeof l.viewMode)switch(l.viewMode){case"months":l.viewMode=1;break;case"years":l.viewMode=2;break;default:l.viewMode=0}l.viewMode=Math.max(l.viewMode,l.minViewMode),l.options.disabledDates=U(l.options.disabledDates),l.options.enabledDates=U(l.options.enabledDates),l.startViewMode=l.viewMode,l.setMinDate(l.options.minDate),l.setMaxDate(l.options.maxDate),v(),y(),b(),w(),x(),m(),_(),d().prop("disabled")||I(),""!==l.options.defaultDate&&""===d().val()&&l.setValue(l.options.defaultDate),1!==l.options.minuteStepping&&(c=l.options.minuteStepping,l.date.minutes(Math.round(l.date.minutes()/c)*c%60).seconds(0))},d=function(){var e;if(l.isInput)return l.element;if(e=l.element.find(".datepickerinput"),0===e.size())e=l.element.find("input");else if(!e.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');return e},f=function(){var e;e=l.element.is("input")?l.element.data():l.element.find("input").data(),void 0!==e.dateFormat&&(l.options.format=e.dateFormat),void 0!==e.datePickdate&&(l.options.pickDate=e.datePickdate),void 0!==e.datePicktime&&(l.options.pickTime=e.datePicktime),void 0!==e.dateUseminutes&&(l.options.useMinutes=e.dateUseminutes),void 0!==e.dateUseseconds&&(l.options.useSeconds=e.dateUseseconds),void 0!==e.dateUsecurrent&&(l.options.useCurrent=e.dateUsecurrent),void 0!==e.calendarWeeks&&(l.options.calendarWeeks=e.calendarWeeks),void 0!==e.dateMinutestepping&&(l.options.minuteStepping=e.dateMinutestepping),void 0!==e.dateMindate&&(l.options.minDate=e.dateMindate),void 0!==e.dateMaxdate&&(l.options.maxDate=e.dateMaxdate),void 0!==e.dateShowtoday&&(l.options.showToday=e.dateShowtoday),void 0!==e.dateCollapse&&(l.options.collapse=e.dateCollapse),void 0!==e.dateLanguage&&(l.options.language=e.dateLanguage),void 0!==e.dateDefaultdate&&(l.options.defaultDate=e.dateDefaultdate),void 0!==e.dateDisableddates&&(l.options.disabledDates=e.dateDisableddates),void 0!==e.dateEnableddates&&(l.options.enabledDates=e.dateEnableddates),void 0!==e.dateIcons&&(l.options.icons=e.dateIcons),void 0!==e.dateUsestrict&&(l.options.useStrict=e.dateUsestrict),void 0!==e.dateDirection&&(l.options.direction=e.dateDirection),void 0!==e.dateSidebyside&&(l.options.sideBySide=e.dateSidebyside),void 0!==e.dateDaysofweekdisabled&&(l.options.daysOfWeekDisabled=e.dateDaysofweekdisabled)},p=function(){var t,n="absolute",i=l.component?l.component.offset():l.element.offset(),r=e(window);l.width=l.component?l.component.outerWidth():l.element.outerWidth(),i.top=i.top+l.element.outerHeight(),"up"===l.options.direction?t="top":"bottom"===l.options.direction?t="bottom":"auto"===l.options.direction&&(t=i.top+l.widget.height()>r.height()+r.scrollTop()&&l.widget.height()+l.element.outerHeight()<i.top?"top":"bottom"),"top"===t?(i.bottom=r.height()-i.top+l.element.outerHeight()+3,l.widget.addClass("top").removeClass("bottom")):(i.top+=1,l.widget.addClass("bottom").removeClass("top")),void 0!==l.options.width&&l.widget.width(l.options.width),"left"===l.options.orientation&&(l.widget.addClass("left-oriented"),i.left=i.left-l.widget.width()+20),F()&&(n="fixed",i.top-=r.scrollTop(),i.left-=r.scrollLeft()),r.width()<i.left+l.widget.outerWidth()?(i.right=r.width()-i.left-l.width,i.left="auto",l.widget.addClass("pull-right")):(i.right="auto",l.widget.removeClass("pull-right")),l.widget.css("top"===t?{position:n,bottom:i.bottom,top:"auto",left:i.left,right:i.right}:{position:n,top:i.top,bottom:"auto",left:i.left,right:i.right})},h=function(e,n){(!t(l.date).isSame(t(e))||c)&&(c=!1,l.element.trigger({type:"dp.change",date:t(l.date),oldDate:t(e)}),"change"!==n&&l.element.change())},g=function(e){c=!0,l.element.trigger({type:"dp.error",date:t(e,l.format,l.options.useStrict)})},m=function(e){t.locale(l.options.language);var n=e;n||(n=d().val(),n&&(l.date=t(n,l.format,l.options.useStrict)),l.date||(l.date=t())),l.viewDate=t(l.date).startOf("month"),$(),S()},v=function(){t.locale(l.options.language);var n,i=e("<tr>"),r=t.weekdaysMin();if(l.options.calendarWeeks===!0&&i.append('<th class="cw">#</th>'),0===t().localeData()._week.dow)for(n=0;7>n;n++)i.append('<th class="dow">'+r[n]+"</th>");else for(n=1;8>n;n++)i.append(7===n?'<th class="dow">'+r[0]+"</th>":'<th class="dow">'+r[n]+"</th>");l.widget.find(".datepicker-days thead").append(i)},y=function(){t.locale(l.options.language);var e,n="",i=t.monthsShort();for(e=0;12>e;e++)n+='<span class="month">'+i[e]+"</span>";l.widget.find(".datepicker-months td").append(n)},$=function(){if(l.options.pickDate){t.locale(l.options.language);var n,i,r,a,o,s,c,u,d,f=l.viewDate.year(),p=l.viewDate.month(),h=l.options.minDate.year(),g=l.options.minDate.month(),m=l.options.maxDate.year(),v=l.options.maxDate.month(),y=[],$=t.months();for(l.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),l.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),l.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),l.widget.find(".datepicker-days th:eq(1)").text($[p]+" "+f),i=t(l.viewDate,l.format,l.options.useStrict).subtract(1,"months"),c=i.daysInMonth(),i.date(c).startOf("week"),(f===h&&g>=p||h>f)&&l.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(f===m&&p>=v||f>m)&&l.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),r=t(i).add(42,"d");i.isBefore(r);){if(i.weekday()===t().startOf("week").weekday()&&(a=e("<tr>"),y.push(a),l.options.calendarWeeks===!0&&a.append('<td class="cw">'+i.week()+"</td>")),o="",i.year()<f||i.year()===f&&i.month()<p?o+=" old":(i.year()>f||i.year()===f&&i.month()>p)&&(o+=" new"),i.isSame(t({y:l.date.year(),M:l.date.month(),d:l.date.date()}))&&(o+=" active"),(O(i,"day")||!B(i))&&(o+=" disabled"),l.options.showToday===!0&&i.isSame(t(),"day")&&(o+=" today"),l.options.daysOfWeekDisabled)for(s=0;s<l.options.daysOfWeekDisabled.length;s++)if(i.day()===l.options.daysOfWeekDisabled[s]){o+=" disabled";break}a.append('<td class="day'+o+'">'+i.date()+"</td>"),n=i.date(),i.add(1,"d"),n===i.date()&&i.add(1,"d")}for(l.widget.find(".datepicker-days tbody").empty().append(y),d=l.date.year(),$=l.widget.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active"),d===f&&$.eq(l.date.month()).addClass("active"),h>f-1&&l.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),f+1>m&&l.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),s=0;12>s;s++)f===h&&g>s||h>f?e($[s]).addClass("disabled"):(f===m&&s>v||f>m)&&e($[s]).addClass("disabled");for(y="",f=10*parseInt(f/10,10),u=l.widget.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).parents("table").find("td"),l.widget.find(".datepicker-years").find("th").removeClass("disabled"),h>f&&l.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),f+9>m&&l.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),f-=1,s=-1;11>s;s++)y+='<span class="year'+(-1===s||10===s?" old":"")+(d===f?" active":"")+(h>f||f>m?" disabled":"")+'">'+f+"</span>",f+=1;u.html(y)}},b=function(){t.locale(l.options.language);var e,n,i,r=l.widget.find(".timepicker .timepicker-hours table"),a="";if(r.parent().hide(),l.use24hours)for(e=0,n=0;6>n;n+=1){for(a+="<tr>",i=0;4>i;i+=1)a+='<td class="hour">'+H(e.toString())+"</td>",e++;a+="</tr>"}else for(e=1,n=0;3>n;n+=1){for(a+="<tr>",i=0;4>i;i+=1)a+='<td class="hour">'+H(e.toString())+"</td>",e++;a+="</tr>"}r.html(a)},w=function(){var e,t,n=l.widget.find(".timepicker .timepicker-minutes table"),i="",r=0,a=l.options.minuteStepping;for(n.parent().hide(),1===a&&(a=5),e=0;e<Math.ceil(60/a/4);e++){for(i+="<tr>",t=0;4>t;t+=1)60>r?(i+='<td class="minute">'+H(r.toString())+"</td>",r+=a):i+="<td></td>";i+="</tr>"}n.html(i)},x=function(){var e,t,n=l.widget.find(".timepicker .timepicker-seconds table"),i="",r=0;for(n.parent().hide(),e=0;3>e;e++){for(i+="<tr>",t=0;4>t;t+=1)i+='<td class="second">'+H(r.toString())+"</td>",r+=5;i+="</tr>"}n.html(i)},S=function(){if(l.date){var e=l.widget.find(".timepicker span[data-time-component]"),t=l.date.hours(),n=l.date.format("A");l.use24hours||(0===t?t=12:12!==t&&(t%=12),l.widget.find(".timepicker [data-action=togglePeriod]").text(n)),e.filter("[data-time-component=hours]").text(H(t)),e.filter("[data-time-component=minutes]").text(H(l.date.minutes())),e.filter("[data-time-component=seconds]").text(H(l.date.second()))}},C=function(n){n.stopPropagation(),n.preventDefault(),l.unset=!1;var i,r,a,o,s=e(n.target).closest("span, td, th"),c=t(l.date);if(1===s.length&&!s.is(".disabled"))switch(s[0].nodeName.toLowerCase()){case"th":switch(s[0].className){case"picker-switch":_(1);break;case"prev":case"next":a=z.modes[l.viewMode].navStep,"prev"===s[0].className&&(a=-1*a),l.viewDate.add(a,z.modes[l.viewMode].navFnc),$()}break;case"span":s.is(".month")?(i=s.parent().find("span").index(s),l.viewDate.month(i)):(r=parseInt(s.text(),10)||0,l.viewDate.year(r)),l.viewMode===l.minViewMode&&(l.date=t({y:l.viewDate.year(),M:l.viewDate.month(),d:l.viewDate.date(),h:l.date.hours(),m:l.date.minutes(),s:l.date.seconds()}),N(),h(c,n.type)),_(-1),$();break;case"td":s.is(".day")&&(o=parseInt(s.text(),10)||1,i=l.viewDate.month(),r=l.viewDate.year(),s.is(".old")?0===i?(i=11,r-=1):i-=1:s.is(".new")&&(11===i?(i=0,r+=1):i+=1),l.date=t({y:r,M:i,d:o,h:l.date.hours(),m:l.date.minutes(),s:l.date.seconds()}),l.viewDate=t({y:r,M:i,d:Math.min(28,o)}),$(),N(),h(c,n.type))}},k={incrementHours:function(){L("add","hours",1)},incrementMinutes:function(){L("add","minutes",l.options.minuteStepping)},incrementSeconds:function(){L("add","seconds",1)},decrementHours:function(){L("subtract","hours",1)},decrementMinutes:function(){L("subtract","minutes",l.options.minuteStepping)},decrementSeconds:function(){L("subtract","seconds",1)},togglePeriod:function(){var e=l.date.hours();e>=12?e-=12:e+=12,l.date.hours(e)},showPicker:function(){l.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),l.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){l.widget.find(".timepicker .timepicker-picker").hide(),l.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){l.widget.find(".timepicker .timepicker-picker").hide(),l.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){l.widget.find(".timepicker .timepicker-picker").hide(),l.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=parseInt(e(t.target).text(),10);l.use24hours||(l.date.hours()>=12?12!==n&&(n+=12):12===n&&(n=0)),l.date.hours(n),k.showPicker.call(l)},selectMinute:function(t){l.date.minutes(parseInt(e(t.target).text(),10)),k.showPicker.call(l)},selectSecond:function(t){l.date.seconds(parseInt(e(t.target).text(),10)),k.showPicker.call(l)}},E=function(n){var i=t(l.date),r=e(n.currentTarget).data("action"),a=k[r].apply(l,arguments);return A(n),l.date||(l.date=t({y:1970})),N(),S(),h(i,n.type),a},A=function(e){e.stopPropagation(),e.preventDefault()},T=function(e){27===e.keyCode&&l.hide()},D=function(n){t.locale(l.options.language);var i=e(n.target),r=t(l.date),a=t(i.val(),l.format,l.options.useStrict);a.isValid()&&!O(a)&&B(a)?(m(),l.setValue(a),h(r,n.type),N()):(l.viewDate=r,l.unset=!0,h(r,n.type),g(a))},_=function(e){e&&(l.viewMode=Math.max(l.minViewMode,Math.min(2,l.viewMode+e))),l.widget.find(".datepicker > div").hide().filter(".datepicker-"+z.modes[l.viewMode].clsName).show()},I=function(){var t,n,i,r,a;l.widget.on("click",".datepicker *",e.proxy(C,this)),l.widget.on("click","[data-action]",e.proxy(E,this)),l.widget.on("mousedown",e.proxy(A,this)),l.element.on("keydown",e.proxy(T,this)),l.options.pickDate&&l.options.pickTime&&l.widget.on("click.togglePicker",".accordion-toggle",function(o){if(o.stopPropagation(),t=e(this),n=t.closest("ul"),i=n.find(".in"),r=n.find(".collapse:not(.in)"),i&&i.length){if(a=i.data("collapse"),a&&a.transitioning)return;i.collapse("hide"),r.collapse("show"),t.find("span").toggleClass(l.options.icons.time+" "+l.options.icons.date),l.component&&l.component.find("span").toggleClass(l.options.icons.time+" "+l.options.icons.date)}}),l.isInput?l.element.on({click:e.proxy(l.show,this),focus:e.proxy(l.show,this),change:e.proxy(D,this),blur:e.proxy(l.hide,this)}):(l.element.on({change:e.proxy(D,this)},"input"),l.component?(l.component.on("click",e.proxy(l.show,this)),l.component.on("mousedown",e.proxy(A,this))):l.element.on("click",e.proxy(l.show,this)))},P=function(){e(window).on("resize.datetimepicker"+l.id,e.proxy(p,this)),l.isInput||e(document).on("mousedown.datetimepicker"+l.id,e.proxy(l.hide,this))},M=function(){l.widget.off("click",".datepicker *",l.click),l.widget.off("click","[data-action]"),l.widget.off("mousedown",l.stopEvent),l.options.pickDate&&l.options.pickTime&&l.widget.off("click.togglePicker"),l.isInput?l.element.off({focus:l.show,change:D,click:l.show,blur:l.hide}):(l.element.off({change:D},"input"),l.component?(l.component.off("click",l.show),l.component.off("mousedown",l.stopEvent)):l.element.off("click",l.show))},R=function(){e(window).off("resize.datetimepicker"+l.id),l.isInput||e(document).off("mousedown.datetimepicker"+l.id)},F=function(){if(l.element){var t,n=l.element.parents(),i=!1;for(t=0;t<n.length;t++)if("fixed"===e(n[t]).css("position")){i=!0;break}return i}return!1},N=function(){t.locale(l.options.language);var e="";l.unset||(e=t(l.date).format(l.format)),d().val(e),l.element.data("date",e),l.options.pickTime||l.hide()},L=function(e,n,i){t.locale(l.options.language);var r;return"add"===e?(r=t(l.date),23===r.hours()&&r.add(i,n),r.add(i,n)):r=t(l.date).subtract(i,n),O(t(r.subtract(i,n)))||O(r)?void g(r.format(l.format)):("add"===e?l.date.add(i,n):l.date.subtract(i,n),void(l.unset=!1))},O=function(e,n){t.locale(l.options.language);var i=t(l.options.maxDate,l.format,l.options.useStrict),r=t(l.options.minDate,l.format,l.options.useStrict);return n&&(i=i.endOf(n),r=r.startOf(n)),e.isAfter(i)||e.isBefore(r)?!0:l.options.disabledDates===!1?!1:l.options.disabledDates[e.format("YYYY-MM-DD")]===!0},B=function(e){return t.locale(l.options.language),l.options.enabledDates===!1?!0:l.options.enabledDates[e.format("YYYY-MM-DD")]===!0},U=function(e){var n,i={},r=0;for(n=0;n<e.length;n++)a=t.isMoment(e[n])||e[n]instanceof Date?t(e[n]):t(e[n],l.format,l.options.useStrict),a.isValid()&&(i[a.format("YYYY-MM-DD")]=!0,r++);return r>0?i:!1},H=function(e){return e=e.toString(),e.length>=2?e:"0"+e},j=function(){var e='<thead><tr><th class="prev">&lsaquo;</th><th colspan="'+(l.options.calendarWeeks?"6":"5")+'" class="picker-switch"></th><th class="next">&rsaquo;</th></tr></thead>',t='<tbody><tr><td colspan="'+(l.options.calendarWeeks?"8":"7")+'"></td></tr></tbody>',n='<div class="datepicker-days"><table class="table-condensed">'+e+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+e+t+'</table></div><div class="datepicker-years"><table class="table-condensed">'+e+t+"</table></div>",i="";return l.options.pickDate&&l.options.pickTime?(i='<div class="bootstrap-datetimepicker-widget'+(l.options.sideBySide?" timepicker-sbs":"")+(l.use24hours?" usetwentyfour":"")+' dropdown-menu" style="z-index:9999 !important;">',i+=l.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+n+'</div><div class="col-sm-6 timepicker">'+q.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(l.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+n+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+l.options.icons.time+'"></span></a></li><li'+(l.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+q.getTemplate()+"</div></li></ul>",i+="</div>"):l.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+q.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+n+"</div></div>"},z={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}]},q={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};q.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+l.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(l.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+l.options.icons.up+'"></span></a>':"")+"</td>"+(l.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+l.options.icons.up+'"></span></a></td>':"")+(l.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+q.hourTemplate+'</td> <td class="separator">:</td><td>'+(l.options.useMinutes?q.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(l.options.useSeconds?'<td class="separator">:</td><td>'+q.secondTemplate+"</td>":"")+(l.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+l.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(l.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+l.options.icons.down+'"></span></a>':"")+"</td>"+(l.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+l.options.icons.down+'"></span></a></td>':"")+(l.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(l.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},l.destroy=function(){M(),R(),l.widget.remove(),l.element.removeData("DateTimePicker"),l.component&&l.component.removeData("DateTimePicker")},l.show=function(e){if(!d().prop("disabled")){if(l.options.useCurrent&&""===d().val()){if(1!==l.options.minuteStepping){var n=t(),i=l.options.minuteStepping;n.minutes(Math.round(n.minutes()/i)*i%60).seconds(0),l.setValue(n.format(l.format))}else l.setValue(t().format(l.format));h("",e.type)}e&&"click"===e.type&&l.isInput&&l.widget.hasClass("picker-open")||(l.widget.hasClass("picker-open")?(l.widget.hide(),l.widget.removeClass("picker-open")):(l.widget.show(),l.widget.addClass("picker-open")),l.height=l.component?l.component.outerHeight():l.element.outerHeight(),p(),l.element.trigger({type:"dp.show",date:t(l.date)}),P(),e&&A(e))}},l.disable=function(){var e=d();e.prop("disabled")||(e.prop("disabled",!0),M())},l.enable=function(){var e=d();e.prop("disabled")&&(e.prop("disabled",!1),I())},l.hide=function(){var e,n,i=l.widget.find(".collapse");for(e=0;e<i.length;e++)if(n=i.eq(e).data("collapse"),n&&n.transitioning)return;l.widget.hide(),l.widget.removeClass("picker-open"),l.viewMode=l.startViewMode,_(),l.element.trigger({type:"dp.hide",date:t(l.date)}),R()},l.setValue=function(e){t.locale(l.options.language),e?l.unset=!1:(l.unset=!0,N()),e=t.isMoment(e)?e.locale(l.options.language):e instanceof Date?t(e):t(e,l.format,l.options.useStrict),e.isValid()?(l.date=e,N(),l.viewDate=t({y:l.date.year(),M:l.date.month()}),$(),S()):g(e)},l.getDate=function(){return l.unset?null:t(l.date)},l.setDate=function(e){var n=t(l.date);l.setValue(e?e:null),h(n,"function")},l.setDisabledDates=function(e){l.options.disabledDates=U(e),l.viewDate&&m()},l.setEnabledDates=function(e){l.options.enabledDates=U(e),l.viewDate&&m()},l.setMaxDate=function(e){void 0!==e&&(l.options.maxDate=t.isMoment(e)||e instanceof Date?t(e):t(e,l.format,l.options.useStrict),l.viewDate&&m())},l.setMinDate=function(e){void 0!==e&&(l.options.minDate=t.isMoment(e)||e instanceof Date?t(e):t(e,l.format,l.options.useStrict),l.viewDate&&m())},u()};e.fn.datetimepicker=function(t){return this.each(function(){var n=e(this),r=n.data("DateTimePicker");r||n.data("DateTimePicker",new i(this,t))})},e.fn.datetimepicker.defaults={format:!1,pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,calendarWeeks:!1,minuteStepping:1,minDate:t({y:1900}),maxDate:t().add(100,"y"),showToday:!0,collapse:!0,language:t.locale(),
defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:[],widgetParent:!1}}),function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n){try{Object.defineProperty(e,t,{get:n})}catch(i){}}if(window.FileAPI||(window.FileAPI={}),FileAPI.shouldLoad=window.XMLHttpRequest&&!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(e){if(!e.__listeners){e.upload||(e.upload={}),e.__listeners=[];var t=e.upload.addEventListener;e.upload.addEventListener=function(n,i){e.__listeners[n]=i,t&&t.apply(this,arguments)}}};e("open",function(e){return function(t,i,r){n(this),this.__url=i;try{e.apply(this,[t,i,r])}catch(a){a.message.indexOf("Access is denied")>-1&&(this.__origError=a,e.apply(this,[t,"_fix_for_ie_crossdomain__",r]))}}}),e("getResponseHeader",function(e){return function(t){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(t):null==e?null:e.apply(this,[t])}}),e("getAllResponseHeaders",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==e?null:e.apply(this)}}),e("abort",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),e("setRequestHeader",function(e){return function(t,i){if("__setXHR_"===t){n(this);var r=i(this);r instanceof Function&&r(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[t]=i,e.apply(this,arguments)}}),e("send",function(e){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var i=arguments[0],r={url:n.__url,jsonp:!1,cache:!0,complete:function(e,i){e&&angular.isString(e)&&-1!==e.indexOf("#2174")&&(e=null),n.__completed=!0,!e&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!e&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===e&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==i.status&&t(n,"status",function(){return 0===i.status&&e&&"abort"!==e?500:i.status}),void 0!==i.statusText&&t(n,"statusText",function(){return i.statusText}),t(n,"readyState",function(){return 4}),void 0!==i.response&&t(n,"response",function(){return i.response});var r=i.responseText||(e&&0===i.status&&"abort"!==e?e:void 0);t(n,"responseText",function(){return r}),t(n,"response",function(){return r}),e&&t(n,"err",function(){return e}),n.__fileApiXHR=i,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(e){if(e.target=n,n.__listeners.progress&&n.__listeners.progress(e),n.__total=e.total,n.__loaded=e.loaded,e.total===e.loaded){var t=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders};r.data={},r.files={};for(var a=0;a<i.data.length;a++){var o=i.data[a];null!=o.val&&null!=o.val.name&&null!=o.val.size&&null!=o.val.type?r.files[o.key]=o.val:r.data[o.key]=o.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(r)},1)}else{if(this.__origError)throw this.__origError;e.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(e,t,n){t.__isFileAPIBlobShim&&(t=t.data[0]),this.data.push({key:e,val:t,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(e){return{data:e,__isFileAPIBlobShim:!0}}}}(),function(){function e(e){return"input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()}function t(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e)return!0}catch(t){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function n(e){var t=0,n=0;if(window.jQuery)return jQuery(e).offset();if(e.offsetParent)do t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e);return{left:t,top:n}}if(FileAPI.shouldLoad){if(FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var i,r,a,o,s,l=document.createElement("script"),c=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)i=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)r=window.FileAPI.jsPath;else for(a=0;a<c.length;a++)if(s=c[a].src,o=s.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),o>-1){r=s.substring(0,o+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=r),l.setAttribute("src",i||r+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(l),FileAPI.hasFlash=t()}FileAPI.ngfFixIE=function(i,r,a){if(!t())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var o=function(){i.attr("disabled")?r&&r.removeClass("js-fileapi-wrapper"):(r.attr("__ngf_flash_")||(r.unbind("change"),r.unbind("click"),r.bind("change",function(e){s.apply(this,[e]),a.apply(this,[e])}),r.attr("__ngf_flash_","true")),r.addClass("js-fileapi-wrapper"),e(i)||r.css("position","absolute").css("top",n(i[0]).top+"px").css("left",n(i[0]).left+"px").css("width",i[0].offsetWidth+"px").css("height",i[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",i.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"))};i.bind("mouseenter",o);var s=function(e){for(var t=FileAPI.getFiles(e),n=0;n<t.length;n++)void 0===t[n].size&&(t[n].size=0),void 0===t[n].name&&(t[n].name="file"),void 0===t[n].type&&(t[n].type="undefined");e.target||(e.target={}),e.target.files=t,e.target.files!==t&&(e.__files_=t),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null}}},FileAPI.disableFileInput=function(e,t){t?e.removeClass("js-fileapi-wrapper"):e.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var e=this,t=!1;this.listeners={},this.addEventListener=function(t,n){e.listeners[t]=e.listeners[t]||[],e.listeners[t].push(n)},this.removeEventListener=function(t,n){e.listeners[t]&&e.listeners[t].splice(e.listeners[t].indexOf(n),1)},this.dispatchEvent=function(t){var n=e.listeners[t.type];if(n)for(var i=0;i<n.length;i++)n[i].call(e,t)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(t,n){var i={type:t,target:e,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(i.target.result=n.result),i},i=function(i){t||(t=!0,e.onloadstart&&e.onloadstart(n("loadstart",i)));var r;"load"===i.type?(e.onloadend&&e.onloadend(n("loadend",i)),r=n("load",i),e.onload&&e.onload(r),e.dispatchEvent(r)):"progress"===i.type?(r=n("progress",i),e.onprogress&&e.onprogress(r),e.dispatchEvent(r)):(r=n("error",i),e.onerror&&e.onerror(r),e.dispatchEvent(r))};this.readAsArrayBuffer=function(e){FileAPI.readAsBinaryString(e,i)},this.readAsBinaryString=function(e){FileAPI.readAsBinaryString(e,i)},this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,i)},this.readAsText=function(e){FileAPI.readAsText(e,i)}}),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="textAngular"),function(){"use strict";var e={ie:function(){for(var e,t=3,n=document.createElement("div"),i=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];);return t>4?t:e}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},t=!1;e.webkit&&(document.addEventListener("mousedown",function(e){var n=e||window.event,i=n.target;if(t&&null!==i){for(var r=!1,a=i;null!==a&&"html"!==a.tagName.toLowerCase()&&!r;)r="true"===a.contentEditable,a=a.parentNode;r||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),i.focus(),i.select&&i.select())}t=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">'))}));var n=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,i=/^(ul|li|ol)$/i,r=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var a,o,s,l,c,u;if(e.ie>8||void 0===e.ie){for(var d=document.styleSheets,f=0;f<d.length;f++)if((0===d[f].media.length||d[f].media.mediaText.match(/(all|screen)/gi))&&d[f].href&&d[f].href.match(/textangular\.(min\.|)css/gi)){a=d[f];break}a||(a=function(){var t=document.createElement("style");return e.webkit&&t.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(t),t.sheet}()),o=function(e,t){return l(a,e,t)},l=function(e,t,n){var i,r;return e.cssRules?i=Math.max(e.cssRules.length-1,0):e.rules&&(i=Math.max(e.rules.length-1,0)),e.insertRule?e.insertRule(t+"{"+n+"}",i):e.addRule(t,n,i),a.rules?r=a.rules[i]:a.cssRules&&(r=a.cssRules[i]),r},u=function(e,t){var n,i;for(n=0;n<t.length;n++)if(t[n].cssText===e.cssText){i=n;break}return i},s=function(e){c(a,e)},c=function(e,t){var n=e.cssRules||e.rules;if(n&&0!==n.length){var i=u(t,n);e.removeRule?e.removeRule(i):e.deleteRule(i)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(t){return t?""===t?void 0===e.ie?"div":e.ie<=8?"P":"p":e.ie<=8?t.toUpperCase():t:e.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(e,t){return function(n){var i=angular.element("<div></div>");return i[0].innerHTML=n,angular.forEach(e,function(e){var n=[];e.selector&&""!==e.selector?n=i.find(e.selector):e.customAttribute&&""!==e.customAttribute&&(n=t.getByAttribute(i,e.customAttribute)),angular.forEach(n,function(t){t=angular.element(t),e.selector&&""!==e.selector&&e.customAttribute&&""!==e.customAttribute?void 0!==t.attr(e.customAttribute)&&e.renderLogic(t):e.renderLogic(t)})}),i[0].innerHTML}}]).factory("taFixChrome",function(){var e=function(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var t,n,i,r=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,a="",o=0;t=r.exec(e);)n=t[3]||t[4],n&&n.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(n=n.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),i="<"+t[1].trim(),n.trim().length>0&&(i+=" style="+t[2].substring(0,1)+n+t[2].substring(0,1)),i+=t[5].trim()+">",a+=e.substring(o,t.index)+i,o=t.index+t[0].length);return a+=e.substring(o),o>0?a.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):e};return e}).factory("taSanitize",["$sanitize",function(e){function t(e,t){for(var n,i=0,r=0,a=/<[^>]*>/gi;n=a.exec(e);)if(r=n.index,"/"===n[0].substr(1,1)){if(0===i)break;i--}else i++;return t+e.substring(0,r)+angular.element(t)[0].outerHTML.substring(t.length)+e.substring(r)}function n(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var i,a,o,s,l,u,d=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",p="",h=0;a=d.exec(e);){s=a[3]||a[4];var g=new RegExp(c,"i");if(angular.isString(s)&&g.test(s)){l="";for(var m=new RegExp(c,"ig");o=m.exec(s);)for(i=0;i<r.length;i++)o[2*i+2]&&(l+="<"+r[i].tag+">");u=n(e.substring(h,a.index)),p+=f.length>0?t(u,f):u,s=s.replace(new RegExp(c,"ig"),""),p+="<"+a[1].trim(),s.length>0&&(p+=' style="'+s+'"'),p+=a[5]+">",h=a.index+a[0].length,f=l}}return p+=f.length>0?t(e.substring(h),f):e.substring(h)}function i(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var t,n=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,i="",r=0;t=n.exec(e);){i+=e.substring(r,t.index),r=t.index+t[0].length;var a="<"+t[1]+t[5];/style=("([^"]+)"|'([^']+)')/gi.test(a)?a=a.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(t[3]||t[4])+';"'):a+=' style="text-align:'+(t[3]||t[4])+';"',a+=">",i+=a}return i+e.substring(r)}for(var r=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],a=[],o=0;o<r.length;o++){for(var s="("+r[o].property+":\\s*(",l=0;l<r[o].values.length;l++)l>0&&(s+="|"),s+=r[o].values[l];s+=");)",a.push(s)}var c="("+a.join("|")+")";return function(t,r,a){if(!a)try{t=n(t)}catch(o){}t=i(t);var s;try{s=e(t),a&&(s=t)}catch(o){s=r||""}var l,c=s.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),u=s.replace(/(&#(9|10);)*/gi,""),d=/<pre[^>]*>.*?<\/pre[^>]*>/gi,f=0,p=0;for(s="";null!==(l=d.exec(u))&&f<c.length;)s+=u.substring(p,l.index)+c[f],p=l.index+l[0].length,f++;return s+u.substring(p)}}]).factory("taToolExecuteAction",["$q","$log",function(e,t){return function(n){void 0!==n&&(this.$editor=function(){return n});var i,r=e.defer(),a=r.promise,o=this.$editor();try{i=this.action(r,o.startAction()),a["finally"](function(){o.endAction.call(o)})}catch(s){t.error(s)}(i||void 0===i)&&r.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(e,t,r){var a=function(t,n){var i,r,a=t.find("li");for(r=a.length-1;r>=0;r--)i=angular.element("<"+n+">"+a[r].innerHTML+"</"+n+">"),t.after(i);t.remove(),e.setSelectionToElementEnd(i[0])},o=function(t){/(<br(|\/)>)$/i.test(t.innerHTML.trim())?e.setSelectionBeforeElement(angular.element(t).find("br")[0]):e.setSelectionToElementEnd(t)},s=function(e,t){var n=angular.element("<"+t+">"+e[0].innerHTML+"</"+t+">");e.after(n),e.remove(),o(n.find("li")[0])},l=function(e,n,i){for(var r="",a=0;a<e.length;a++)r+="<"+t("li")+">"+e[a].innerHTML+"</"+t("li")+">";var s=angular.element("<"+i+">"+r+"</"+i+">");n.after(s),n.remove(),o(s.find("li")[0])};return function(o,c){return o=t(o),function(u,d,f,p){var h,g,m,v,y,$,b,w=angular.element("<"+o+">");try{b=e.getSelectionElement()}catch(x){}var S=angular.element(b);if(void 0!==b){var C=b.tagName.toLowerCase();if("insertorderedlist"===u.toLowerCase()||"insertunorderedlist"===u.toLowerCase()){var k=t("insertorderedlist"===u.toLowerCase()?"ol":"ul");if(C===k)return a(S,o);if("li"===C&&S.parent()[0].tagName.toLowerCase()===k&&1===S.parent().children().length)return a(S.parent(),o);if("li"===C&&S.parent()[0].tagName.toLowerCase()!==k&&1===S.parent().children().length)return s(S.parent(),k);if(C.match(n)&&!S.hasClass("ta-bind")){if("ol"===C||"ul"===C)return s(S,k);var E=!1;return angular.forEach(S.children(),function(e){e.tagName.match(n)&&(E=!0)}),E?l(S.children(),S,k):l([angular.element("<div>"+b.innerHTML+"</div>")[0]],S,k)}if(C.match(n)){if(v=e.getOnlySelectedElements(),0===v.length)g=angular.element("<"+k+"><li>"+b.innerHTML+"</li></"+k+">"),S.html(""),S.append(g);else{if(1===v.length&&("ol"===v[0].tagName.toLowerCase()||"ul"===v[0].tagName.toLowerCase()))return v[0].tagName.toLowerCase()===k?a(angular.element(v[0]),o):s(angular.element(v[0]),k);m="";var A=[];for(h=0;h<v.length;h++)if(3!==v[h].nodeType){var T=angular.element(v[h]);if("li"===v[h].tagName.toLowerCase())continue;m+="ol"===v[h].tagName.toLowerCase()||"ul"===v[h].tagName.toLowerCase()?T[0].innerHTML:"span"!==v[h].tagName.toLowerCase()||"ol"!==v[h].childNodes[0].tagName.toLowerCase()&&"ul"!==v[h].childNodes[0].tagName.toLowerCase()?"<"+t("li")+">"+T[0].innerHTML+"</"+t("li")+">":T[0].childNodes[0].innerHTML,A.unshift(T)}g=angular.element("<"+k+">"+m+"</"+k+">"),A.pop().replaceWith(g),angular.forEach(A,function(e){e.remove()})}return void e.setSelectionToElementEnd(g[0])}}else{if("formatblock"===u.toLowerCase()){for($=f.toLowerCase().replace(/[<>]/gi,""),"default"===$.trim()&&($=o,f="<"+o+">"),g="li"===C?S.parent():S;!g[0].tagName||!g[0].tagName.match(n)&&!g.parent().attr("contenteditable");)g=g.parent(),C=(g[0].tagName||"").toLowerCase();if(C===$){v=g.children();var D=!1;for(h=0;h<v.length;h++)D=D||v[h].tagName.match(n);D?(g.after(v),y=g.next(),g.remove(),g=y):(w.append(g[0].childNodes),g.after(w),g.remove(),g=w)}else if(g.parent()[0].tagName.toLowerCase()!==$||g.parent().hasClass("ta-bind"))if(C.match(i))g.wrap(f);else{for(v=e.getOnlySelectedElements(),0===v.length&&(v=[g[0]]),h=0;h<v.length;h++)if(3===v[h].nodeType||!v[h].tagName.match(n))for(;3===v[h].nodeType||!v[h].tagName||!v[h].tagName.match(n);)v[h]=v[h].parentNode;if(angular.element(v[0]).hasClass("ta-bind"))g=angular.element(f),g[0].innerHTML=v[0].innerHTML,v[0].innerHTML=g[0].outerHTML;else if("blockquote"===$){for(m="",h=0;h<v.length;h++)m+=v[h].outerHTML;for(g=angular.element(f),g[0].innerHTML=m,v[0].parentNode.insertBefore(g[0],v[0]),h=v.length-1;h>=0;h--)v[h].parentNode&&v[h].parentNode.removeChild(v[h])}else for(h=0;h<v.length;h++)g=angular.element(f),g[0].innerHTML=v[h].innerHTML,v[h].parentNode.insertBefore(g[0],v[h]),v[h].parentNode.removeChild(v[h])}else{var _=g.parent(),I=_.contents();for(h=0;h<I.length;h++)_.parent().hasClass("ta-bind")&&3===I[h].nodeType&&(w=angular.element("<"+o+">"),w[0].innerHTML=I[h].outerHTML,I[h]=w[0]),_.parent()[0].insertBefore(I[h],_[0]);_.remove()}return void e.setSelectionToElementEnd(g[0])}if("createlink"===u.toLowerCase()){var P='<a href="'+f+'" target="'+(p.a.target?p.a.target:"")+'">',M="</a>",R=e.getSelection();if(R.collapsed)e.insertHtml(P+f+M,c);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var F=angular.element(P+M)[0];rangy.getSelection().getRangeAt(0).surroundContents(F)}return}if("inserthtml"===u.toLowerCase())return void e.insertHtml(f,c)}}try{r[0].execCommand(u,d,f)}catch(x){}}}}]).service("taSelection",["$window","$document","taDOM",function(e,t,i){var a=t[0],o=e.rangy,s=function(e,t){return e.tagName&&e.tagName.match(/^br$/i)&&0===t&&!e.previousSibling?{element:e.parentNode,offset:0}:{element:e,offset:t}},l={getSelection:function(){var e=o.getSelection().getRangeAt(0),t=e.commonAncestorContainer,n={start:s(e.startContainer,e.startOffset),end:s(e.endContainer,e.endOffset),collapsed:e.collapsed};return t=3===t.nodeType?t.parentNode:t,t.parentNode===n.start.element||t.parentNode===n.end.element?n.container=t.parentNode:n.container=t,n},getOnlySelectedElements:function(){var e=o.getSelection().getRangeAt(0),t=e.commonAncestorContainer;return t=3===t.nodeType?t.parentNode:t,e.getNodes([1],function(e){return e.parentNode===t})},getSelectionElement:function(){return l.getSelection().container},setSelection:function(e,t,n){var i=o.createRange();i.setStart(e,t),i.setEnd(e,n),o.getSelection().setSingleRange(i)},setSelectionBeforeElement:function(e){var t=o.createRange();t.selectNode(e),t.collapse(!0),o.getSelection().setSingleRange(t)},setSelectionAfterElement:function(e){var t=o.createRange();t.selectNode(e),t.collapse(!1),o.getSelection().setSingleRange(t)},setSelectionToElementStart:function(e){var t=o.createRange();t.selectNodeContents(e),t.collapse(!0),o.getSelection().setSingleRange(t)},setSelectionToElementEnd:function(e){var t=o.createRange();t.selectNodeContents(e),t.collapse(!1),e.childNodes&&e.childNodes[e.childNodes.length-1]&&"br"===e.childNodes[e.childNodes.length-1].nodeName&&(t.startOffset=t.endOffset=t.startOffset-1),o.getSelection().setSingleRange(t)},insertHtml:function(e,t){var s,c,u,d,f,p,h,g=angular.element("<div>"+e+"</div>"),m=o.getSelection().getRangeAt(0),v=a.createDocumentFragment(),y=g[0].childNodes,$=!0;if(y.length>0){for(d=[],u=0;u<y.length;u++)"p"===y[u].nodeName.toLowerCase()&&""===y[u].innerHTML.trim()||3===y[u].nodeType&&""===y[u].nodeValue.trim()||($=$&&!n.test(y[u].nodeName),d.push(y[u]));for(var b=0;b<d.length;b++)p=v.appendChild(d[b]);!$&&m.collapsed&&/^(|<br(|\/)>)$/i.test(m.startContainer.innerHTML)&&m.selectNode(m.startContainer)}else $=!0,p=v=a.createTextNode(e);if($)m.deleteContents();else if(m.collapsed&&m.startContainer!==t)if(m.startContainer.innerHTML&&m.startContainer.innerHTML.match(/^<[^>]*>$/i))s=m.startContainer,1===m.startOffset?(m.setStartAfter(s),m.setEndAfter(s)):(m.setStartBefore(s),m.setEndBefore(s));else{if(3===m.startContainer.nodeType&&m.startContainer.parentNode!==t)for(s=m.startContainer.parentNode,c=s.cloneNode(),i.splitNodes(s.childNodes,s,c,m.startContainer,m.startOffset);!r.test(s.nodeName);){angular.element(s).after(c),s=s.parentNode;var w=c;c=s.cloneNode(),i.splitNodes(s.childNodes,s,c,w)}else s=m.startContainer,c=s.cloneNode(),i.splitNodes(s.childNodes,s,c,void 0,void 0,m.startOffset);if(angular.element(s).after(c),m.setStartAfter(s),m.setEndAfter(s),/^(|<br(|\/)>)$/i.test(s.innerHTML.trim())&&(m.setStartBefore(s),m.setEndBefore(s),angular.element(s).remove()),/^(|<br(|\/)>)$/i.test(c.innerHTML.trim())&&angular.element(c).remove(),"li"===s.nodeName.toLowerCase()){for(h=a.createDocumentFragment(),f=0;f<v.childNodes.length;f++)g=angular.element("<li>"),i.transferChildNodes(v.childNodes[f],g[0]),i.transferNodeAttributes(v.childNodes[f],g[0]),h.appendChild(g[0]);v=h,p&&(p=v.childNodes[v.childNodes.length-1],p=p.childNodes[p.childNodes.length-1])}}else m.deleteContents();m.insertNode(v),p&&l.setSelectionToElementEnd(p)}};return l}]).service("taDOM",function(){var e={getByAttribute:function(t,n){var i=[],r=t.children();return r.length&&angular.forEach(r,function(t){i=i.concat(e.getByAttribute(angular.element(t),n))}),void 0!==t.attr(n)&&i.push(t),i},transferChildNodes:function(e,t){for(t.innerHTML="";e.childNodes.length>0;)t.appendChild(e.childNodes[0]);return t},splitNodes:function(t,n,i,r,a,o){if(!r&&isNaN(o))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var s=document.createDocumentFragment(),l=document.createDocumentFragment(),c=0;t.length>0&&(isNaN(o)||o!==c)&&t[0]!==r;)s.appendChild(t[0]),c++;for(!isNaN(a)&&a>=0&&t[0]&&(s.appendChild(document.createTextNode(t[0].nodeValue.substring(0,a))),t[0].nodeValue=t[0].nodeValue.substring(a));t.length>0;)l.appendChild(t[0]);e.transferChildNodes(s,n),e.transferChildNodes(l,i)},transferNodeAttributes:function(e,t){for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].name,e.attributes[n].value);return t}};return e}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){var r=parseInt(e.$eval(n.taMaxText));if(isNaN(r))throw"Max text must be an integer";n.$observe("taMaxText",function(e){if(r=parseInt(e),isNaN(r))throw"Max text must be an integer";i.$dirty&&i.$validate()}),i.$validators.taMaxText=function(e){var t=angular.element("<div/>");return t.html(e),t.text().length<=r}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){var r=parseInt(e.$eval(n.taMinText));if(isNaN(r))throw"Min text must be an integer";n.$observe("taMinText",function(e){if(r=parseInt(e),isNaN(r))throw"Min text must be an integer";i.$dirty&&i.$validate()}),i.$validators.taMinText=function(e){var t=angular.element("<div/>");return t.html(e),!t.text().length||t.text().length>=r}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var e=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(t){return function(n){if(!n)return!0;var i,r=/(^[^<]|>)[^<]/i.exec(n);return r?i=r.index:(n=n.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),i=n.indexOf(">")),n=n.trim().substring(i,i+100),/^[^<>]+$/i.test(n)?!1:0===n.length||n===t||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(n)?!0:/>\s*[^\s<]/i.test(n)||e.test(n)?!1:!0}}}]).directive("taButton",[function(){return{link:function(e,t,n){t.attr("unselectable","on"),t.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(i,a,l,c,u,d,f,h,g,m,v,y,$,b){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(d,w,x,S){function C(e){var t;return z.forEach(function(n){if(n.keyCode===e.keyCode){var i=(e.metaKey?U:0)+(e.ctrlKey?B:0)+(e.shiftKey?j:0)+(e.altKey?H:0);if(n.forbiddenModifiers&i)return;n.mustHaveModifiers.every(function(e){return i&e})&&(t=n.specialKey)}}),t}var k,E,A,T,D=S[0],_=S[1]||{},I=void 0!==w.attr("contenteditable")&&w.attr("contenteditable"),P=I||"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase(),M=!1,R=!1,F=!1,N=x.taUnsafeSanitizer||m.disableSanitizer,L=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,O=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,B=1,U=2,H=4,j=8,z=[{specialKey:"UndoKey",forbiddenModifiers:H+j,mustHaveModifiers:[U+B],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:H,mustHaveModifiers:[U+B,j],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:H+j,mustHaveModifiers:[U+B],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:U+j+H+B,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:U+H+B,mustHaveModifiers:[j],keyCode:9}];void 0===x.taDefaultWrap&&(x.taDefaultWrap="p"),""===x.taDefaultWrap?(A="",T=void 0===e.ie?"<div><br></div>":e.ie>=11?"<p><br></p>":e.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(A=void 0===e.ie||e.ie>=11?"<"+x.taDefaultWrap+"><br></"+x.taDefaultWrap+">":e.ie<=8?"<"+x.taDefaultWrap.toUpperCase()+"></"+x.taDefaultWrap.toUpperCase()+">":"<"+x.taDefaultWrap+"></"+x.taDefaultWrap+">",T=void 0===e.ie||e.ie>=11?"<"+x.taDefaultWrap+"><br></"+x.taDefaultWrap+">":e.ie<=8?"<"+x.taDefaultWrap.toUpperCase()+">&nbsp;</"+x.taDefaultWrap.toUpperCase()+">":"<"+x.taDefaultWrap+">&nbsp;</"+x.taDefaultWrap+">"),_.$options||(_.$options={});var q=v(T),V=function(e){if(q(e))return e;var t=angular.element("<div>"+e+"</div>");if(0===t.children().length)e="<"+x.taDefaultWrap+">"+e+"</"+x.taDefaultWrap+">";else{var i,r=t[0].childNodes,a=!1;for(i=0;i<r.length&&!(a=r[i].nodeName.toLowerCase().match(n));i++);if(a)for(e="",i=0;i<r.length;i++){var o=r[i],s=o.nodeName.toLowerCase();if("#comment"===s)e+="<!--"+o.nodeValue+"-->";else if("#text"===s){var l=o.textContent;e+=l.trim()?"<"+x.taDefaultWrap+">"+l+"</"+x.taDefaultWrap+">":l}else if(s.match(n))e+=o.outerHTML;else{var c=o.outerHTML||o.nodeValue;e+=""!==c.trim()?"<"+x.taDefaultWrap+">"+c+"</"+x.taDefaultWrap+">":c}}else e="<"+x.taDefaultWrap+">"+e+"</"+x.taDefaultWrap+">"}return e};x.taPaste&&(E=y(x.taPaste)),w.addClass("ta-bind");var W;d["$undoManager"+(x.id||"")]=D.$undoManager={_stack:[],_index:0,_max:1e3,push:function(e){return"undefined"==typeof e||null===e||"undefined"!=typeof this.current()&&null!==this.current()&&e===this.current()?e:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(e),W&&a.cancel(W),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,e)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(e){return 0>e||e>this._stack.length-1?void 0:(this._index=e,this.current())},current:function(){return this._stack[this._index]}};var G,K=d["$undoTaBind"+(x.id||"")]=function(){if(!M&&I){var e=D.$undoManager.undo();"undefined"!=typeof e&&null!==e&&(ue(e),Q(e,!1),G&&a.cancel(G),G=a(function(){w[0].focus(),f.setSelectionToElementEnd(w[0])},1))}},X=d["$redoTaBind"+(x.id||"")]=function(){if(!M&&I){var e=D.$undoManager.redo();"undefined"!=typeof e&&null!==e&&(ue(e),Q(e,!1),G&&a.cancel(G),G=a(function(){w[0].focus(),f.setSelectionToElementEnd(w[0])},1))}},Y=function(){if(I)return w[0].innerHTML;if(P)return w.val();throw"textAngular Error: attempting to update non-editable taBind"},Q=function(e,t,n){F=n||!1,("undefined"==typeof t||null===t)&&(t=I),("undefined"==typeof e||null===e)&&(e=Y()),q(e)?(""!==D.$viewValue&&D.$setViewValue(""),t&&""!==D.$undoManager.current()&&D.$undoManager.push("")):(ce(),D.$viewValue!==e&&(D.$setViewValue(e),t&&D.$undoManager.push(e))),D.$render()};d["updateTaBind"+(x.id||"")]=function(){M||Q(void 0,void 0,!0)};var J=function(e){return D.$oldViewValue=i(u(e),D.$oldViewValue,N)};if(w.attr("required")&&(D.$validators.required=function(e,t){return!q(e||t)}),D.$parsers.push(J),D.$parsers.unshift(V),D.$formatters.push(J),D.$formatters.unshift(V),D.$formatters.unshift(function(e){return D.$undoManager.push(e||"")}),P)if(d.events={},I){var Z=!1,ee=function(e){if(e&&e.trim().length){if(e.match(/class=["']*Mso(Normal|List)/i)){var t=e.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);t=t?t[1]:e,t=t.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var n=angular.element("<div>"+t+"</div>"),r=angular.element("<div></div>"),o={element:null,lastIndent:[],lastLi:null,isUl:!1};o.lastIndent.peek=function(){var e=this.length;return e>0?this[e-1]:void 0};for(var s=function(e){o.isUl=e,o.element=angular.element(e?"<ul>":"<ol>"),o.lastIndent=[],o.lastIndent.peek=function(){var e=this.length;return e>0?this[e-1]:void 0},o.lastLevelMatch=null},l=0;l<=n[0].childNodes.length;l++)if(n[0].childNodes[l]&&"#text"!==n[0].childNodes[l].nodeName&&"p"===n[0].childNodes[l].tagName.toLowerCase()){var c=angular.element(n[0].childNodes[l]),u=(c.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(u){if(c[0].childNodes.length<2||c[0].childNodes[1].childNodes.length<1)continue;var p="bullet"===u[1].toLowerCase()||"number"!==u[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(c[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(c[0].childNodes[1].childNodes[0].innerHTML)),h=(c.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),g=parseFloat(h?h[1]:0),m=(c.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(m&&m[2]&&(g=parseInt(m[2])),m&&(!o.lastLevelMatch||m[1]!==o.lastLevelMatch[1])||!u[3]||"first"===u[3].toLowerCase()||null===o.lastIndent.peek()||o.isUl!==p&&o.lastIndent.peek()===g)s(p),r.append(o.element);else if(null!=o.lastIndent.peek()&&o.lastIndent.peek()<g)o.element=angular.element(p?"<ul>":"<ol>"),o.lastLi.append(o.element);else if(null!=o.lastIndent.peek()&&o.lastIndent.peek()>g){for(;null!=o.lastIndent.peek()&&o.lastIndent.peek()>g;)if("li"!==o.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(o.element.parent()[0].tagName.toLowerCase()))break;o.element=o.element.parent(),o.lastIndent.pop()}else o.element=o.element.parent();o.isUl="ul"===o.element[0].tagName.toLowerCase(),p!==o.isUl&&(s(p),r.append(o.element))}o.lastLevelMatch=m,g!==o.lastIndent.peek()&&o.lastIndent.push(g),o.lastLi=angular.element("<li>"),o.element.append(o.lastLi),o.lastLi.html(c.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),c.remove()}else s(!1),r.append(c)}var v=function(e){e=angular.element(e);for(var t=e[0].childNodes.length-1;t>=0;t--)e.after(e[0].childNodes[t]);e.remove()};angular.forEach(r.find("span"),function(e){e.removeAttribute("lang"),e.attributes.length<=0&&v(e)}),angular.forEach(r.find("font"),v),e=r.html()}else{if(e=e.replace(/<(|\/)meta[^>]*?>/gi,""),e.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(e.match(/<[^>]*?(text-angular)[^>]*?>/)){var y=angular.element("<div>"+e+"</div>");y.find("textarea").remove();for(var b=$.getByAttribute(y,"ta-bind"),x=0;x<b.length;x++){for(var S=b[x][0].parentNode.parentNode,C=0;C<b[x][0].childNodes.length;C++)S.parentNode.insertBefore(b[x][0].childNodes[C],S);S.parentNode.removeChild(S)}e=y.html().replace('<br class="Apple-interchange-newline">',"")}}else e.match(/^<span/)&&(e.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(e=e.replace(/<(|\/)span[^>]*?>/gi,"")));
e=e.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(e)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(e)===!1&&(e=e.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),e=e.replace(/^[ |\u00A0]+/gm,function(e){for(var t="",n=0;n<e.length;n++)t+="&nbsp;";return t}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),E&&(e=E(d,{$html:e})||e),e=i(e,"",N),f.insertHtml(e,w[0]),a(function(){D.$setViewValue(Y()),Z=!1,w.removeClass("processing-paste")},0)}else Z=!1,w.removeClass("processing-paste")};w.on("paste",d.events.paste=function(e,t){if(t&&angular.extend(e,t),M||Z)return e.stopPropagation(),e.preventDefault(),!1;Z=!0,w.addClass("processing-paste");var n,i=(e.originalEvent||e).clipboardData;if(i&&i.getData&&i.types.length>0){for(var r="",o=0;o<i.types.length;o++)r+=" "+i.types[o];return/text\/html/i.test(r)?n=i.getData("text/html"):/text\/plain/i.test(r)&&(n=i.getData("text/plain")),ee(n),e.stopPropagation(),e.preventDefault(),!1}var s=l.rangy.saveSelection(),u=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');c.find("body").append(u),u[0].focus(),a(function(){l.rangy.restoreSelection(s),ee(u[0].innerHTML),w[0].focus(),u.remove()},0)}),w.on("cut",d.events.cut=function(e){M?e.preventDefault():a(function(){D.$setViewValue(Y())},0)}),w.on("keydown",d.events.keydown=function(e,t){t&&angular.extend(e,t),e.specialKey=C(e);var n;if(m.keyMappings.forEach(function(t){e.specialKey===t.commandKeyCode&&(e.specialKey=void 0),t.testForKey(e)&&(n=t.commandKeyCode),("UndoKey"===t.commandKeyCode||"RedoKey"===t.commandKeyCode)&&(t.enablePropagation||e.preventDefault())}),"undefined"!=typeof n&&(e.specialKey=n),"undefined"==typeof e.specialKey||"UndoKey"===e.specialKey&&"RedoKey"===e.specialKey||(e.preventDefault(),b.sendKeyCommand(d,e)),!M&&("UndoKey"===e.specialKey&&(K(),e.preventDefault()),"RedoKey"===e.specialKey&&(X(),e.preventDefault()),13===e.keyCode&&!e.shiftKey)){var i,a=f.getSelectionElement();if(!a.tagName.match(r))return;var o=angular.element(A);if(/^<br(|\/)>$/i.test(a.innerHTML.trim())&&"blockquote"===a.parentNode.tagName.toLowerCase()&&!a.nextSibling){i=angular.element(a);var s=i.parent();s.after(o),i.remove(),0===s.children().length&&s.remove(),f.setSelectionToElementStart(o[0]),e.preventDefault()}else/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(a.innerHTML.trim())&&"blockquote"===a.tagName.toLowerCase()&&(i=angular.element(a),i.after(o),i.remove(),f.setSelectionToElementStart(o[0]),e.preventDefault())}});var te;if(w.on("keyup",d.events.keyup=function(e,t){if(t&&angular.extend(e,t),9===e.keyCode){var n=f.getSelection();return void(n.start.element===w[0]&&w.children().length&&f.setSelectionToElementStart(w.children()[0]))}if(W&&a.cancel(W),!M&&!L.test(e.keyCode)){if(""!==A&&13===e.keyCode&&!e.shiftKey){for(var i=f.getSelectionElement();!i.tagName.match(r)&&i!==w[0];)i=i.parentNode;if(i.tagName.toLowerCase()!==x.taDefaultWrap&&"li"!==i.tagName.toLowerCase()&&(""===i.innerHTML.trim()||"<br>"===i.innerHTML.trim())){var o=angular.element(A);angular.element(i).replaceWith(o),f.setSelectionToElementStart(o[0])}}var s=Y();""!==A&&""===s.trim()?(ue(A),f.setSelectionToElementStart(w.children()[0])):"<"!==s.substring(0,1)&&""!==x.taDefaultWrap;var l=k!==e.keyCode&&O.test(e.keyCode);te&&a.cancel(te),te=a(function(){Q(s,l,!0)},_.$options.debounce||400),l||(W=a(function(){D.$undoManager.push(s)},250)),k=e.keyCode}}),w.on("blur",d.events.blur=function(){R=!1,M?(F=!0,D.$render()):Q(void 0,void 0,!0)}),x.placeholder&&(e.ie>8||void 0===e.ie)){var ne;if(!x.id)throw"textAngular Error: An unique ID is required for placeholders to work";ne=o("#"+x.id+".placeholder-text:before",'content: "'+x.placeholder+'"'),d.$on("$destroy",function(){s(ne)})}w.on("focus",d.events.focus=function(){R=!0,w.removeClass("placeholder-text"),ce()}),w.on("mouseup",d.events.mouseup=function(){var e=f.getSelection();e.start.element===w[0]&&w.children().length&&f.setSelectionToElementStart(w.children()[0])}),w.on("mousedown",d.events.mousedown=function(e,t){t&&angular.extend(e,t),e.stopPropagation()})}else{w.on("change blur",d.events.change=d.events.blur=function(){M||D.$setViewValue(Y())}),w.on("keydown",d.events.keydown=function(e,t){if(t&&angular.extend(e,t),9===e.keyCode){var n=this.selectionStart,i=this.selectionEnd,r=w.val();if(e.shiftKey){var a=r.lastIndexOf("\n",n),o=r.lastIndexOf("	",n);-1!==o&&o>=a&&(w.val(r.substring(0,o)+r.substring(o+1)),this.selectionStart=this.selectionEnd=n-1)}else w.val(r.substring(0,n)+"	"+r.substring(i)),this.selectionStart=this.selectionEnd=n+1;e.preventDefault()}});var ie=function(e,t){for(var n="",i=0;t>i;i++)n+=e;return n},re=function(e,t,n){for(var i=0;i<e.length;i++)t.call(n,i,e[i])},ae=function(e,t){var n="",i=e.childNodes;return t++,n+=ie("	",t-1)+e.outerHTML.substring(0,4),re(i,function(e,i){var r=i.nodeName.toLowerCase();return"#comment"===r?void(n+="<!--"+i.nodeValue+"-->"):"#text"===r?void(n+=i.textContent):void(i.outerHTML&&(n+="ul"===r||"ol"===r?"\n"+ae(i,t):"\n"+ie("	",t)+i.outerHTML))}),n+="\n"+ie("	",t-1)+e.outerHTML.substring(e.outerHTML.lastIndexOf("<"))};D.$formatters.unshift(function(e){var t=angular.element("<div>"+e+"</div>")[0].childNodes;return t.length>0&&(e="",re(t,function(t,n){var i=n.nodeName.toLowerCase();return"#comment"===i?void(e+="<!--"+n.nodeValue+"-->"):"#text"===i?void(e+=n.textContent):void(n.outerHTML&&(e.length>0&&(e+="\n"),e+="ul"===i||"ol"===i?""+ae(n,0):""+n.outerHTML))})),e})}var oe,se=function(e){return d.$emit("ta-element-select",this),e.preventDefault(),!1},le=function(e,t){if(t&&angular.extend(e,t),!p&&!M){p=!0;var n;n=e.originalEvent?e.originalEvent.dataTransfer:e.dataTransfer,d.$emit("ta-drop-event",this,e,n),a(function(){p=!1,Q(void 0,void 0,!0)},100)}},ce=d["reApplyOnSelectorHandlers"+(x.id||"")]=function(){M||angular.forEach(h,function(e){w.find(e).off("click",se).on("click",se)})},ue=function(e){w[0].innerHTML=e},de=!1;D.$render=function(){if(!de){de=!0;var e=D.$viewValue||"";F||(I&&R&&(w.removeClass("placeholder-text"),oe&&a.cancel(oe),oe=a(function(){R||(w[0].focus(),f.setSelectionToElementEnd(w.children()[w.children().length-1])),oe=void 0},1)),I?(ue(x.placeholder?""===e?A:e:""===e?A:e),M?w.off("drop",le):(ce(),w.on("drop",le))):"textarea"!==w[0].tagName.toLowerCase()&&"input"!==w[0].tagName.toLowerCase()?ue(g(e)):w.val(e)),I&&x.placeholder&&(""===e?R?w.removeClass("placeholder-text"):w.addClass("placeholder-text"):w.removeClass("placeholder-text")),de=F=!1}},x.taReadonly&&(M=d.$eval(x.taReadonly),M?(w.addClass("ta-readonly"),("textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase())&&w.attr("disabled","disabled"),void 0!==w.attr("contenteditable")&&w.attr("contenteditable")&&w.removeAttr("contenteditable")):(w.removeClass("ta-readonly"),"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase()?w.removeAttr("disabled"):I&&w.attr("contenteditable","true")),d.$watch(x.taReadonly,function(e,t){t!==e&&(e?(w.addClass("ta-readonly"),("textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase())&&w.attr("disabled","disabled"),void 0!==w.attr("contenteditable")&&w.attr("contenteditable")&&w.removeAttr("contenteditable"),angular.forEach(h,function(e){w.find(e).on("click",se)}),w.off("drop",le)):(w.removeClass("ta-readonly"),"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase()?w.removeAttr("disabled"):I&&w.attr("contenteditable","true"),angular.forEach(h,function(e){w.find(e).off("click",se)}),w.on("drop",le)),M=e)})),I&&!M&&(angular.forEach(h,function(e){w.find(e).on("click",se)}),w.on("drop",le),w.on("blur",function(){e.webkit&&(t=!0)}))}}}]);var p=!1,h=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);h.config([function(){angular.forEach(taTools,function(e,t){delete taTools[t]})}]),h.run([function(){if("function"==typeof define&&define.amd)define(function(e){window.rangy=e("rangy"),window.rangy.saveSelection=e("rangy/lib/rangy-selectionsaverestore")});else if("function"==typeof require&&"undefined"!=typeof module&&"object"==typeof exports)window.rangy=require("rangy"),window.rangy.saveSelection=require("rangy/lib/rangy-selectionsaverestore");else{if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}}]),h.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(e,t,n,i,r,a,o,s,l,c,u,d){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(f,p,h,g){var m,v,y,$,b,w,x,S,C,k,E,A=h.serial?h.serial:Math.floor(1e16*Math.random());f._name=h.name?h.name:"textAngularEditor"+A;var T=function(e,n,i){t(function(){var t=function(){e.off(n,t),i.apply(this,arguments)};e.on(n,t)},100)};if(C=r(h.taDefaultWrap),angular.extend(f,angular.copy(n),{wrapSelection:function(e,t,n){"undo"===e.toLowerCase()?f["$undoTaBindtaTextElement"+A]():"redo"===e.toLowerCase()?f["$redoTaBindtaTextElement"+A]():(C(e,!1,t,f.defaultTagAttributes),n&&f["reApplyOnSelectorHandlerstaTextElement"+A](),f.displayElements.text[0].focus())},showHtml:f.$eval(h.taShowHtml)||!1}),h.taFocussedClass&&(f.classes.focussed=h.taFocussedClass),h.taTextEditorClass&&(f.classes.textEditor=h.taTextEditorClass),h.taHtmlEditorClass&&(f.classes.htmlEditor=h.taHtmlEditorClass),h.taDefaultTagAttributes)try{angular.extend(f.defaultTagAttributes,angular.fromJson(h.taDefaultTagAttributes))}catch(D){c.error(D)}h.taTextEditorSetup&&(f.setup.textEditorSetup=f.$parent.$eval(h.taTextEditorSetup)),h.taHtmlEditorSetup&&(f.setup.htmlEditorSetup=f.$parent.$eval(h.taHtmlEditorSetup)),h.taFileDrop?f.fileDropHandler=f.$parent.$eval(h.taFileDrop):f.fileDropHandler=f.defaultFileDropHandler,x=p[0].innerHTML,p[0].innerHTML="",f.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},f.displayElements.popover.append(f.displayElements.popoverArrow),f.displayElements.popover.append(f.displayElements.popoverContainer),f.displayElements.scrollWindow.append(f.displayElements.popover),f.displayElements.popover.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1}),f.showPopover=function(e){f.displayElements.popover.css("display","block"),f.reflowPopover(e),l.addClass(f.displayElements.popover,"in"),T(s.find("body"),"click keyup",function(){f.hidePopover()})},f.reflowPopover=function(e){f.displayElements.text[0].offsetHeight-51>e[0].offsetTop?(f.displayElements.popover.css("top",e[0].offsetTop+e[0].offsetHeight+f.displayElements.scrollWindow[0].scrollTop+"px"),f.displayElements.popover.removeClass("top").addClass("bottom")):(f.displayElements.popover.css("top",e[0].offsetTop-54+f.displayElements.scrollWindow[0].scrollTop+"px"),f.displayElements.popover.removeClass("bottom").addClass("top"));var t=f.displayElements.text[0].offsetWidth-f.displayElements.popover[0].offsetWidth,n=e[0].offsetLeft+e[0].offsetWidth/2-f.displayElements.popover[0].offsetWidth/2;f.displayElements.popover.css("left",Math.max(0,Math.min(t,n))+"px"),f.displayElements.popoverArrow.css("margin-left",Math.min(n,Math.max(0,n-t))-11+"px")},f.hidePopover=function(){f.displayElements.popover.css("display",""),f.displayElements.popoverContainer.attr("style",""),f.displayElements.popoverContainer.attr("class","popover-content"),f.displayElements.popover.removeClass("in")},f.displayElements.resize.overlay.append(f.displayElements.resize.background),angular.forEach(f.displayElements.resize.anchors,function(e){f.displayElements.resize.overlay.append(e)}),f.displayElements.resize.overlay.append(f.displayElements.resize.info),f.displayElements.scrollWindow.append(f.displayElements.resize.overlay),f.reflowResizeOverlay=function(e){e=angular.element(e)[0],f.displayElements.resize.overlay.css({display:"block",left:e.offsetLeft-5+"px",top:e.offsetTop-5+"px",width:e.offsetWidth+10+"px",height:e.offsetHeight+10+"px"}),f.displayElements.resize.info.text(e.offsetWidth+" x "+e.offsetHeight)},f.showResizeOverlay=function(e){var t=s.find("body");k=function(n){var i={width:parseInt(e.attr("width")),height:parseInt(e.attr("height")),x:n.clientX,y:n.clientY};(void 0===i.width||isNaN(i.width))&&(i.width=e[0].offsetWidth),(void 0===i.height||isNaN(i.height))&&(i.height=e[0].offsetHeight),f.hidePopover();var r=i.height/i.width,a=function(t){function n(e){return Math.round(Math.max(0,e))}var a={x:Math.max(0,i.width+(t.clientX-i.x)),y:Math.max(0,i.height+(t.clientY-i.y))},o=void 0!==h.taResizeForceAspectRatio,s=h.taResizeMaintainAspectRatio,l=o||s&&!t.shiftKey;if(l){var c=a.y/a.x;a.x=r>c?a.x:a.y/r,a.y=r>c?a.x*r:a.y}var u=angular.element(e);u.css("height",n(a.y)+"px"),u.css("width",n(a.x)+"px"),f.reflowResizeOverlay(e)};t.on("mousemove",a),T(t,"mouseup",function(n){n.preventDefault(),n.stopPropagation(),t.off("mousemove",a),f.showPopover(e)}),n.stopPropagation(),n.preventDefault()},f.displayElements.resize.anchors[3].off("mousedown"),f.displayElements.resize.anchors[3].on("mousedown",k),f.reflowResizeOverlay(e),T(t,"click",function(){f.hideResizeOverlay()})},f.hideResizeOverlay=function(){f.displayElements.resize.anchors[3].off("mousedown",k),f.displayElements.resize.overlay.css("display","")},f.setup.htmlEditorSetup(f.displayElements.html),f.setup.textEditorSetup(f.displayElements.text),f.displayElements.html.attr({id:"taHtmlElement"+A,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":p.attr("ng-model-options")}),f.displayElements.text.attr({id:"taTextElement"+A,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":p.attr("ng-model-options")}),f.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),h.taDefaultWrap&&f.displayElements.text.attr("ta-default-wrap",h.taDefaultWrap),h.taUnsafeSanitizer&&(f.displayElements.text.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer),f.displayElements.html.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer)),f.displayElements.scrollWindow.append(f.displayElements.text),p.append(f.displayElements.scrollWindow),p.append(f.displayElements.html),f.displayElements.forminput.attr("name",f._name),p.append(f.displayElements.forminput),h.tabindex&&(p.removeAttr("tabindex"),f.displayElements.text.attr("tabindex",h.tabindex),f.displayElements.html.attr("tabindex",h.tabindex)),h.placeholder&&(f.displayElements.text.attr("placeholder",h.placeholder),f.displayElements.html.attr("placeholder",h.placeholder)),h.taDisabled&&(f.displayElements.text.attr("ta-readonly","disabled"),f.displayElements.html.attr("ta-readonly","disabled"),f.disabled=f.$parent.$eval(h.taDisabled),f.$parent.$watch(h.taDisabled,function(e){f.disabled=e,f.disabled?p.addClass(f.classes.disabled):p.removeClass(f.classes.disabled)})),h.taPaste&&(f._pasteHandler=function(e){return d(h.taPaste)(f.$parent,{$html:e})},f.displayElements.text.attr("ta-paste","_pasteHandler($html)")),e(f.displayElements.scrollWindow)(f),e(f.displayElements.html)(f),f.updateTaBindtaTextElement=f["updateTaBindtaTextElement"+A],f.updateTaBindtaHtmlElement=f["updateTaBindtaHtmlElement"+A],p.addClass("ta-root"),f.displayElements.scrollWindow.addClass("ta-text ta-editor "+f.classes.textEditor),f.displayElements.html.addClass("ta-html ta-editor "+f.classes.htmlEditor),f._actionRunning=!1;var _=!1;if(f.startAction=function(){return f._actionRunning=!0,_=o.rangy.saveSelection(),function(){_&&o.rangy.restoreSelection(_)}},f.endAction=function(){f._actionRunning=!1,_&&(f.showHtml?f.displayElements.html[0].focus():f.displayElements.text[0].focus(),o.rangy.removeMarkers(_)),_=!1,f.updateSelectedStyles(),f.showHtml||f["updateTaBindtaTextElement"+A]()},b=function(){f.focussed=!0,p.addClass(f.classes.focussed),S.focus(),p.triggerHandler("focus")},f.displayElements.html.on("focus",b),f.displayElements.text.on("focus",b),w=function(e){return f._actionRunning||s[0].activeElement===f.displayElements.html[0]||s[0].activeElement===f.displayElements.text[0]||(p.removeClass(f.classes.focussed),S.unfocus(),t(function(){f._bUpdateSelectedStyles=!1,p.triggerHandler("blur"),f.focussed=!1},0)),e.preventDefault(),!1},f.displayElements.html.on("blur",w),f.displayElements.text.on("blur",w),f.displayElements.text.on("paste",function(e){p.triggerHandler("paste",e)}),f.queryFormatBlockState=function(e){return!f.showHtml&&e.toLowerCase()===s[0].queryCommandValue("formatBlock").toLowerCase()},f.queryCommandState=function(e){return f.showHtml?"":s[0].queryCommandState(e)},f.switchView=function(){f.showHtml=!f.showHtml,l.enabled(!1,f.displayElements.html),l.enabled(!1,f.displayElements.text),f.showHtml?t(function(){return l.enabled(!0,f.displayElements.html),l.enabled(!0,f.displayElements.text),f.displayElements.html[0].focus()},100):t(function(){return l.enabled(!0,f.displayElements.html),l.enabled(!0,f.displayElements.text),f.displayElements.text[0].focus()},100)},h.ngModel){var I=!0;g.$render=function(){if(I){I=!1;var e=f.$parent.$eval(h.ngModel);void 0!==e&&null!==e||!x||""===x||g.$setViewValue(x)}f.displayElements.forminput.val(g.$viewValue),f.html=g.$viewValue||""},p.attr("required")&&(g.$validators.required=function(e,t){var n=e||t;return!(!n||""===n.trim())})}else f.displayElements.forminput.val(x),f.html=x;if(f.$watch("html",function(e,t){e!==t&&(h.ngModel&&g.$viewValue!==e&&g.$setViewValue(e),f.displayElements.forminput.val(e))}),h.taTargetToolbars)S=a.registerEditor(f._name,f,h.taTargetToolbars.split(","));else{var P=angular.element('<div text-angular-toolbar name="textAngularToolbar'+A+'">');h.taToolbar&&P.attr("ta-toolbar",h.taToolbar),h.taToolbarClass&&P.attr("ta-toolbar-class",h.taToolbarClass),h.taToolbarGroupClass&&P.attr("ta-toolbar-group-class",h.taToolbarGroupClass),h.taToolbarButtonClass&&P.attr("ta-toolbar-button-class",h.taToolbarButtonClass),h.taToolbarActiveButtonClass&&P.attr("ta-toolbar-active-button-class",h.taToolbarActiveButtonClass),h.taFocussedClass&&P.attr("ta-focussed-class",h.taFocussedClass),p.prepend(P),e(P)(f.$parent),S=a.registerEditor(f._name,f,["textAngularToolbar"+A])}f.$on("$destroy",function(){a.unregisterEditor(f._name),angular.element(window).off("blur")}),f.$on("ta-element-select",function(e,t){S.triggerElementSelect(e,t)&&f["reApplyOnSelectorHandlerstaTextElement"+A]()}),f.$on("ta-drop-event",function(e,n,i,r){f.displayElements.text[0].focus(),r&&r.files&&r.files.length>0?(angular.forEach(r.files,function(e){try{u.when(f.fileDropHandler(e,f.wrapSelection)||f.fileDropHandler!==f.defaultFileDropHandler&&u.when(f.defaultFileDropHandler(e,f.wrapSelection))).then(function(){f["updateTaBindtaTextElement"+A]()})}catch(t){c.error(t)}}),i.preventDefault(),i.stopPropagation()):t(function(){f["updateTaBindtaTextElement"+A]()},0)}),f._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){f._bUpdateSelectedStyles=!1,f.focussed=!1}),f.updateSelectedStyles=function(){var e;E&&t.cancel(E),void 0!==(e=i.getSelectionElement())&&e.parentNode!==f.displayElements.text[0]?S.updateSelectedStyles(angular.element(e)):S.updateSelectedStyles(),f._bUpdateSelectedStyles&&(E=t(f.updateSelectedStyles,200))},m=function(){return f.focussed?void(f._bUpdateSelectedStyles||(f._bUpdateSelectedStyles=!0,f.$apply(function(){f.updateSelectedStyles()}))):void(f._bUpdateSelectedStyles=!1)},f.displayElements.html.on("keydown",m),f.displayElements.text.on("keydown",m),v=function(){f._bUpdateSelectedStyles=!1},f.displayElements.html.on("keyup",v),f.displayElements.text.on("keyup",v),y=function(e,t){t&&angular.extend(e,t),f.$apply(function(){return S.sendKeyCommand(e)?(f._bUpdateSelectedStyles||f.updateSelectedStyles(),e.preventDefault(),!1):void 0})},f.displayElements.html.on("keypress",y),f.displayElements.text.on("keypress",y),$=function(){f._bUpdateSelectedStyles=!1,f.$apply(function(){f.updateSelectedStyles()})},f.displayElements.html.on("mouseup",$),f.displayElements.text.on("mouseup",$)}}}]),h.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(e,t,n){var i={},r={};return{registerEditor:function(n,a,o){if(!n||""===n)throw"textAngular Error: An editor requires a name";if(!a)throw"textAngular Error: An editor requires a scope";if(r[n])throw'textAngular Error: An Editor with name "'+n+'" already exists';var s=[];return angular.forEach(o,function(e){i[e]&&s.push(i[e])}),r[n]={scope:a,toolbars:o,_registerToolbar:function(e){this.toolbars.indexOf(e.name)>=0&&s.push(e)},editorFunctions:{disable:function(){angular.forEach(s,function(e){e.disabled=!0})},enable:function(){angular.forEach(s,function(e){e.disabled=!1})},focus:function(){angular.forEach(s,function(e){e._parent=a,e.disabled=!1,e.focussed=!0,a.focussed=!0})},unfocus:function(){angular.forEach(s,function(e){e.disabled=!0,e.focussed=!1}),a.focussed=!1},updateSelectedStyles:function(e){angular.forEach(s,function(t){angular.forEach(t.tools,function(n){n.activeState&&(t._parent=a,n.active=n.activeState(e))})})},sendKeyCommand:function(n){var i=!1;return(n.ctrlKey||n.metaKey||n.specialKey)&&angular.forEach(t,function(t,r){if(t.commandKeyCode&&(t.commandKeyCode===n.which||t.commandKeyCode===n.specialKey))for(var o=0;o<s.length;o++)if(void 0!==s[o].tools[r]){e.call(s[o].tools[r],a),i=!0;break}}),i},triggerElementSelect:function(e,n){var i=function(e,t){for(var n=!0,i=0;i<t.length;i++)n=n&&e.attr(t[i]);return n},r=[],o={},l=!1;n=angular.element(n);var c=!1;if(angular.forEach(t,function(e,t){e.onElementSelect&&e.onElementSelect.element&&e.onElementSelect.element.toLowerCase()===n[0].tagName.toLowerCase()&&(!e.onElementSelect.filter||e.onElementSelect.filter(n))&&(c=c||angular.isArray(e.onElementSelect.onlyWithAttrs)&&i(n,e.onElementSelect.onlyWithAttrs),(!e.onElementSelect.onlyWithAttrs||i(n,e.onElementSelect.onlyWithAttrs))&&(o[t]=e))}),c?(angular.forEach(o,function(e,t){e.onElementSelect.onlyWithAttrs&&i(n,e.onElementSelect.onlyWithAttrs)&&r.push({name:t,tool:e})}),r.sort(function(e,t){return t.tool.onElementSelect.onlyWithAttrs.length-e.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(o,function(e,t){r.push({name:t,tool:e})}),r.length>0)for(var u=0;u<r.length;u++){for(var d=r[u].tool,f=r[u].name,p=0;p<s.length;p++)if(void 0!==s[p].tools[f]){d.onElementSelect.action.call(s[p].tools[f],e,n,a),l=!0;break}if(l)break}return l}}},r[n].editorFunctions},retrieveEditor:function(e){return r[e]},unregisterEditor:function(e){delete r[e]},registerToolbar:function(e){if(!e)throw"textAngular Error: A toolbar requires a scope";if(!e.name||""===e.name)throw"textAngular Error: A toolbar requires a name";if(i[e.name])throw'textAngular Error: A toolbar with name "'+e.name+'" already exists';i[e.name]=e,angular.forEach(r,function(t){t._registerToolbar(e)})},retrieveToolbar:function(e){return i[e]},retrieveToolbarsViaEditor:function(e){var t=[],n=this;return angular.forEach(this.retrieveEditor(e).toolbars,function(e){t.push(n.retrieveToolbar(e))}),t},unregisterToolbar:function(e){delete i[e]},updateToolsDisplay:function(e){var t=this;angular.forEach(e,function(e,n){t.updateToolDisplay(n,e)})},resetToolsDisplay:function(){var e=this;angular.forEach(t,function(t,n){e.resetToolDisplay(n)})},updateToolDisplay:function(e,t){var n=this;angular.forEach(i,function(i,r){n.updateToolbarToolDisplay(r,e,t)})},resetToolDisplay:function(e){var t=this;angular.forEach(i,function(n,i){t.resetToolbarToolDisplay(i,e)})},updateToolbarToolDisplay:function(e,t,n){if(!i[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';i[e].updateToolDisplay(t,n)},resetToolbarToolDisplay:function(e,n){if(!i[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';i[e].updateToolDisplay(n,t[n],!0)},removeTool:function(e){delete t[e],angular.forEach(i,function(t){delete t.tools[e];for(var n=0;n<t.toolbar.length;n++){for(var i,r=0;r<t.toolbar[n].length;r++){if(t.toolbar[n][r]===e){i={group:n,index:r};break}if(void 0!==i)break}void 0!==i&&(t.toolbar[i.group].slice(i.index,1),t._$element.children().eq(i.group).children().eq(i.index).remove())}})},addTool:function(e,t,r,a){n(e,t),angular.forEach(i,function(n){n.addTool(e,t,r,a)})},addToolToToolbar:function(e,t,r,a,o){n(e,t),i[r].addTool(e,t,a,o)},refreshEditor:function(e){if(!r[e])throw'textAngular Error: No Editor with name "'+e+'" exists';r[e].scope.updateTaBindtaTextElement(),r[e].scope.$$phase||r[e].scope.$digest()},sendKeyCommand:function(e,t){angular.forEach(r,function(n){return n.editorFunctions.sendKeyCommand(t)?(e._bUpdateSelectedStyles||e.updateSelectedStyles(),t.preventDefault(),!1):void 0})}}}]),h.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(e,t,n,i,r,a){return{scope:{name:"@"},restrict:"EA",link:function(o,s,l){if(!o.name||""===o.name)throw"textAngular Error: A toolbar requires a name";angular.extend(o,angular.copy(n)),l.taToolbar&&(o.toolbar=o.$parent.$eval(l.taToolbar)),l.taToolbarClass&&(o.classes.toolbar=l.taToolbarClass),l.taToolbarGroupClass&&(o.classes.toolbarGroup=l.taToolbarGroupClass),l.taToolbarButtonClass&&(o.classes.toolbarButton=l.taToolbarButtonClass),l.taToolbarActiveButtonClass&&(o.classes.toolbarButtonActive=l.taToolbarActiveButtonClass),l.taFocussedClass&&(o.classes.focussed=l.taFocussedClass),o.disabled=!0,o.focussed=!1,o._$element=s,s[0].innerHTML="",s.addClass("ta-toolbar "+o.classes.toolbar),o.$watch("focussed",function(){o.focussed?s.addClass(o.classes.focussed):s.removeClass(o.classes.focussed)});var c=function(t,n){var i;if(i=t&&t.display?angular.element(t.display):angular.element("<button type='button'>"),t&&t["class"]?i.addClass(t["class"]):i.addClass(o.classes.toolbarButton),i.attr("name",n.name),i.attr("ta-button","ta-button"),i.attr("ng-disabled","isDisabled()"),i.attr("tabindex","-1"),i.attr("ng-click","executeAction()"),i.attr("ng-class","displayActiveToolClass(active)"),t&&t.tooltiptext&&i.attr("title",t.tooltiptext),t&&!t.display&&!n._display&&(i[0].innerHTML="",t.buttontext&&(i[0].innerHTML=t.buttontext),t.iconclass)){var r=angular.element("<i>"),a=i[0].innerHTML;r.addClass(t.iconclass),i[0].innerHTML="",i.append(r),a&&""!==a&&i.append("&nbsp;"+a)}return n._lastToolDefinition=angular.copy(t),e(i)(n)};o.tools={},o._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var u={$window:a,$editor:function(){return o._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(e){return e?o.classes.toolbarButtonActive:""},executeAction:r};angular.forEach(o.toolbar,function(e){var t=angular.element("<div>");t.addClass(o.classes.toolbarGroup),angular.forEach(e,function(e){o.tools[e]=angular.extend(o.$new(!0),i[e],u,{name:e}),o.tools[e].$element=c(i[e],o.tools[e]),t.append(o.tools[e].$element)}),s.append(t)}),o.updateToolDisplay=function(e,t,n){var i=o.tools[e];if(i){if(i._lastToolDefinition&&!n&&(t=angular.extend({},i._lastToolDefinition,t)),null===t.buttontext&&null===t.iconclass&&null===t.display)throw'textAngular Error: Tool Definition for updating "'+e+'" does not have a valid display/iconclass/buttontext value';null===t.buttontext&&delete t.buttontext,null===t.iconclass&&delete t.iconclass,null===t.display&&delete t.display;var r=c(t,i);i.$element.replaceWith(r),i.$element=r}},o.addTool=function(e,t,n,r){o.tools[e]=angular.extend(o.$new(!0),i[e],u,{name:e}),o.tools[e].$element=c(i[e],o.tools[e]);var a;void 0===n&&(n=o.toolbar.length-1),a=angular.element(s.children()[n]),void 0===r?(a.append(o.tools[e].$element),o.toolbar[n][o.toolbar[n].length-1]=e):(a.children().eq(r).after(o.tools[e].$element),o.toolbar[n][r]=e)},t.registerToolbar(o),o.$on("$destroy",function(){t.unregisterToolbar(o.name)})}}}])}(),function(e,t,n){"use strict";function i(){this.$get=["$$sanitizeUri",function(e){return function(t){"undefined"!=typeof arguments[1]&&(arguments[1].version="taSanitize");var n=[];return o(t,d(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function r(e){var n=[],i=d(n,t.noop);return i.chars(e),n.join("")}function a(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function o(e,n){function i(e,i,a,o){if(i=t.lowercase(i),D[i])for(;u.last()&&_[u.last()];)r("",u.last());T[i]&&u.last()==i&&r("",i),o=k[i]||!!o,o||u.push(i);var l={};a.replace(g,function(e,t,n,i,r){var a=n||i||r||"";l[t]=s(a)}),n.start&&n.start(i,l,o)}function r(e,i){var r,a=0;if(i=t.lowercase(i))for(a=u.length-1;a>=0&&u[a]!=i;a--);if(a>=0){for(r=u.length-1;r>=a;r--)n.end&&n.end(u[r]);u.length=a}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var a,o,l,c,u=[],d=e;for(u.last=function(){return u[u.length-1]};e;){if(c="",o=!0,u.last()&&P[u.last()])e=e.replace(new RegExp("([^]*)<\\s*\\/\\s*"+u.last()+"[^>]*>","i"),function(e,t){return t=t.replace(y,"$1").replace(w,"$1"),n.chars&&n.chars(s(t)),""}),r("",u.last());else{if(C.test(e)){if(l=e.match(C)){l[0];n.whitespace&&n.whitespace(l[0]),e=e.replace(l[0],""),o=!1}}else $.test(e)?(l=e.match($),l&&(n.comment&&n.comment(l[1]),e=e.replace(l[0],""),o=!1)):b.test(e)?(l=e.match(b),l&&(e=e.replace(l[0],""),o=!1)):v.test(e)?(l=e.match(h),l&&(e=e.substring(l[0].length),l[0].replace(h,r),o=!1)):m.test(e)&&(l=e.match(p),l?(l[4]&&(e=e.substring(l[0].length),l[0].replace(p,i)),o=!1):(c+="<",e=e.substring(1)));o&&(a=e.indexOf("<"),c+=0>a?e:e.substring(0,a),e=0>a?"":e.substring(a),n.chars&&n.chars(s(c)))}if(e==d)throw f("badparse","The sanitizer was unable to parse the following block of html: {0}",e);d=e}r()}function s(e){if(!e)return"";var t=B.exec(e),n=t[1],i=t[3],r=t[2];return r&&(O.innerHTML=r.replace(/</g,"&lt;"),r="textContent"in O?O.textContent:O.innerText),n+r+i}function l(e){return e.replace(/&/g,"&amp;").replace(x,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(S,function(e){var t=e.charCodeAt(0);return 159>=t||173==t||t>=1536&&1540>=t||1807==t||6068==t||6069==t||t>=8204&&8207>=t||t>=8232&&8239>=t||t>=8288&&8303>=t||65279==t||t>=65520&&65535>=t?"&#"+t+";":e}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(e){var n="",i=e.split(";");return t.forEach(i,function(e){var i=e.split(":");if(2==i.length){var r=U(t.lowercase(i[0])),e=U(t.lowercase(i[1]));(("color"===r||"background-color"===r)&&(e.match(/^rgb\([0-9%,\. ]*\)$/i)||e.match(/^rgba\([0-9%,\. ]*\)$/i)||e.match(/^hsl\([0-9%,\. ]*\)$/i)||e.match(/^hsla\([0-9%,\. ]*\)$/i)||e.match(/^#[0-9a-f]{3,6}$/i)||e.match(/^[a-z]*$/i))||"text-align"===r&&("left"===e||"right"===e||"center"===e||"justify"===e)||"float"===r&&("left"===e||"right"===e||"none"===e)||("width"===r||"height"===r)&&e.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===r&&e.match(/^ltr|rtl|initial|inherit$/))&&(n+=r+": "+e+";");
}}),n}function u(e,t,n,i){return"img"===e&&t["ta-insert-video"]&&("ta-insert-video"===n||"allowfullscreen"===n||"frameborder"===n||"contenteditable"===n&&"false"===i)?!0:!1}function d(e,n){var i=!1,r=t.bind(e,e.push);return{start:function(e,a,o){e=t.lowercase(e),!i&&P[e]&&(i=e),i||M[e]!==!0||(r("<"),r(e),t.forEach(a,function(i,o){var s=t.lowercase(o),d="img"===e&&"src"===s||"background"===s;("style"===s&&""!==(i=c(i))||u(e,a,s,i)||L[s]===!0&&(R[s]!==!0||n(i,d)))&&(r(" "),r(o),r('="'),r(l(i)),r('"'))}),r(o?"/>":">"))},comment:function(e){r(e)},whitespace:function(e){r(l(e))},end:function(e){e=t.lowercase(e),i||M[e]!==!0||(r("</"),r(e),r(">")),e==i&&(i=!1)},chars:function(e){i||r(l(e))}}}var f=t.$$minErr("$sanitize"),p=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,h=/^<\/\s*([\w:-]+)[^>]*>/,g=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,m=/^</,v=/^<\//,y=/<!--(.*?)-->/g,$=/(^<!--.*?-->)/,b=/<!DOCTYPE([^>]*?)>/i,w=/<!\[CDATA\[(.*?)]]>/g,x=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S=/([^\#-~| |!])/g,C=/^(\s+)/,k=a("area,br,col,hr,img,wbr,input"),E=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),A=a("rp,rt"),T=t.extend({},A,E),D=t.extend({},E,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),_=t.extend({},A,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),I=a("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),P=a("script,style"),M=t.extend({},k,D,_,T,I),R=a("background,cite,href,longdesc,src,usemap,xlink:href"),F=a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),N=a("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),L=t.extend({},R,N,F),O=document.createElement("pre"),B=/^(\s*)([\s\S]*?)(\s*)$/,U=function(){return String.prototype.trim?function(e){return t.isString(e)?e.trim():e}:function(e){return t.isString(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();t.module("ngSanitize",[]).provider("$sanitize",i),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"â€â€™]/,i=/^mailto:/;return function(a,o){function s(e){e&&p.push(r(e))}function l(e,n){p.push("<a "),t.isDefined(o)&&p.push('target="',o,'" '),p.push('href="',e.replace(/"/g,"&quot;"),'">'),s(n),p.push("</a>")}if(!a)return a;for(var c,u,d,f=a,p=[];c=f.match(n);)u=c[0],c[2]||c[4]||(u=(c[3]?"http://":"mailto:")+u),d=c.index,s(f.substr(0,d)),l(u,c[0].replace(i,"")),f=f.substring(d+c[0].length);return s(f),e(p.join(""))}}])}(window,window.angular);var taTools={};angular.module("textAngularSetup",[]).constant("taRegisterTool",registerTextAngularTool).value("taTools",taTools).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(e){},htmlEditorSetup:function(e){}},defaultFileDropHandler:function(e,t){var n=new FileReader;return"image"===e.type.substring(0,5)?(n.onload=function(){""!==n.result&&t("insertImage",n.result,!0)},n.readAsDataURL(e),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(e){var t=angular.element("<iframe></iframe>"),n=e.prop("attributes");angular.forEach(n,function(e){t.attr(e.name,e.value)}),t.attr("src",t.attr("ta-insert-video")),e.replaceWith(t)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(e,t){return{imgOnSelectAction:function(e,t,n){var i=function(){n.updateTaBindtaTextElement(),n.hidePopover()};e.preventDefault(),n.displayElements.popover.css("width","375px");var r=n.displayElements.popoverContainer;r.empty();var a=angular.element('<div class="btn-group" style="padding-right: 6px;">'),o=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');o.on("click",function(e){e.preventDefault(),t.css({width:"100%",height:""}),i()});var s=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');s.on("click",function(e){e.preventDefault(),t.css({width:"50%",height:""}),i()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');l.on("click",function(e){e.preventDefault(),t.css({width:"25%",height:""}),i()});var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');c.on("click",function(e){e.preventDefault(),t.css({width:"",height:""}),i()}),a.append(o),a.append(s),a.append(l),a.append(c),r.append(a),a=angular.element('<div class="btn-group" style="padding-right: 6px;">');var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');u.on("click",function(e){e.preventDefault(),t.css("float","left"),t.css("cssFloat","left"),t.css("styleFloat","left"),i()});var d=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');d.on("click",function(e){e.preventDefault(),t.css("float","right"),t.css("cssFloat","right"),t.css("styleFloat","right"),i()});var f=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');f.on("click",function(e){e.preventDefault(),t.css("float",""),t.css("cssFloat",""),t.css("styleFloat",""),i()}),a.append(u),a.append(f),a.append(d),r.append(a),a=angular.element('<div class="btn-group">');var p=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');p.on("click",function(e){e.preventDefault(),t.remove(),i()}),a.append(p),r.append(a),n.showPopover(t),n.showResizeOverlay(t)},aOnSelectAction:function(n,i,r){n.preventDefault(),r.displayElements.popover.css("width","436px");var a=r.displayElements.popoverContainer;a.empty(),a.css("line-height","28px");var o=angular.element('<a href="'+i.attr("href")+'" target="_blank">'+i.attr("href")+"</a>");o.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),a.append(o);var s=angular.element('<div class="btn-group pull-right">'),l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');l.on("click",function(n){n.preventDefault();var a=e.prompt(t.insertLink.dialogPrompt,i.attr("href"));a&&""!==a&&"http://"!==a&&(i.attr("href",a),r.updateTaBindtaTextElement()),r.hidePopover()}),s.append(l);var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');c.on("click",function(e){e.preventDefault(),i.replaceWith(i.contents()),r.updateTaBindtaTextElement(),r.hidePopover()}),s.append(c);var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+t.editLink.targetToggle.buttontext+"</button>");"_blank"===i.attr("target")&&u.addClass("active"),u.on("click",function(e){e.preventDefault(),i.attr("target","_blank"===i.attr("target")?"":"_blank"),u.toggleClass("active"),r.updateTaBindtaTextElement()}),s.append(u),a.append(s),r.showPopover(i)},extractYoutubeVideoId:function(e){var t=/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i,n=e.match(t);return n&&n[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions",function(e,t,n,i,r,a,o){var s={};if(a("",s),o.forceTextAngularSanitize===!0&&"taSanitize"!==s.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");e("html",{iconclass:"fa fa-code",tooltiptext:n.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var l=function(e){return function(){return this.$editor().queryFormatBlockState(e)}},c=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(t){e(t.toLowerCase(),{buttontext:t.toUpperCase(),tooltiptext:n.heading.tooltip+t.charAt(1),action:c,activeState:l(t.toLowerCase())})}),e("p",{buttontext:"P",tooltiptext:n.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),e("pre",{buttontext:"pre",tooltiptext:n.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),e("ul",{iconclass:"fa fa-list-ul",tooltiptext:n.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),e("ol",{iconclass:"fa fa-list-ol",tooltiptext:n.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),e("quote",{iconclass:"fa fa-quote-right",tooltiptext:n.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),e("undo",{iconclass:"fa fa-undo",tooltiptext:n.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),e("redo",{iconclass:"fa fa-repeat",tooltiptext:n.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),e("bold",{iconclass:"fa fa-bold",tooltiptext:n.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),e("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:n.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="left"===e.css("text-align")||"left"===e.attr("align")||"right"!==e.css("text-align")&&"center"!==e.css("text-align")&&"justify"!==e.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),t=t||this.$editor().queryCommandState("justifyLeft")}}),e("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:n.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="right"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyRight")}}),e("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:n.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(e){var t=!1;return e&&(t="justify"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyFull")}}),e("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:n.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="center"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyCenter")}}),e("indent",{iconclass:"fa fa-indent",tooltiptext:n.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),e("outdent",{iconclass:"fa fa-outdent",tooltiptext:n.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),e("italics",{iconclass:"fa fa-italic",tooltiptext:n.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),e("underline",{iconclass:"fa fa-underline",tooltiptext:n.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),e("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:n.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),e("clear",{iconclass:"fa fa-ban",tooltiptext:n.clear.tooltip,action:function(e,t){var n;this.$editor().wrapSelection("removeFormat",null);var r=angular.element(i.getSelectionElement()),a=function(e){e=angular.element(e);var t=e;angular.forEach(e.children(),function(e){var n=angular.element("<p></p>");n.html(angular.element(e).html()),t.after(n),t=n}),e.remove()};if(angular.forEach(r.find("ul"),a),angular.forEach(r.find("ol"),a),"li"===r[0].tagName.toLowerCase()){var o=r[0].parentNode.childNodes,s=[],l=[],c=!1;for(n=0;n<o.length;n++)o[n]===r[0]?c=!0:c?l.push(o[n]):s.push(o[n]);var u=angular.element(r[0].parentNode),d=angular.element("<p></p>");if(d.html(angular.element(r[0]).html()),0===s.length||0===l.length)0===l.length?u.after(d):u[0].parentNode.insertBefore(d[0],u[0]),0===s.length&&0===l.length?u.remove():angular.element(r[0]).remove();else{var f=angular.element("<"+u[0].tagName+"></"+u[0].tagName+">"),p=angular.element("<"+u[0].tagName+"></"+u[0].tagName+">");for(n=0;n<s.length;n++)f.append(angular.element(s[n]));for(n=0;n<l.length;n++)p.append(angular.element(l[n]));u.after(p),u.after(d),u.after(f),u.remove()}i.setSelectionToElementEnd(d[0])}var h=this.$editor(),g=function(e){e=angular.element(e),e[0]!==h.displayElements.text[0]&&e.removeAttr("class"),angular.forEach(e.children(),g)};angular.forEach(r,g),"li"!==r[0].tagName.toLowerCase()&&"ol"!==r[0].tagName.toLowerCase()&&"ul"!==r[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),t()}}),e("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:n.insertImage.tooltip,action:function(){var e;return e=t.prompt(n.insertImage.dialogPrompt,"http://"),e&&""!==e&&"http://"!==e?this.$editor().wrapSelection("insertImage",e,!0):void 0},onElementSelect:{element:"img",action:r.imgOnSelectAction}}),e("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:n.insertVideo.tooltip,action:function(){var e;if(e=t.prompt(n.insertVideo.dialogPrompt,"https://"),e&&""!==e&&"https://"!==e&&(videoId=r.extractYoutubeVideoId(e),videoId)){var i="https://www.youtube.com/embed/"+videoId,a='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+i+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",a,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:r.imgOnSelectAction}}),e("insertLink",{tooltiptext:n.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var e;return e=t.prompt(n.insertLink.dialogPrompt,"http://"),e&&""!==e&&"http://"!==e?this.$editor().wrapSelection("createLink",e,!0):void 0},activeState:function(e){return e?"A"===e[0].tagName:!1},onElementSelect:{element:"a",action:r.aOnSelectAction}}),e("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var e=this.$editor().displayElements.text,t=e[0].innerHTML||"",n=0;return""!==t.replace(/\s*<[^>]*?>\s*/g,"")&&(n=t.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=n,this.$editor().wordcount=n,!1}}),e("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var e=this.$editor().displayElements.text,t=e[0].innerText||e[0].textContent,n=t.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=n,this.$editor().charcount=n,!1}})}]),angular.module("dndLists",[]).directive("dndDraggable",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(e,t,n,i){return function(r,a,o){a.attr("draggable","true"),o.dndDisableIf&&r.$watch(o.dndDisableIf,function(e){a.attr("draggable",!e)}),a.on("dragstart",function(s){return s=s.originalEvent||s,"false"==a.attr("draggable")?!0:(s.dataTransfer.setData("Text",angular.toJson(r.$eval(o.dndDraggable))),s.dataTransfer.effectAllowed=o.dndEffectAllowed||"move",a.addClass("dndDragging"),t(function(){a.addClass("dndDraggingSource")},0),n.dropEffect="none",i.isDragging=!0,i.dragType=o.dndType?r.$eval(o.dndType):void 0,s._dndHandle&&s.dataTransfer.setDragImage&&s.dataTransfer.setDragImage(a[0],0,0),e(o.dndDragstart)(r,{event:s}),void s.stopPropagation())}),a.on("dragend",function(s){s=s.originalEvent||s;var l=n.dropEffect;r.$apply(function(){switch(l){case"move":e(o.dndMoved)(r,{event:s});break;case"copy":e(o.dndCopied)(r,{event:s});break;case"none":e(o.dndCanceled)(r,{event:s})}e(o.dndDragend)(r,{event:s,dropEffect:l})}),a.removeClass("dndDragging"),t(function(){a.removeClass("dndDraggingSource")},0),i.isDragging=!1,s.stopPropagation()}),a.on("click",function(t){o.dndSelected&&(t=t.originalEvent||t,r.$apply(function(){e(o.dndSelected)(r,{event:t})}),t.stopPropagation())}),a.on("selectstart",function(){this.dragDrop&&this.dragDrop()})}}]).directive("dndList",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(e,t,n,i){return function(r,a,o){function s(e,t,n){var i=v?e.offsetX||e.layerX:e.offsetY||e.layerY,r=v?t.offsetWidth:t.offsetHeight,a=v?t.offsetLeft:t.offsetTop;return a=n?a:0,a+r/2>i}function l(){var e;return angular.forEach(a.children(),function(t){var n=angular.element(t);n.hasClass("dndPlaceholder")&&(e=n)}),e||angular.element("<li class='dndPlaceholder'></li>")}function c(){return Array.prototype.indexOf.call(m.children,g)}function u(e){if(!i.isDragging&&!y)return!1;if(!p(e.dataTransfer.types))return!1;if(o.dndAllowedTypes&&i.isDragging){var t=r.$eval(o.dndAllowedTypes);if(angular.isArray(t)&&-1===t.indexOf(i.dragType))return!1}return o.dndDisableIf&&r.$eval(o.dndDisableIf)?!1:!0}function d(){return h.remove(),a.removeClass("dndDragover"),!0}function f(t,n,a,o){return e(t)(r,{event:n,index:a,item:o||void 0,external:!i.isDragging,type:i.isDragging?i.dragType:void 0})}function p(e){if(!e)return!0;for(var t=0;t<e.length;t++)if("Text"===e[t]||"text/plain"===e[t])return!0;return!1}var h=l(),g=h[0],m=a[0];h.remove();var v=o.dndHorizontalList&&r.$eval(o.dndHorizontalList),y=o.dndExternalSources&&r.$eval(o.dndExternalSources);a.on("dragenter",function(e){return e=e.originalEvent||e,u(e)?void e.preventDefault():!0}),a.on("dragover",function(e){if(e=e.originalEvent||e,!u(e))return!0;if(g.parentNode!=m&&a.append(h),e.target!==m){for(var t=e.target;t.parentNode!==m&&t.parentNode;)t=t.parentNode;t.parentNode===m&&t!==g&&(s(e,t)?m.insertBefore(g,t):m.insertBefore(g,t.nextSibling))}else if(s(e,g,!0))for(;g.previousElementSibling&&(s(e,g.previousElementSibling,!0)||0===g.previousElementSibling.offsetHeight);)m.insertBefore(g,g.previousElementSibling);else for(;g.nextElementSibling&&!s(e,g.nextElementSibling,!0);)m.insertBefore(g,g.nextElementSibling.nextElementSibling);return o.dndDragover&&!f(o.dndDragover,e,c())?d():(a.addClass("dndDragover"),e.preventDefault(),e.stopPropagation(),!1)}),a.on("drop",function(e){if(e=e.originalEvent||e,!u(e))return!0;e.preventDefault();var t,i=e.dataTransfer.getData("Text")||e.dataTransfer.getData("text/plain");try{t=JSON.parse(i)}catch(a){return d()}var s=c();return o.dndDrop&&(t=f(o.dndDrop,e,s,t),!t)?d():(t!==!0&&r.$apply(function(){r.$eval(o.dndList).splice(s,0,t)}),f(o.dndInserted,e,s,t),"none"===e.dataTransfer.dropEffect?"copy"===e.dataTransfer.effectAllowed||"move"===e.dataTransfer.effectAllowed?n.dropEffect=e.dataTransfer.effectAllowed:n.dropEffect=e.ctrlKey?"copy":"move":n.dropEffect=e.dataTransfer.dropEffect,d(),e.stopPropagation(),!1)}),a.on("dragleave",function(e){e=e.originalEvent||e,a.removeClass("dndDragover"),t(function(){a.hasClass("dndDragover")||h.remove()},100)})}}]).directive("dndNodrag",function(){return function(e,t,n){t.attr("draggable","true"),t.on("dragstart",function(e){e=e.originalEvent||e,e._dndHandle||(e.dataTransfer.types&&e.dataTransfer.types.length||e.preventDefault(),e.stopPropagation())}),t.on("dragend",function(e){e=e.originalEvent||e,e._dndHandle||e.stopPropagation()})}}).directive("dndHandle",function(){return function(e,t,n){t.attr("draggable","true"),t.on("dragstart dragend",function(e){e=e.originalEvent||e,e._dndHandle=!0})}}).factory("dndDragTypeWorkaround",function(){return{}}).factory("dndDropEffectWorkaround",function(){return{}}),function(){"use strict";var e={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(t){var n=t.which;switch(n){case e.COMMAND:case e.SHIFT:case e.CTRL:case e.ALT:return!0}return t.metaKey||t.ctrlKey||t.altKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e},isVerticalMovement:function(t){return~[e.UP,e.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[e.LEFT,e.RIGHT,e.BACKSPACE,e.DELETE].indexOf(t)},toSeparator:function(t){var n={ENTER:"\n",TAB:"	",SPACE:" "}[t];return n?n:e[t]?void 0:t}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(e){for(var t=this[0],n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(n.bind(t)(e))return t;t=t.parentElement}return!1});var t=0,n=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,skipFocusser:!1,dropdownPosition:"auto",removeSelected:!0,resetSearchInput:!0,generateId:function(){return t++},appendToBody:!1,spinnerEnabled:!1,spinnerClass:"glyphicon-refresh ui-select-spin"}).service("uiSelectMinErr",function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments),n=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(n)}}).directive("uisTranscludeAppend",function(){return{link:function(e,t,n,i,r){r(e,function(e){t.append(e)})}}}).filter("highlight",function(){function e(e){return(""+e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n&&t?(""+t).replace(new RegExp(e(n),"gi"),'<span class="ui-select-highlight">$&</span>'):t}}).factory("uisOffset",["$document","$window",function(e,t){return function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);n.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(e,t,n,i,r){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-choices");var n=t.parent().attr("theme")||e.theme;return n+"/choices.tpl.html"},compile:function(i,a){if(!a.repeat)throw n("repeat","Expected 'repeat' expression.");var o=a.groupBy,s=a.groupFilter;if(o){var l=i.querySelectorAll(".ui-select-choices-group");if(1!==l.length)throw n("rows","Expected 1 .ui-select-choices-group but got '{0}'.",l.length);l.attr("ng-repeat",t.getGroupNgRepeatExpression())}var c=t.parse(a.repeat),u=i.querySelectorAll(".ui-select-choices-row");if(1!==u.length)throw n("rows","Expected 1 .ui-select-choices-row but got '{0}'.",u.length);u.attr("ng-repeat",c.repeatExpression(o)).attr("ng-if","$select.open");var d=i.querySelectorAll(".ui-select-choices-row-inner");if(1!==d.length)throw n("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",d.length);d.attr("uis-transclude-append","");var f=r.document.addEventListener?u:d;return f.attr("ng-click","$select.select("+c.itemName+",$select.skipFocusser,$event)"),function(t,n,r,a){a.parseRepeatAttr(r.repeat,o,s),a.disableChoiceExpression=r.uiDisableChoice,a.onHighlightCallback=r.onHighlight,a.dropdownPosition=r.position?r.position.toLowerCase():e.dropdownPosition,t.$on("$destroy",function(){u.remove()}),t.$watch("$select.search",function(e){e&&!a.open&&a.multiple&&a.activate(!1,!0),a.activeIndex=a.tagging.isActivated?-1:0,!r.minimumInputLength||a.search.length>=r.minimumInputLength?a.refresh(r.refresh):a.items=[]}),r.$observe("refreshDelay",function(){var n=t.$eval(r.refreshDelay);a.refreshDelay=void 0!==n?n:e.refreshDelay}),t.$watch("$select.open",function(e){e?i.attr("role","listbox"):i.removeAttr("role")})}}}}]),n.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","$$uisDebounce","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function(t,n,i,r,a,o,s,l,c,u,d){function f(e,t,n){if(e.findIndex)return e.findIndex(t,n);for(var i,r=Object(e),a=r.length>>>0,o=0;a>o;o++)if(i=r[o],t.call(n,i,o,r))return o;return-1}function p(){b.resetSearchInput&&(b.search=w,b.selected&&b.items.length&&!b.multiple&&(b.activeIndex=f(b.items,function(e){return angular.equals(this,e)},b.selected)))}function h(e,t){var n,i,r=[];for(n=0;n<t.length;n++)for(i=0;i<e.length;i++)e[i].name==[t[n]]&&r.push(e[i]);return r}function g(e,t){var n=C.indexOf(e);t&&-1===n&&C.push(e),!t&&n>-1&&C.splice(n,1)}function m(e){return C.indexOf(e)>-1}function v(e){function t(e,t){var n=i.indexOf(e);t&&-1===n&&i.push(e),!t&&n>-1&&i.splice(n,0)}function n(e){return i.indexOf(e)>-1}if(e){var i=[];b.isLocked=function(e,i){var r=!1,a=b.selected[i];return a&&(e?(r=!!e.$eval(b.lockChoiceExpression),t(a,r)):r=n(a)),r}}}function y(t){var n=!0;switch(t){case e.DOWN:!b.open&&b.multiple?b.activate(!1,!0):b.activeIndex<b.items.length-1&&b.activeIndex++;break;case e.UP:!b.open&&b.multiple?b.activate(!1,!0):(b.activeIndex>0||0===b.search.length&&b.tagging.isActivated&&b.activeIndex>-1)&&b.activeIndex--;break;case e.TAB:(!b.multiple||b.open)&&b.select(b.items[b.activeIndex],!0);break;case e.ENTER:b.open&&(b.tagging.isActivated||b.activeIndex>=0)?b.select(b.items[b.activeIndex],b.skipFocusser):b.activate(!1,!0);break;case e.ESC:b.close();break;default:n=!1}return n}function $(){var e=n.querySelectorAll(".ui-select-choices-content"),t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1)throw s("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length);if(!(b.activeIndex<0)){var i=t[b.activeIndex],r=i.offsetTop+i.clientHeight-e[0].scrollTop,a=e[0].offsetHeight;
r>a?e[0].scrollTop+=r-a:r<i.clientHeight&&(b.isGrouped&&0===b.activeIndex?e[0].scrollTop=0:e[0].scrollTop-=i.clientHeight-r)}}var b=this,w="";if(b.placeholder=l.placeholder,b.searchEnabled=l.searchEnabled,b.sortable=l.sortable,b.refreshDelay=l.refreshDelay,b.paste=l.paste,b.resetSearchInput=l.resetSearchInput,b.refreshing=!1,b.spinnerEnabled=l.spinnerEnabled,b.spinnerClass=l.spinnerClass,b.removeSelected=l.removeSelected,b.closeOnSelect=!0,b.skipFocusser=!1,b.search=w,b.activeIndex=0,b.items=[],b.open=!1,b.focus=!1,b.disabled=!1,b.selected=void 0,b.dropdownPosition="auto",b.focusser=void 0,b.multiple=void 0,b.disableChoiceExpression=void 0,b.tagging={isActivated:!1,fct:void 0},b.taggingTokens={isActivated:!1,tokens:void 0},b.lockChoiceExpression=void 0,b.clickTriggeredSelect=!1,b.$filter=r,b.$element=n,b.$animate=function(){try{return u.get("$animate")}catch(e){return null}}(),b.searchInput=n.querySelectorAll("input.ui-select-search"),1!==b.searchInput.length)throw s("searchInput","Expected 1 input.ui-select-search but got '{0}'.",b.searchInput.length);b.isEmpty=function(){return angular.isUndefined(b.selected)||null===b.selected||""===b.selected||b.multiple&&0===b.selected.length},b.activate=function(e,r){if(b.disabled||b.open)b.open&&!b.searchEnabled&&b.close();else{r||p(),t.$broadcast("uis:activate"),b.open=!0,b.activeIndex=b.activeIndex>=b.items.length?0:b.activeIndex,-1===b.activeIndex&&b.taggingLabel!==!1&&(b.activeIndex=0);var a=n.querySelectorAll(".ui-select-choices-content"),o=n.querySelectorAll(".ui-select-search");if(b.$animate&&b.$animate.on&&b.$animate.enabled(a[0])){var s=function(t,n){"start"===n&&0===b.items.length?(b.$animate.off("removeClass",o[0],s),i(function(){b.focusSearchInput(e)})):"close"===n&&(b.$animate.off("enter",a[0],s),i(function(){b.focusSearchInput(e)}))};b.items.length>0?b.$animate.on("enter",a[0],s):b.$animate.on("removeClass",o[0],s)}else i(function(){b.focusSearchInput(e),!b.tagging.isActivated&&b.items.length>1&&$()})}},b.focusSearchInput=function(e){b.search=e||b.search,b.searchInput[0].focus()},b.findGroupByName=function(e){return b.groups&&b.groups.filter(function(t){return t.name===e})[0]},b.parseRepeatAttr=function(e,n,i){function r(e){var r=t.$eval(n);if(b.groups=[],angular.forEach(e,function(e){var t=angular.isFunction(r)?r(e):e[r],n=b.findGroupByName(t);n?n.items.push(e):b.groups.push({name:t,items:[e]})}),i){var a=t.$eval(i);angular.isFunction(a)?b.groups=a(b.groups):angular.isArray(a)&&(b.groups=h(b.groups,a))}b.items=[],b.groups.forEach(function(e){b.items=b.items.concat(e.items)})}function a(e){b.items=e}b.setItemsFn=n?r:a,b.parserResult=o.parse(e),b.isGrouped=!!n,b.itemProperty=b.parserResult.itemName;var l=b.parserResult.source,u=function(){var e=l(t);t.$uisSource=Object.keys(e).map(function(t){var n={};return n[b.parserResult.keyName]=t,n.value=e[t],n})};b.parserResult.keyName&&(u(),b.parserResult.source=c("$uisSource"+b.parserResult.filters),t.$watch(l,function(e,t){e!==t&&u()},!0)),b.refreshItems=function(e){e=e||b.parserResult.source(t);var n=b.selected;if(b.isEmpty()||angular.isArray(n)&&!n.length||!b.multiple||!b.removeSelected)b.setItemsFn(e);else if(void 0!==e&&null!==e){var i=e.filter(function(e){return angular.isArray(n)?n.every(function(t){return!angular.equals(e,t)}):!angular.equals(e,n)});b.setItemsFn(i)}("auto"===b.dropdownPosition||"up"===b.dropdownPosition)&&t.calculateDropdownPos(),t.$broadcast("uis:refresh")},t.$watchCollection(b.parserResult.source,function(e){if(void 0===e||null===e)b.items=[];else{if(!angular.isArray(e))throw s("items","Expected an array but got '{0}'.",e);b.refreshItems(e),angular.isDefined(b.ngModel.$modelValue)&&(b.ngModel.$modelValue=null)}})};var x;b.refresh=function(e){void 0!==e&&(x&&i.cancel(x),x=i(function(){var n=t.$eval(e);n&&angular.isFunction(n.then)&&!b.refreshing&&(b.refreshing=!0,n.then(function(){b.refreshing=!1}))},b.refreshDelay))},b.isActive=function(e){if(!b.open)return!1;var t=b.items.indexOf(e[b.itemProperty]),n=t==b.activeIndex;return!n||0>t?!1:(n&&!angular.isUndefined(b.onHighlightCallback)&&e.$eval(b.onHighlightCallback),n)};var S=function(e){return b.selected&&angular.isArray(b.selected)&&b.selected.filter(function(t){return angular.equals(t,e)}).length>0},C=[];b.isDisabled=function(e){if(b.open){var t=e[b.itemProperty],n=b.items.indexOf(t),i=!1;if(n>=0&&(angular.isDefined(b.disableChoiceExpression)||b.multiple)){if(t.isTag)return!1;b.multiple&&(i=S(t)),!i&&angular.isDefined(b.disableChoiceExpression)&&(i=!!e.$eval(b.disableChoiceExpression)),g(t,i)}return i}},b.select=function(e,n,r){if(void 0===e||!m(e)){if(!b.items&&!b.search&&!b.tagging.isActivated)return;if(!e||!m(e)){if(b.clickTriggeredSelect=!1,r&&("click"===r.type||"touchend"===r.type)&&e&&(b.clickTriggeredSelect=!0),b.tagging.isActivated&&b.clickTriggeredSelect===!1){if(b.taggingLabel===!1)if(b.activeIndex<0){if(void 0===e&&(e=void 0!==b.tagging.fct?b.tagging.fct(b.search):b.search),!e||angular.equals(b.items[0],e))return}else e=b.items[b.activeIndex];else if(0===b.activeIndex){if(void 0===e)return;if(void 0!==b.tagging.fct&&"string"==typeof e){if(e=b.tagging.fct(e),!e)return}else"string"==typeof e&&(e=e.replace(b.taggingLabel,"").trim())}if(S(e))return void b.close(n)}p(),t.$broadcast("uis:select",e);var a={};a[b.parserResult.itemName]=e,i(function(){b.onSelectCallback(t,{$item:e,$model:b.parserResult.modelMapper(t,a)})}),b.closeOnSelect&&b.close(n)}}},b.close=function(e){b.open&&(b.ngModel&&b.ngModel.$setTouched&&b.ngModel.$setTouched(),b.open=!1,p(),t.$broadcast("uis:close",e))},b.setFocus=function(){b.focus||b.focusInput[0].focus()},b.clear=function(e){b.select(void 0),e.stopPropagation(),i(function(){b.focusser[0].focus()},0,!1)},b.toggle=function(e){b.open?(b.close(),e.preventDefault(),e.stopPropagation()):b.activate()},b.isLocked=function(){return!1},t.$watch(function(){return angular.isDefined(b.lockChoiceExpression)&&""!==b.lockChoiceExpression},v);var k=null,E=!1;b.sizeSearchInput=function(){var e=b.searchInput[0],n=b.searchInput.parent().parent()[0],r=function(){return n.clientWidth*!!e.offsetParent},a=function(t){if(0===t)return!1;var n=t-e.offsetLeft-10;return 50>n&&(n=t),b.searchInput.css("width",n+"px"),!0};b.searchInput.css("width","10px"),i(function(){null!==k||a(r())||(k=t.$watch(function(){E||(E=!0,t.$$postDigest(function(){E=!1,a(r())&&(k(),k=null)}))},angular.noop))})},b.searchInput.on("keydown",function(n){var r=n.which;~[e.ENTER,e.ESC].indexOf(r)&&(n.preventDefault(),n.stopPropagation()),t.$apply(function(){var t=!1;if((b.items.length>0||b.tagging.isActivated)&&(y(r)||b.searchEnabled||(n.preventDefault(),n.stopPropagation()),b.taggingTokens.isActivated)){for(var a=0;a<b.taggingTokens.tokens.length;a++)b.taggingTokens.tokens[a]===e.MAP[n.keyCode]&&b.search.length>0&&(t=!0);t&&i(function(){b.searchInput.triggerHandler("tagged");var t=b.search.replace(e.MAP[n.keyCode],"").trim();b.tagging.fct&&(t=b.tagging.fct(t)),t&&b.select(t,!0)})}}),e.isVerticalMovement(r)&&b.items.length>0&&$(),(r===e.ENTER||r===e.ESC)&&(n.preventDefault(),n.stopPropagation())}),b.searchInput.on("paste",function(t){var n;if(n=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(t.originalEvent||t).clipboardData.getData("text/plain"),n=b.search+n,n&&n.length>0)if(b.taggingTokens.isActivated){for(var i=[],r=0;r<b.taggingTokens.tokens.length;r++){var a=e.toSeparator(b.taggingTokens.tokens[r])||b.taggingTokens.tokens[r];if(n.indexOf(a)>-1){i=n.split(a);break}}0===i.length&&(i=[n]);var o=b.search;angular.forEach(i,function(e){var t=b.tagging.fct?b.tagging.fct(e):e;t&&b.select(t,!0)}),b.search=o||w,t.preventDefault(),t.stopPropagation()}else b.paste&&(b.paste(n),b.search=w,t.preventDefault(),t.stopPropagation())}),b.searchInput.on("tagged",function(){i(function(){p()})});var A=a(function(){b.sizeSearchInput()},50);angular.element(d).bind("resize",A),t.$on("$destroy",function(){b.searchInput.off("keyup keydown tagged blur paste"),angular.element(d).off("resize",A)}),t.$watch("$select.activeIndex",function(e){e&&n.find("input").attr("aria-activedescendant","ui-select-choices-row-"+b.generatedId+"-"+e)}),t.$watch("$select.open",function(e){e||n.find("input").removeAttr("aria-activedescendant")})}]),n.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,n,i,r,a,o){return{restrict:"EA",templateUrl:function(e,n){var i=n.theme||t.theme;return i+(angular.isDefined(n.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(r,s){var l=/{(.*)}\s*{(.*)}/.exec(s.ngClass);if(l){var c="{"+l[1]+", "+l[2]+"}";s.ngClass=c,r.attr("ng-class",c)}return angular.isDefined(s.multiple)?r.append("<ui-select-multiple/>").removeAttr("multiple"):r.append("<ui-select-single/>"),s.inputId&&(r.querySelectorAll("input.ui-select-search")[0].id=s.inputId),function(r,s,l,c,u){function d(e){if(h.open){var t=!1;if(t=window.jQuery?window.jQuery.contains(s[0],e.target):s[0].contains(e.target),!t&&!h.clickTriggeredSelect){var n;if(h.skipFocusser)n=!0;else{var i=["input","button","textarea","select"],a=angular.element(e.target).controller("uiSelect");n=a&&a!==h,n||(n=~i.indexOf(e.target.tagName.toLowerCase()))}h.close(n),r.$digest()}h.clickTriggeredSelect=!1}}function f(){var t=i(s);v=angular.element('<div class="ui-select-placeholder"></div>'),v[0].style.width=t.width+"px",v[0].style.height=t.height+"px",s.after(v),y=s[0].style.width,e.find("body").append(s),s[0].style.position="absolute",s[0].style.left=t.left+"px",s[0].style.top=t.top+"px",s[0].style.width=t.width+"px"}function p(){null!==v&&(v.replaceWith(s),v=null,s[0].style.position="",s[0].style.left="",s[0].style.top="",s[0].style.width=y,h.setFocus())}var h=c[0],g=c[1];h.generatedId=t.generateId(),h.baseTitle=l.title||"Select box",h.focusserTitle=h.baseTitle+" focus",h.focusserId="focusser-"+h.generatedId,h.closeOnSelect=function(){return angular.isDefined(l.closeOnSelect)?a(l.closeOnSelect)():t.closeOnSelect}(),r.$watch("skipFocusser",function(){var e=r.$eval(l.skipFocusser);h.skipFocusser=void 0!==e?e:t.skipFocusser}),h.onSelectCallback=a(l.onSelect),h.onRemoveCallback=a(l.onRemove),h.ngModel=g,h.choiceGrouped=function(e){return h.isGrouped&&e&&e.name},l.tabindex&&l.$observe("tabindex",function(e){h.focusInput.attr("tabindex",e),s.removeAttr("tabindex")}),r.$watch(function(){return r.$eval(l.searchEnabled)},function(e){h.searchEnabled=void 0!==e?e:t.searchEnabled}),r.$watch("sortable",function(){var e=r.$eval(l.sortable);h.sortable=void 0!==e?e:t.sortable}),l.$observe("limit",function(){h.limit=angular.isDefined(l.limit)?parseInt(l.limit,10):void 0}),r.$watch("removeSelected",function(){var e=r.$eval(l.removeSelected);h.removeSelected=void 0!==e?e:t.removeSelected}),l.$observe("disabled",function(){h.disabled=void 0!==l.disabled?l.disabled:!1}),l.$observe("resetSearchInput",function(){var e=r.$eval(l.resetSearchInput);h.resetSearchInput=void 0!==e?e:!0}),l.$observe("paste",function(){h.paste=r.$eval(l.paste)}),l.$observe("tagging",function(){if(void 0!==l.tagging){var e=r.$eval(l.tagging);h.tagging={isActivated:!0,fct:e!==!0?e:void 0}}else h.tagging={isActivated:!1,fct:void 0}}),l.$observe("taggingLabel",function(){void 0!==l.tagging&&("false"===l.taggingLabel?h.taggingLabel=!1:h.taggingLabel=void 0!==l.taggingLabel?l.taggingLabel:"(new)")}),l.$observe("taggingTokens",function(){if(void 0!==l.tagging){var e=void 0!==l.taggingTokens?l.taggingTokens.split("|"):[",","ENTER"];h.taggingTokens={isActivated:!0,tokens:e}}}),l.$observe("spinnerEnabled",function(){var e=r.$eval(l.spinnerEnabled);h.spinnerEnabled=void 0!==e?e:t.spinnerEnabled}),l.$observe("spinnerClass",function(){var e=l.spinnerClass;h.spinnerClass=void 0!==e?l.spinnerClass:t.spinnerClass}),angular.isDefined(l.autofocus)&&o(function(){h.setFocus()}),angular.isDefined(l.focusOn)&&r.$on(l.focusOn,function(){o(function(){h.setFocus()})}),e.on("click",d),r.$on("$destroy",function(){e.off("click",d)}),u(r,function(e){var t=angular.element("<div>").append(e),i=t.querySelectorAll(".ui-select-match");if(i.removeAttr("ui-select-match"),i.removeAttr("data-ui-select-match"),1!==i.length)throw n("transcluded","Expected 1 .ui-select-match but got '{0}'.",i.length);s.querySelectorAll(".ui-select-match").replaceWith(i);var r=t.querySelectorAll(".ui-select-choices");if(r.removeAttr("ui-select-choices"),r.removeAttr("data-ui-select-choices"),1!==r.length)throw n("transcluded","Expected 1 .ui-select-choices but got '{0}'.",r.length);s.querySelectorAll(".ui-select-choices").replaceWith(r);var a=t.querySelectorAll(".ui-select-no-choice");a.removeAttr("ui-select-no-choice"),a.removeAttr("data-ui-select-no-choice"),1==a.length&&s.querySelectorAll(".ui-select-no-choice").replaceWith(a)});var m=r.$eval(l.appendToBody);(void 0!==m?m:t.appendToBody)&&(r.$watch("$select.open",function(e){e?f():p()}),r.$on("$destroy",function(){p()}));var v=null,y="",$=null,b="direction-up";r.$watch("$select.open",function(){("auto"===h.dropdownPosition||"up"===h.dropdownPosition)&&r.calculateDropdownPos()});var w=function(e,t){e=e||i(s),t=t||i($),$[0].style.position="absolute",$[0].style.top=-1*t.height+"px",s.addClass(b)},x=function(e,t){s.removeClass(b),e=e||i(s),t=t||i($),$[0].style.position="",$[0].style.top=""},S=function(){o(function(){if("up"===h.dropdownPosition)w();else{s.removeClass(b);var t=i(s),n=i($),r=e[0].documentElement.scrollTop||e[0].body.scrollTop;t.top+t.height+n.height>r+e[0].documentElement.clientHeight?w(t,n):x(t,n)}$[0].style.opacity=1})},C=!1;r.calculateDropdownPos=function(){if(h.open){if($=angular.element(s).querySelectorAll(".ui-select-dropdown"),0===$.length)return;if(""!==h.search||C||($[0].style.opacity=0,C=!0),!i($).height&&h.$animate&&h.$animate.on&&h.$animate.enabled($)){var e=!0;h.$animate.on("enter",$,function(t,n){"close"===n&&e&&(S(),e=!1)})}else S()}else{if(null===$||0===$.length)return;$[0].style.opacity=0,$[0].style.position="",$[0].style.top="",s.removeClass(b)}}}}}}]),n.directive("uiSelectMatch",["uiSelectConfig",function(e){function t(e,t){return e[0].hasAttribute(t)?e.attr(t):e[0].hasAttribute("data-"+t)?e.attr("data-"+t):e[0].hasAttribute("x-"+t)?e.attr("x-"+t):void 0}return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(n){n.addClass("ui-select-match");var i=n.parent(),r=t(i,"theme")||e.theme,a=angular.isDefined(t(i,"multiple"));return r+(a?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,n,i,r){function a(e){r.allowClear=angular.isDefined(e)?""===e?!0:"true"===e.toLowerCase():!1}r.lockChoiceExpression=i.uiLockChoice,i.$observe("placeholder",function(t){r.placeholder=void 0!==t?t:e.placeholder}),i.$observe("allowClear",a),a(i.allowClear),r.multiple&&r.sizeSearchInput()}}}]),n.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(t,n){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var n,i=this,r=e.$select;angular.isUndefined(r.selected)&&(r.selected=[]),e.$evalAsync(function(){n=e.ngModel}),i.activeMatchIndex=-1,i.updateModel=function(){n.$setViewValue(Date.now()),i.refreshComponent()},i.refreshComponent=function(){r.refreshItems&&r.refreshItems(),r.sizeSearchInput&&r.sizeSearchInput()},i.removeChoice=function(n){if(r.isLocked(null,n))return!1;var a=r.selected[n],o={};return o[r.parserResult.itemName]=a,r.selected.splice(n,1),i.activeMatchIndex=-1,r.sizeSearchInput(),t(function(){r.onRemoveCallback(e,{$item:a,$model:r.parserResult.modelMapper(e,o)})}),i.updateModel(),!0},i.getPlaceholder=function(){return r.selected&&r.selected.length?void 0:r.placeholder}}],controllerAs:"$selectMultiple",link:function(i,r,a,o){function s(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length}function l(t){function n(){switch(t){case e.LEFT:return~p.activeMatchIndex?u:o;case e.RIGHT:return~p.activeMatchIndex&&l!==o?c:(d.activate(),!1);case e.BACKSPACE:return~p.activeMatchIndex?p.removeChoice(l)?u:l:o;case e.DELETE:return~p.activeMatchIndex?(p.removeChoice(p.activeMatchIndex),l):!1}}var i=s(d.searchInput[0]),r=d.selected.length,a=0,o=r-1,l=p.activeMatchIndex,c=p.activeMatchIndex+1,u=p.activeMatchIndex-1,f=l;return i>0||d.search.length&&t==e.RIGHT?!1:(d.close(),f=n(),d.selected.length&&f!==!1?p.activeMatchIndex=Math.min(o,Math.max(a,f)):p.activeMatchIndex=-1,!0)}function c(e){if(void 0===e||void 0===d.search)return!1;var t=e.filter(function(e){return void 0===d.search.toUpperCase()||void 0===e?!1:e.toUpperCase()===d.search.toUpperCase()}).length>0;return t}function u(e,t){var n=-1;if(angular.isArray(e))for(var i=angular.copy(e),r=0;r<i.length;r++)if(void 0===d.tagging.fct)i[r]+" "+d.taggingLabel===t&&(n=r);else{var a=i[r];angular.isObject(a)&&(a.isTag=!0),angular.equals(a,t)&&(n=r)}return n}var d=o[0],f=i.ngModel=o[1],p=i.$selectMultiple;d.multiple=!0,d.focusInput=d.searchInput,f.$isEmpty=function(e){return!e||0===e.length},f.$parsers.unshift(function(){for(var e,t={},n=[],r=d.selected.length-1;r>=0;r--)t={},t[d.parserResult.itemName]=d.selected[r],e=d.parserResult.modelMapper(i,t),n.unshift(e);return n}),f.$formatters.unshift(function(e){var t,n=d.parserResult&&d.parserResult.source(i,{$select:{search:""}}),r={};if(!n)return e;var a=[],o=function(e,n){if(e&&e.length){for(var o=e.length-1;o>=0;o--){if(r[d.parserResult.itemName]=e[o],t=d.parserResult.modelMapper(i,r),d.parserResult.trackByExp){var s=/(\w*)\./.exec(d.parserResult.trackByExp),l=/\.([^\s]+)/.exec(d.parserResult.trackByExp);if(s&&s.length>0&&s[1]==d.parserResult.itemName&&l&&l.length>0&&t[l[1]]==n[l[1]])return a.unshift(e[o]),!0}if(angular.equals(t,n))return a.unshift(e[o]),!0}return!1}};if(!e)return a;for(var s=e.length-1;s>=0;s--)o(d.selected,e[s])||o(n,e[s])||a.unshift(e[s]);return a}),i.$watchCollection(function(){return f.$modelValue},function(e,t){t!=e&&(angular.isDefined(f.$modelValue)&&(f.$modelValue=null),p.refreshComponent())}),f.$render=function(){if(!angular.isArray(f.$viewValue)){if(!angular.isUndefined(f.$viewValue)&&null!==f.$viewValue)throw t("multiarr","Expected model value to be array but got '{0}'",f.$viewValue);f.$viewValue=[]}d.selected=f.$viewValue,p.refreshComponent(),i.$evalAsync()},i.$on("uis:select",function(e,t){d.selected.length>=d.limit||(d.selected.push(t),p.updateModel())}),i.$on("uis:activate",function(){p.activeMatchIndex=-1}),i.$watch("$select.disabled",function(e,t){t&&!e&&d.sizeSearchInput()}),d.searchInput.on("keydown",function(t){var n=t.which;i.$apply(function(){var i=!1;e.isHorizontalMovement(n)&&(i=l(n)),i&&n!=e.TAB&&(t.preventDefault(),t.stopPropagation())})}),d.searchInput.on("keyup",function(t){if(e.isVerticalMovement(t.which)||i.$evalAsync(function(){d.activeIndex=d.taggingLabel===!1?-1:0}),d.tagging.isActivated&&d.search.length>0){if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||e.isVerticalMovement(t.which))return;if(d.activeIndex=d.taggingLabel===!1?-1:0,d.taggingLabel===!1)return;var n,r,a,o,s=angular.copy(d.items),l=angular.copy(d.items),f=!1,p=-1;if(void 0!==d.tagging.fct){if(a=d.$filter("filter")(s,{isTag:!0}),a.length>0&&(o=a[0]),s.length>0&&o&&(f=!0,s=s.slice(1,s.length),l=l.slice(1,l.length)),n=d.tagging.fct(d.search),l.some(function(e){return angular.equals(e,n)})||d.selected.some(function(e){return angular.equals(e,n)}))return void i.$evalAsync(function(){d.activeIndex=0,d.items=s});n&&(n.isTag=!0)}else{if(a=d.$filter("filter")(s,function(e){return e.match(d.taggingLabel)}),a.length>0&&(o=a[0]),r=s[0],void 0!==r&&s.length>0&&o&&(f=!0,s=s.slice(1,s.length),l=l.slice(1,l.length)),n=d.search+" "+d.taggingLabel,u(d.selected,d.search)>-1)return;if(c(l.concat(d.selected)))return void(f&&(s=l,i.$evalAsync(function(){d.activeIndex=0,d.items=s})));if(c(l))return void(f&&(d.items=l.slice(1,l.length)))}f&&(p=u(d.selected,n)),p>-1?s=s.slice(p+1,s.length-1):(s=[],n&&s.push(n),s=s.concat(l)),i.$evalAsync(function(){if(d.activeIndex=0,d.items=s,d.isGrouped){var e=n?s.slice(1):s;d.setItemsFn(e),n&&(d.items.unshift(n),d.groups.unshift({name:"",items:[n],tagging:!0}))}})}}),d.searchInput.on("blur",function(){n(function(){p.activeMatchIndex=-1})})}}}]),n.directive("uiSelectNoChoice",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-no-choice");var n=t.parent().attr("theme")||e.theme;return n+"/no-choice.tpl.html"}}}]),n.directive("uiSelectSingle",["$timeout","$compile",function(t,n){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(i,r,a,o){var s=o[0],l=o[1];l.$parsers.unshift(function(e){var t,n={};return n[s.parserResult.itemName]=e,t=s.parserResult.modelMapper(i,n)}),l.$formatters.unshift(function(e){var t,n=s.parserResult&&s.parserResult.source(i,{$select:{search:""}}),r={};if(n){var a=function(n){return r[s.parserResult.itemName]=n,t=s.parserResult.modelMapper(i,r),t===e};if(s.selected&&a(s.selected))return s.selected;for(var o=n.length-1;o>=0;o--)if(a(n[o]))return n[o]}return e}),i.$watch("$select.selected",function(e){l.$viewValue!==e&&l.$setViewValue(e)}),l.$render=function(){s.selected=l.$viewValue},i.$on("uis:select",function(e,t){s.selected=t}),i.$on("uis:close",function(e,n){t(function(){s.focusser.prop("disabled",!1),n||s.focusser[0].focus()},0,!1)}),i.$on("uis:activate",function(){c.prop("disabled",!0)});var c=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");n(c)(i),s.focusser=c,s.focusInput=c,r.parent().append(c),c.bind("focus",function(){i.$evalAsync(function(){s.focus=!0})}),c.bind("blur",function(){i.$evalAsync(function(){s.focus=!1})}),c.bind("keydown",function(t){return t.which===e.BACKSPACE?(t.preventDefault(),t.stopPropagation(),s.select(void 0),void i.$apply()):void(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||((t.which==e.DOWN||t.which==e.UP||t.which==e.ENTER||t.which==e.SPACE)&&(t.preventDefault(),t.stopPropagation(),s.activate()),i.$digest()))}),c.bind("keyup input",function(t){t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||t.which==e.ENTER||t.which===e.BACKSPACE||(s.activate(c.val()),c.val(""),i.$digest())})}}}]),n.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,n){return{require:["^^uiSelect","^ngModel"],link:function(t,i,r,a){if(null===t[r.uiSelectSort])throw n("sort","Expected a list to sort");var o=a[0],s=a[1],l=angular.extend({axis:"horizontal"},t.$eval(r.uiSelectSortOptions)),c=l.axis,u="dragging",d="dropping",f="dropping-before",p="dropping-after";t.$watch(function(){return o.sortable},function(e){e?i.attr("draggable",!0):i.removeAttr("draggable")}),i.on("dragstart",function(e){i.addClass(u),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text",t.$index.toString())}),i.on("dragend",function(){m(u)});var h,g=function(e,t){this.splice(t,0,this.splice(e,1)[0])},m=function(e){angular.forEach(o.$element.querySelectorAll("."+e),function(t){angular.element(t).removeClass(e)})},v=function(e){e.preventDefault();var t="vertical"===c?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);t<this["vertical"===c?"offsetHeight":"offsetWidth"]/2?(m(p),i.addClass(f)):(m(f),i.addClass(p))},y=function(t){t.preventDefault();var n=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text"),10);e.cancel(h),h=e(function(){$(n)},20)},$=function(e){var n=t.$eval(r.uiSelectSort),a=n[e],o=null;o=i.hasClass(f)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,g.apply(n,[e,o]),s.$setViewValue(Date.now()),t.$apply(function(){t.$emit("uiSelectSort:change",{array:n,item:a,from:e,to:o})}),m(d),m(f),m(p),i.off("drop",y)};i.on("dragenter",function(){i.hasClass(u)||(i.addClass(d),i.on("dragover",v),i.on("drop",y))}),i.on("dragleave",function(e){e.target==i&&(m(d),m(f),m(p),i.off("dragover",v),i.off("drop",y))})}}}]),n.factory("$$uisDebounce",["$timeout",function(e){return function(t,n){var i;return function(){var r=this,a=Array.prototype.slice.call(arguments);i&&e.cancel(i),i=e(function(){t.apply(r,a)},n)}}}]),n.directive("uisOpenClose",["$parse","$timeout",function(e,t){return{restrict:"A",require:"uiSelect",link:function(n,i,r,a){a.onOpenCloseCallback=e(r.uisOpenClose),n.$watch("$select.open",function(e,i){e!==i&&t(function(){a.onOpenCloseCallback(n,{isOpen:e})})})}}}]),n.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){var n=this;n.parse=function(n){var i;if(i=n.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),!i)throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var r=i[5],a="";if(i[3]){r=i[5].replace(/(^\()|(\)$)/g,"");var o=i[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);o&&o[1].trim()&&(a=o[1],r=r.replace(a,""))}return{itemName:i[4]||i[2],keyName:i[3],source:t(r),filters:a,trackByExp:i[6],modelMapper:t(i[1]||i[4]||i[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}},n.getGroupNgRepeatExpression=function(){return"$group in $select.groups track by $group.name"}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" ng-show="$select.open && $select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><span class="ui-select-choices-row-inner"></span></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected track by $index"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/no-choice.tpl.html",'<ul class="ui-select-no-choice dropdown-menu" ng-show="$select.items.length == 0"><li ng-transclude=""></li></ul>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-expanded="{{$select.open}}" aria-label="{{$select.baseTitle}}" ng-class="{\'spinner\': $select.refreshing}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><span ng-show="$select.open && $select.refreshing && $select.spinnerEnabled" class="ui-select-refreshing {{$select.spinnerClass}}"></span> <input type="search" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" class="form-control ui-select-search" ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.open"><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("select2/choices.tpl.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected track by $index" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/no-choice.tpl.html",'<div class="ui-select-no-choice dropdown" ng-show="$select.items.length == 0"><div class="dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open || $select.items.length === 0}"><div class="ui-select-choices"></div></div></div>'),
e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="search-container" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled, \'select2-search\':$select.searchEnabled}"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-class="{\'select2-active\': $select.refreshing}" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div></div>'),e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown" ng-class="{\'single\': !$select.multiple, \'multi\': $select.multiple}"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match-multiple.tpl.html",'<div class="ui-select-match" data-value="" ng-repeat="$item in $select.selected track by $index" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'active\':$selectMultiple.activeMatchIndex === $index}" ui-select-sort="$select.selected"><span class="ui-select-match-item" ng-class="{\'select-locked\':$select.isLocked(this, $index)}"><span uis-transclude-append=""></span> <span class="remove ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&times;</span></span></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match"><span ng-show="!$select.searchEnabled && ($select.isEmpty() || $select.open)" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty() || $select.open" ng-transclude=""></span></div>'),e.put("selectize/no-choice.tpl.html",'<div class="ui-select-no-choice selectize-dropdown" ng-show="$select.items.length == 0"><div class="selectize-dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("selectize/select-multiple.tpl.html",'<div class="ui-select-container selectize-control multi plugin-remove_button" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-model="$select.search" ng-disabled="$select.disabled" aria-expanded="{{$select.open}}" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.isEmpty() && !$select.open" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>')}]),function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0,clearOnBlurPlaceholder:!1,escChar:"\\",eventsToHandle:["input","keyup","click","focus"],addDefaultPlaceholder:!0,allowInvalidValue:!1}).provider("uiMask.Config",function(){var e={};this.maskDefinitions=function(t){return e.maskDefinitions=t},this.clearOnBlur=function(t){return e.clearOnBlur=t},this.clearOnBlurPlaceholder=function(t){return e.clearOnBlurPlaceholder=t},this.eventsToHandle=function(t){return e.eventsToHandle=t},this.addDefaultPlaceholder=function(t){return e.addDefaultPlaceholder=t},this.allowInvalidValue=function(t){return e.allowInvalidValue=t},this.$get=["uiMaskConfig",function(t){var n=t;for(var i in e)angular.isObject(e[i])&&!angular.isArray(e[i])?angular.extend(n[i],e[i]):n[i]=e[i];return n}]}).directive("uiMask",["uiMask.Config",function(e){function t(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var n=angular.copy(e);return function(e,i,r,a){function o(e){return angular.isDefined(e)?(b(e),q?(f(),p(),!0):d()):d()}function s(e){e&&(M=e,!q||0===i.val().length&&angular.isDefined(r.placeholder)||i.val(v(m(i.val()))))}function l(){return o(r.uiMask)}function c(e){return q?(N=m(e||""),O=g(N),a.$setValidity("mask",O),N.length&&(O||Y.allowInvalidValue)?v(N):void 0):e}function u(e){return q?(N=m(e||""),O=g(N),a.$viewValue=N.length?v(N):"",a.$setValidity("mask",O),O||Y.allowInvalidValue?X?a.$viewValue:N:void 0):e}function d(){return q=!1,h(),angular.isDefined(W)?i.attr("placeholder",W):i.removeAttr("placeholder"),angular.isDefined(G)?i.attr("maxlength",G):i.removeAttr("maxlength"),i.val(a.$modelValue),a.$viewValue=a.$modelValue,!1}function f(){N=U=m(a.$modelValue||""),L=B=v(N),O=g(N),r.maxlength&&i.attr("maxlength",2*I[I.length-1]),!W&&Y.addDefaultPlaceholder&&i.attr("placeholder",M);for(var e=a.$modelValue,t=a.$formatters.length;t--;)e=a.$formatters[t](e);a.$viewValue=e||"",a.$render()}function p(){V||(i.bind("blur",w),i.bind("mousedown mouseup",S),i.bind("keydown",k),i.bind(Y.eventsToHandle.join(" "),E),V=!0)}function h(){V&&(i.unbind("blur",w),i.unbind("mousedown",S),i.unbind("mouseup",S),i.unbind("keydown",k),i.unbind("input",E),i.unbind("keyup",E),i.unbind("click",E),i.unbind("focus",E),V=!1)}function g(e){return e.length?e.length>=F:!0}function m(e){var t,n,r="",a=i[0],o=P.slice(),s=H,l=s+_(a),c="";return e=e.toString(),t=0,n=e.length-M.length,angular.forEach(R,function(i){var r=i.position;r>=s&&l>r||(r>=s&&(r+=n),e.substring(r,r+i.value.length)===i.value&&(c+=e.slice(t,r),t=r+i.value.length))}),e=c+e.slice(t),angular.forEach(e.split(""),function(e){o.length&&o[0].test(e)&&(r+=e,o.shift())}),r}function v(e){var t="",n=I.slice();return angular.forEach(M.split(""),function(i,r){e.length&&r===n[0]?(t+=e.charAt(0)||"_",e=e.substr(1),n.shift()):t+=i}),t}function y(e){var t,n=angular.isDefined(r.uiMaskPlaceholder)?r.uiMaskPlaceholder:r.placeholder;return angular.isDefined(n)&&n[e]?n[e]:(t=angular.isDefined(r.uiMaskPlaceholderChar)&&r.uiMaskPlaceholderChar?r.uiMaskPlaceholderChar:"_","space"===t.toLowerCase()?" ":t[0])}function $(){var e,t,n=M.split("");I&&!isNaN(I[0])&&angular.forEach(I,function(e){n[e]="_"}),e=n.join(""),t=e.replace(/[_]+/g,"_").split("_"),t=t.filter(function(e){return""!==e});var i=0;return t.map(function(t){var n=e.indexOf(t,i);return i=n+1,{value:t,position:n}})}function b(e){var t=0;if(I=[],P=[],M="",angular.isString(e)){F=0;var n=!1,i=0,r=e.split(""),a=!1;angular.forEach(r,function(e,r){a?(a=!1,M+=e,t++):Y.escChar===e?a=!0:Y.maskDefinitions[e]?(I.push(t),M+=y(r-i),P.push(Y.maskDefinitions[e]),t++,n||F++,n=!1):"?"===e?(n=!0,i++):(M+=e,t++)})}I.push(I.slice().pop()+1),R=$(),q=I.length>1?!0:!1}function w(){if((Y.clearOnBlur||Y.clearOnBlurPlaceholder&&0===N.length&&r.placeholder)&&(H=0,j=0,O&&0!==N.length||(L="",i.val(""),e.$apply(function(){a.$pristine||a.$setViewValue("")}))),N!==Q){var t=i.val(),n=""===N&&t&&angular.isDefined(r.uiMaskPlaceholderChar)&&"space"===r.uiMaskPlaceholderChar;n&&i.val(""),x(i[0]),n&&i.val(t)}Q=N}function x(e){var t;if(angular.isFunction(window.Event)&&!e.fireEvent)try{t=new Event("change",{view:window,bubbles:!0,cancelable:!1})}catch(n){t=document.createEvent("HTMLEvents"),t.initEvent("change",!1,!0)}finally{e.dispatchEvent(t)}else"createEvent"in document?(t=document.createEvent("HTMLEvents"),t.initEvent("change",!1,!0),e.dispatchEvent(t)):e.fireEvent&&e.fireEvent("onchange")}function S(e){"mousedown"===e.type?i.bind("mouseout",C):i.unbind("mouseout",C)}function C(){j=_(this),i.unbind("mouseout",C)}function k(e){var t=8===e.which,n=T(this)-1||0,r=90===e.which&&e.ctrlKey;if(t){for(;n>=0;){if(A(n)){D(this,n+1);break}n--}z=-1===n}r&&(i.val(""),e.preventDefault())}function E(t){t=t||{};var n=t.which,r=t.type;if(16!==n&&91!==n){var o,s=i.val(),l=B,c=!1,u=m(s),d=U,f=T(this)||0,p=H||0,h=f-p,g=I[0],y=I[u.length]||I.slice().shift(),$=j||0,b=_(this)>0,w=$>0,x=s.length>l.length||$&&s.length>l.length-$,S=s.length<l.length||$&&s.length===l.length-$,C=n>=37&&40>=n&&t.shiftKey,k=37===n,E=8===n||"keyup"!==r&&S&&-1===h,P=46===n||"keyup"!==r&&S&&0===h&&!w,R=(k||E||"click"===r)&&f>g;if(j=_(this),!C&&(!b||"click"!==r&&"keyup"!==r&&"focus"!==r)){if(E&&z)return i.val(M),e.$apply(function(){a.$setViewValue("")}),void D(this,p);if("input"===r&&S&&!w&&u===d){for(;E&&f>g&&!A(f);)f--;for(;P&&y>f&&-1===I.indexOf(f);)f++;var F=I.indexOf(f);u=u.substring(0,F)+u.substring(F+1),u!==d&&(c=!0)}for(o=v(u),B=o,U=u,!c&&s.length>o.length&&(c=!0),i.val(o),c&&e.$apply(function(){a.$setViewValue(o)}),x&&g>=f&&(f=g+1),R&&f--,f=f>y?y:g>f?g:f;!A(f)&&f>g&&y>f;)f+=R?-1:1;(R&&y>f||x&&!A(p))&&f++,H=f,D(this,f)}}}function A(e){return I.indexOf(e)>-1}function T(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection&&t(i[0])){e.focus();var n=document.selection.createRange();return n.moveStart("character",e.value?-e.value.length:0),n.text.length}return 0}function D(e,n){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)t(i[0])&&(e.focus(),e.setSelectionRange(n,n));else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",n),r.select()}}function _(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:window.getSelection?window.getSelection().toString().length:document.selection?document.selection.createRange().text.length:0:0}var I,P,M,R,F,N,L,O,B,U,H,j,z,q=!1,V=!1,W=r.placeholder,G=r.maxlength,K=a.$isEmpty;a.$isEmpty=function(e){return K(q?m(e||""):e)};var X=!1;r.$observe("modelViewValue",function(e){"true"===e&&(X=!0)}),r.$observe("allowInvalidValue",function(e){Y.allowInvalidValue=""===e?!0:!!e,c(a.$modelValue)});var Y={};r.uiOptions?(Y=e.$eval("["+r.uiOptions+"]"),Y=angular.isObject(Y[0])?function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(void 0===t[n]?t[n]=angular.copy(e[n]):angular.isObject(t[n])&&!angular.isArray(t[n])&&(t[n]=angular.extend({},e[n],t[n])));return t}(n,Y[0]):n):Y=n,r.$observe("uiMask",o),angular.isDefined(r.uiMaskPlaceholder)?r.$observe("uiMaskPlaceholder",s):r.$observe("placeholder",s),angular.isDefined(r.uiMaskPlaceholderChar)&&r.$observe("uiMaskPlaceholderChar",l),a.$formatters.unshift(c),a.$parsers.unshift(u);var Q=i.val();i.bind("mousedown mouseup",S),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&i!==1/0&&i!==-(1/0)&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var r=i>=0?i:Math.max(n-Math.abs(i),0);n>r;r++)if(r in t&&t[r]===e)return r;return-1})}}}}])}(),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(t,n){if("__setXHR_"===t){var i=n(this);i instanceof Function&&i(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="7.3.6",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(e,t,n){function i(i){function o(e){c.notify&&c.notify(e),u.progressFunc&&n(function(){u.progressFunc(e)})}function s(e){return null!=i._start&&a?{loaded:e.loaded+i._start,total:i._file.size,type:e.type,config:i,lengthComputable:!0,target:e.target}:e}function l(){e(i).then(function(e){i._chunkSize&&!i._finished?(o({loaded:i._end,total:i._file.size,config:i,type:"progress"}),r.upload(i)):(i._finished&&delete i._finished,c.resolve(e))},function(e){c.reject(e)},function(e){c.notify(e)})}i.method=i.method||"POST",i.headers=i.headers||{};var c=i._deferred=i._deferred||t.defer(),u=c.promise;return i.headers.__setXHR_=function(){return function(e){e&&(i.__XHR=e,i.xhrFn&&i.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=i,o(s(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=i,o(s(e)))},!1))}},a?i._chunkSize&&i._end&&!i._finished?(i._start=i._end,i._end+=i._chunkSize,l()):i.resumeSizeUrl?e.get(i.resumeSizeUrl).then(function(e){i.resumeSizeResponseReader?i._start=i.resumeSizeResponseReader(e.data):i._start=parseInt((null==e.data.size?e.data:e.data.size).toString()),i._chunkSize&&(i._end=i._start+i._chunkSize),l()},function(e){throw e}):i.resumeSize?i.resumeSize().then(function(e){i._start=e,l()},function(e){throw e}):l():l(),u.success=function(e){return u.then(function(t){e(t.data,t.status,t.headers,i)}),u},u.error=function(e){return u.then(null,function(t){e(t.data,t.status,t.headers,i)}),u},u.progress=function(e){return u.progressFunc=e,u.then(null,null,function(t){e(t)}),u},u.abort=u.pause=function(){return i.__XHR&&n(function(){i.__XHR.abort()}),u},u.xhr=function(e){return i.xhrFn=function(t){return function(){t&&t.apply(u,arguments),e.apply(u,arguments)}}(i.xhrFn),u},u}var r=this;this.isResumeSupported=function(){return window.Blob&&(new Blob).slice};var a=this.isResumeSupported();this.upload=function(e){function t(n,i,r){if(void 0!==i)if(angular.isDate(i)&&(i=i.toISOString()),angular.isString(i))n.append(r,i);else if("form"===e.sendFieldsAs)if(angular.isObject(i))for(var a in i)i.hasOwnProperty(a)&&t(n,i[a],r+"["+a+"]");else n.append(r,i);else i=angular.isString(i)?i:angular.toJson(i),"json-blob"===e.sendFieldsAs?n.append(r,new Blob([i],{type:"application/json"})):n.append(r,i)}function n(e){return e instanceof Blob||e.flashId&&e.name&&e.size}function o(t,i,r){if(n(i)){if(e._file=e._file||i,null!=e._start&&a){e._end&&e._end>=i.size&&(e._finished=!0,e._end=i.size);var s=i.slice(e._start,e._end||i.size);s.name=i.name,i=s,e._chunkSize&&(t.append("chunkSize",e._end-e._start),t.append("chunkNumber",Math.floor(e._start/e._chunkSize)),t.append("totalSize",e._file.size))}t.append(r,i,i.fileName||i.name)}else{if(!angular.isObject(i))throw"Expected file object in Upload.upload file option: "+i.toString();for(var l in i)if(i.hasOwnProperty(l)){var c=l.split(",");c[1]&&(i[l].fileName=c[1].replace(/^\s+|\s+$/g,"")),o(t,i[l],c[0])}}}return e._chunkSize=r.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(n){var i,r=new FormData,a={};for(i in e.fields)e.fields.hasOwnProperty(i)&&(a[i]=e.fields[i]);n&&(a.data=n);for(i in a)if(a.hasOwnProperty(i)){var s=a[i];e.formDataAppender?e.formDataAppender(r,i,s):t(r,s,i)}if(null!=e.file)if(angular.isArray(e.file))for(var l=0;l<e.file.length;l++)o(r,e.file[l],"file");else o(r,e.file,"file");return r}),i(e)},this.http=function(t){return t.transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=r.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,i(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1e3*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1e6*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1e9*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","UploadResize",function(e,t,n,i){var r=i;return r.getAttrWithDefaults=function(e,t){return null!=e[t]?e[t]:null==r.defaults[t]?r.defaults[t]:r.defaults[t].toString()},r.attrGetter=function(t,n,i,r){if(!i)return this.getAttrWithDefaults(n,t);try{return r?e(this.getAttrWithDefaults(n,t))(i,r):e(this.getAttrWithDefaults(n,t))(i)}catch(a){if(t.search(/min|max|pattern/i))return this.getAttrWithDefaults(n,t);throw a}},r.updateModel=function(n,i,a,o,s,l,c){function u(){var c=s&&s.length?s[0]:null;if(n){var u=!r.attrGetter("ngfMultiple",i,a)&&!r.attrGetter("multiple",i)&&!h;e(r.attrGetter("ngModel",i)).assign(a,u?c:s)}var d=r.attrGetter("ngfModel",i);d&&e(d).assign(a,s),o&&e(o)(a,{$files:s,$file:c,$newFiles:f,$duplicateFiles:p,$event:l}),t(function(){})}function d(e,t){var n=r.attrGetter("ngfResize",i,a);if(!n||!r.isResizeSupported())return t();for(var o=e.length,s=function(){o--,0===o&&t()},l=function(t){return function(n){e.splice(t,1,n),s()}},c=function(e){return function(t){s(),e.$error="resize",e.$errorParam=(t?(t.message?t.message:t)+": ":"")+(e&&e.name)}},u=0;u<e.length;u++){var d=e[u];d.$error||0!==d.type.indexOf("image")?s():r.resize(d,n.width,n.height,n.quality).then(l(u),c(d))}}var f=s,p=[],h=r.attrGetter("ngfKeep",i,a);if(h===!0){if(!s||!s.length)return;var g=(n&&n.$modelValue||i.$$ngfPrevFiles||[]).slice(0),m=!1;if(r.attrGetter("ngfKeepDistinct",i,a)===!0){for(var v=g.length,y=0;y<s.length;y++){for(var $=0;v>$;$++)if(s[y].name===g[$].name){p.push(s[y]);break}$===v&&(g.push(s[y]),m=!0)}if(!m)return;s=g}else s=g.concat(s)}i.$$ngfPrevFiles=s,c?u():r.validate(s,n,i,a,r.attrGetter("ngfValidateLater",i),function(){d(s,function(){t(function(){u()})})})},r}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,t,n,i){function r(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&t.length>2){var n=i.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}function a(e,t,n,i,a,s,l,c){function u(){return"input"===t[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function d(){return $("ngfChange")||$("ngfSelect")}function f(t){for(var r=t.__files_||t.target&&t.target.files,a=[],o=0;o<r.length;o++)a.push(r[o]);c.updateModel(i,n,e,d(),a.length?a:null,t)}function p(e){if(t!==e)for(var n=0;n<t[0].attributes.length;n++){var i=t[0].attributes[n];"type"!==i.name&&"class"!==i.name&&"id"!==i.name&&"style"!==i.name&&((null==i.value||""===i.value)&&("required"===i.name&&(i.value="required"),"multiple"===i.name&&(i.value="multiple")),e.attr(i.name,i.value))}}function h(){if(u())return t;var e=angular.element('<input type="file">');return p(e),e.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),o.push({el:t,ref:e}),document.body.appendChild(e[0]),e}function g(n){if(t.attr("disabled")||$("ngfSelectDisabled",e))return!1;var i=m(n);return null!=i?i:(v(n),r(navigator.userAgent)?setTimeout(function(){x[0].click()},0):x[0].click(),!1)}function m(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if("touchstart"===e.type)return w=t?t[0].clientY:0,!0;if(e.stopPropagation(),e.preventDefault(),"touchend"===e.type){var n=t?t[0].clientY:0;if(Math.abs(n-w)>20)return!1}}function v(t){x.val()&&(x.val(null),c.updateModel(i,n,e,d(),null,t,!0))}function y(e){if(x&&!x.attr("__ngf_ie10_Fix_")){if(!x[0].parentNode)return void(x=null);e.preventDefault(),e.stopPropagation(),x.unbind("click");var t=x.clone();return x.replaceWith(t),x=t,x.attr("__ngf_ie10_Fix_","true"),x.bind("change",f),x.bind("click",y),x[0].click(),!1}x.removeAttr("__ngf_ie10_Fix_")}var $=function(e,t){return c.attrGetter(e,n,t)},b=[];b.push(e.$watch($("ngfMultiple"),function(){x.attr("multiple",$("ngfMultiple",e))})),b.push(e.$watch($("ngfCapture"),function(){x.attr("capture",$("ngfCapture",e))})),n.$observe("accept",function(){x.attr("accept",$("accept"))}),b.push(function(){n.$$observers&&delete n.$$observers.accept});var w=0,x=t;u()||(x=h()),x.bind("change",f),u()?t.bind("click",v):t.bind("click touchstart touchend",g),c.registerValidators(i,x,n,e),-1!==navigator.appVersion.indexOf("MSIE 10")&&x.bind("click",y),e.$on("$destroy",function(){u()||x.remove(),angular.forEach(b,function(e){e()})}),s(function(){for(var e=0;e<o.length;e++){var t=o[e];document.body.contains(t.el[0])||(o.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,x,f)}var o=[];return{restrict:"AEC",require:"?ngModel",link:function(r,o,s,l){a(r,o,s,l,e,t,n,i)}}}]),function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function t(t,n,i,r,a,o,s,l){function c(e){var o=t.attrGetter("ngfNoObjectUrl",a,i);t.dataUrl(e,o)["finally"](function(){n(function(){var t=(o?e.dataUrl:e.blobUrl)||e.dataUrl;l?r.css("background-image","url('"+(t||"")+"')"):r.attr("src",t),t?r.removeClass("ngf-hide"):r.addClass("ngf-hide")})})}n(function(){var n=i.$watch(a[o],function(n){var i=s;if("ngfThumbnail"===o&&(i||(i={width:r[0].clientWidth,height:r[0].clientHeight}),0===i.width&&window.getComputedStyle)){var a=getComputedStyle(r[0]);i={width:parseInt(a.width.slice(0,-2)),height:parseInt(a.height.slice(0,-2))}}return angular.isString(n)?(r.removeClass("ngf-hide"),l?r.css("background-image","url('"+n+"')"):r.attr("src",n)):void(!n||!n.type||0!==n.type.search(e(r[0]))||l&&0!==n.type.indexOf("image")?r.addClass("ngf-hide"):i&&t.isResizeSupported()?t.resize(n,i.width,i.height,i.quality).then(function(e){c(e)},function(e){throw e}):c(n))});i.$on("$destroy",function(){n()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,t,n){var i=e;return i.dataUrl=function(e,i){if(i&&null!=e.dataUrl||!i&&null!=e.blobUrl){var r=n.defer();return t(function(){r.resolve(i?e.dataUrl:e.blobUrl)}),r.promise}var a=i?e.$ngfDataUrlPromise:e.$ngfBlobUrlPromise;if(a)return a;var o=n.defer();return t(function(){if(window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||e.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!i){var r;try{r=n.createObjectURL(e)}catch(a){return void t(function(){e.blobUrl="",o.reject()})}t(function(){e.blobUrl=r,r&&o.resolve(r)})}else{var s=new FileReader;s.onload=function(n){t(function(){e.dataUrl=n.target.result,o.resolve(n.target.result)})},s.onerror=function(){t(function(){e.dataUrl="",o.reject()})},s.readAsDataURL(e)}}else t(function(){e[i?"dataUrl":"blobUrl"]="",o.reject()})}),a=i?e.$ngfDataUrlPromise=o.promise:e.$ngfBlobUrlPromise=o.promise,a["finally"](function(){delete e[i?"$ngfDataUrlPromise":"$ngfBlobUrlPromise"]}),a},i}]);var n=angular.element("<style>.ngf-hide{display:none !important}</style>");document.getElementsByTagName("head")[0].appendChild(n[0]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,a){t(e,n,i,r,a,"ngfSrc",e.attrGetter("ngfResize",a,i),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,a){t(e,n,i,r,a,"ngfBackground",e.attrGetter("ngfResize",a,i),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,a){var o=e.attrGetter("ngfSize",a,i);t(e,n,i,r,a,"ngfThumbnail",o,e.attrGetter("ngfAsBackground",a,i))}}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,t,n){function i(e){if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])return e.substring(1,e.length-1);var t=e.split(","),n="";if(t.length>1)for(var r=0;r<t.length;r++)n+="("+i(t[r])+")",r<t.length-1&&(n+="|");else 0===e.indexOf(".")&&(e="*"+e),n="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",n=n.replace(/\\\*/g,".*").replace(/\\\?/g,".");return n}var r=e;return r.registerValidators=function(e,t,n,i){function a(e){angular.forEach(e.$ngfValidations,function(t){e.$setValidity(t.name,t.valid)})}e&&(e.$ngfValidations=[],e.$formatters.push(function(o){return r.attrGetter("ngfValidateLater",n,i)||!e.$$ngfValidated?(r.validate(o,e,n,i,!1,function(){a(e),e.$$ngfValidated=!1}),o&&0===o.length&&(o=null),!t||null!=o&&0!==o.length||t.val()&&t.val(null)):(a(e),e.$$ngfValidated=!1),o}))},r.validatePattern=function(e,t){if(!t)return!0;var n=new RegExp(i(t),"gi");return null!=e.type&&n.test(e.type.toLowerCase())||null!=e.name&&n.test(e.name.toLowerCase())},r.validate=function(e,t,n,i,a,o){function s(n,i,r){if(e){for(var a="ngf"+n[0].toUpperCase()+n.substr(1),o=e.length,s=null;o--;){var l=e[o],u=c(a,{$file:l});null==u&&(u=i(c("ngfValidate")||{}),s=null==s?!0:s),null!=u&&(r(l,u)||(l.$error=n,l.$errorParam=u,e.splice(o,1),s=!1))}null!==s&&t.$ngfValidations.push({name:n,valid:s})}}function l(n,i,r,a,s){if(e){var l=0,d=!1,f="ngf"+n[0].toUpperCase()+n.substr(1);e=void 0===e.length?[e]:e,angular.forEach(e,function(e){if(0!==e.type.search(r))return!0;var p=c(f,{$file:e})||i(c("ngfValidate",{$file:e})||{});p&&(u++,l++,a(e,p).then(function(t){s(t,p)||(e.$error=n,e.$errorParam=p,d=!0)},function(){c("ngfValidateForce",{$file:e})&&(e.$error=n,e.$errorParam=p,d=!0)})["finally"](function(){u--,l--,l||t.$ngfValidations.push({name:n,valid:!d}),u||o.call(t,t.$ngfValidations)}))})}}t=t||{},t.$ngfValidations=t.$ngfValidations||[],angular.forEach(t.$ngfValidations,function(e){e.valid=!0});var c=function(e,t){return r.attrGetter(e,n,i,t)};if(a)return void o.call(t);if(t.$$ngfValidated=!0,null==e||0===e.length)return void o.call(t);if(e=void 0===e.length?[e]:e.slice(0),s("pattern",function(e){return e.pattern},r.validatePattern),s("minSize",function(e){return e.size&&e.size.min},function(e,t){return e.size>=r.translateScalars(t)}),s("maxSize",function(e){return e.size&&e.size.max},function(e,t){return e.size<=r.translateScalars(t)}),s("validateFn",function(){return null},function(e,t){return t===!0||null===t||""===t}),!e.length)return void o.call(t,t.$ngfValidations);var u=0;l("maxHeight",function(e){return e.height&&e.height.max},/image/,this.imageDimensions,function(e,t){return e.height<=t}),l("minHeight",function(e){return e.height&&e.height.min},/image/,this.imageDimensions,function(e,t){return e.height>=t}),l("maxWidth",function(e){return e.width&&e.width.max},/image/,this.imageDimensions,function(e,t){return e.width<=t}),l("minWidth",function(e){return e.width&&e.width.min},/image/,this.imageDimensions,function(e,t){return e.width>=t}),l("ratio",function(e){return e.ratio},/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),i=!1,r=0;r<n.length;r++){var a=n[r],o=a.search(/x/i);a=o>-1?parseFloat(a.substring(0,o))/parseFloat(a.substring(o+1)):parseFloat(a),Math.abs(e.width/e.height-a)<1e-4&&(i=!0)}return i}),l("maxDuration",function(e){return e.duration&&e.duration.max},/audio|video/,this.mediaDuration,function(e,t){return e<=r.translateScalars(t)}),l("minDuration",function(e){return e.duration&&e.duration.min},/audio|video/,this.mediaDuration,function(e,t){return e>=r.translateScalars(t)}),l("validateAsyncFn",function(){return null},/./,function(e,t){return t},function(e){return e===!0||null===e||""===e}),u||o.call(t,t.$ngfValidations)},r.imageDimensions=function(e){if(e.width&&e.height){var i=t.defer();return n(function(){i.resolve({width:e.width,height:e.height})}),i.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var a=t.defer();return n(function(){return 0!==e.type.indexOf("image")?void a.reject("not image"):void r.dataUrl(e).then(function(t){function i(){var t=s[0].clientWidth,n=s[0].clientHeight;s.remove(),e.width=t,e.height=n,a.resolve({width:t,height:n})}function r(){s.remove(),a.reject("load error")}function o(){n(function(){s[0].parentNode&&(s[0].clientWidth?i():l>10?r():o())},1e3)}var s=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed");s.on("load",i),s.on("error",r);var l=0;o(),angular.element(document.getElementsByTagName("body")[0]).append(s)},function(){a.reject("load error")})}),e.$ngfDimensionPromise=a.promise,e.$ngfDimensionPromise["finally"](function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},r.mediaDuration=function(e){if(e.duration){var i=t.defer();return n(function(){i.resolve(e.duration)}),i.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var a=t.defer();return n(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void a.reject("not media"):void r.dataUrl(e).then(function(t){function i(){var t=s[0].duration;e.duration=t,s.remove(),a.resolve(t)}function r(){s.remove(),a.reject("load error")}function o(){n(function(){s[0].parentNode&&(s[0].duration?i():l>10?r():o())},1e3)}var s=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed");s.on("loadedmetadata",i),s.on("error",r);var l=0;o(),angular.element(document.body).append(s)},function(){a.reject("load error")})}),e.$ngfDurationPromise=a.promise,e.$ngfDurationPromise["finally"](function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},r}]),ngFileUpload.service("UploadResize",["UploadValidate","$q","$timeout",function(e,t,n){var i=e,r=function(e,t,n,i){var r=Math.min(n/e,i/t);return{width:e*r,height:t*r}},a=function(e,n,i,a,o){var s=t.defer(),l=document.createElement("canvas"),c=document.createElement("img");return 0===n&&(n=c.width,i=c.height),c.onload=function(){try{var e=r(c.width,c.height,n,i);l.width=e.width,l.height=e.height;var t=l.getContext("2d");t.drawImage(c,0,0,e.width,e.height),s.resolve(l.toDataURL(o||"image/WebP",a||1))}catch(u){s.reject(u)}},c.onerror=function(){s.reject()},c.src=e,s.promise},o=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]),r=i.length,a=new Uint8Array(r);r--;)a[r]=i.charCodeAt(r);return new Blob([a],{type:n})};return i.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")},i.resize=function(e,r,s,l){var c=t.defer();return 0!==e.type.indexOf("image")?(n(function(){c.resolve("Only images are allowed for resizing!");
}),c.promise):(i.dataUrl(e,!0).then(function(t){a(t,r,s,l,e.type).then(function(t){var n=o(t);n.name=e.name,c.resolve(n)},function(){c.reject()})},function(){c.reject()}),c.promise)},i}]),function(){function e(e,n,i,r,a,o,s,l){function c(){return n.attr("disabled")||p("ngfDropDisabled",e)}function u(e,t,n,i){var r=p("ngfDragOverClass",e,{$event:n}),a=p("ngfDragOverClass")||"dragover";if(angular.isString(r))return void i(r);if(r&&(r.delay&&(v=r.delay),r.accept||r.reject)){var o=n.dataTransfer.items;if(null!=o)for(var s=p("ngfPattern",e,{$event:n}),c=0;c<o.length;c++)if("file"===o[c].kind||""===o[c].kind){if(!l.validatePattern(o[c],s)){a=r.reject;break}a=r.accept}}i(a)}function d(e,t,n,i){function r(e,t,n){if(null!=t)if(t.isDirectory){var i=(n||"")+t.name;e.push({name:t.name,type:"directory",path:i});var a=t.createReader(),o=[];l++;var s=function(){a.readEntries(function(i){try{if(i.length)o=o.concat(Array.prototype.slice.call(i||[],0)),s();else{for(var a=0;a<o.length;a++)r(e,o[a],(n?n:"")+t.name+"/");l--}}catch(c){l--}},function(){l--})};s()}else l++,t.file(function(t){try{l--,t.path=(n?n:"")+t.name,e.push(t)}catch(i){l--}},function(){l--})}var a=[],l=0,c=e.dataTransfer.items;if(c&&c.length>0&&"file"!==s.protocol())for(var u=0;u<c.length;u++){if(c[u].webkitGetAsEntry&&c[u].webkitGetAsEntry()&&c[u].webkitGetAsEntry().isDirectory){var d=c[u].webkitGetAsEntry();if(d.isDirectory&&!n)continue;null!=d&&r(a,d)}else{var f=c[u].getAsFile();null!=f&&a.push(f)}if(!i&&a.length>0)break}else{var p=e.dataTransfer.files;if(null!=p)for(var h=0;h<p.length&&(a.push(p.item(h)),i||!(a.length>0));h++);}var g=0;!function m(e){o(function(){if(l)10*g++<2e4&&m(10);else{if(!i&&a.length>1){for(u=0;"directory"===a[u].type;)u++;a=[a[u]]}t(a)}},e||0)}()}var f=t(),p=function(e,t,n){return l.attrGetter(e,i,t,n)};if(p("dropAvailable")&&o(function(){e[p("dropAvailable")]?e[p("dropAvailable")].value=f:e[p("dropAvailable")]=f}),!f)return void(p("ngfHideOnDropNotAvailable",e)===!0&&n.css("display","none"));l.registerValidators(r,null,i,e);var h,g=null,m=a(p("ngfStopPropagation")),v=1;n[0].addEventListener("dragover",function(t){if(!c()){if(t.preventDefault(),m(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var r=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy"}o.cancel(g),h||(h="C",u(e,i,t,function(e){h=e,n.addClass(h)}))}},!1),n[0].addEventListener("dragenter",function(t){c()||(t.preventDefault(),m(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(){c()||(g=o(function(){h&&n.removeClass(h),h=null},v||1))},!1),n[0].addEventListener("drop",function(t){c()||(t.preventDefault(),m(e)&&t.stopPropagation(),h&&n.removeClass(h),h=null,d(t,function(n){l.updateModel(r,i,e,p("ngfChange")||p("ngfDrop"),n,t)},p("ngfAllowDir",e)!==!1,p("multiple")||p("ngfMultiple",e)))},!1),n[0].addEventListener("paste",function(t){if(!c()){var n=[],a=t.clipboardData||t.originalEvent.clipboardData;if(a&&a.items){for(var o=0;o<a.items.length;o++)-1!==a.items[o].type.indexOf("image")&&n.push(a.items[o].getAsFile());l.updateModel(r,i,e,p("ngfChange")||p("ngfDrop"),n,t)}}},!1)}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload",function(t,n,i,r){return{restrict:"AEC",require:"?ngModel",link:function(a,o,s,l){e(a,o,s,l,t,n,i,r)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,i){return function(r,a,o){if(t()){var s=e(i.attrGetter("ngfDropAvailable",o));n(function(){s(r),s.assign&&s.assign(r,!0)})}}}])}();
//# sourceMappingURL=bower_001.min.js.map