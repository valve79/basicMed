<div ng-repeat="p in vm.permissionsWithUsersAndGroups" ng-if="vm.isLoaded"><div class="row"><div class="col-lg-3 col-sm-3 col-xs-12 text-left"><b>{{p.permission.name}}</b></div><div class="col-lg-9 col-sm-9 col-xs-12"><div class="row"><div class="col-lg-11 col-sm-11 col-xs-12" ng-if="p.isEditing"><div class="row"><div class="col-lg-5 col-sm-5 col-xs-12 text-left vcenter"><form role="form"><div class="form-group"><label>Доступные пользователи</label><div id="currentAvailableUsersField" name="currentAvailableUsersField" ng-if="p.isUsersShowed" entities-select2-selector vhs-entities-url="vm.getAvailableUsersUrl(vm.$scope.businessUnitFilter, p.userIds)" vhs-model="p" vhs-model-property="'currentAvailableUserIds'" vhs-multiple="true" vhs-nullable="true" vhs-on-change="p.currentAvailableUsersChangeCallback(selected, id, name)"></div></div></form></div><div class="col-lg-1 col-sm-1 col-xs-12 text-center vcenter"><div class="row"><button class="btn btn-default" type="button" title="Выбрать" ng-disabled="p.currentAvailableUsers.length == 0" ng-click="vm.selectUsers(p)"><span class="glyphicon glyphicon-arrow-right"></span></button></div><div class="row"><button class="btn btn-default" type="button" title="Отменить выбор" ng-disabled="p.currentSelectedUsers.length == 0" ng-click="vm.unselectUsers(p)"><span class="glyphicon glyphicon-arrow-left"></span></button></div></div><div class="col-lg-5 col-sm-5 col-xs-12 text-left vcenter"><form role="form"><div class="form-group"><label>Выбранные пользователи</label> <select multiple="multiple" class="form-control" ng-multiple="true" ng-model="p.currentSelectedUsers" ng-options="u as u.name for u in p.users" select-options-disabled="u.disabled || vm.disableUser(u, p) for u in p.users"></select></div></form></div></div><div class="row"><div class="col-lg-5 col-sm-5 col-xs-12 text-left vcenter"><form role="form"><div class="form-group"><label>Доступные группы</label><div id="currentAvailableGroupsField" name="currentAvailableGroupsField" ng-if="p.isGroupsShowed" entities-select2-selector vhs-entities-url="vm.getAvailableGroupsUrl(vm.$scope.businessUnitFilter, p.groupIds, p.permission.id)" vhs-model="p" vhs-model-property="'currentAvailableGroupIds'" vhs-multiple="true" vhs-nullable="true" vhs-on-change="p.currentAvailableGroupsChangeCallback(selected, id, name)"></div></div></form></div><div class="col-lg-1 col-sm-1 col-xs-12 text-center vcenter"><div class="row"><button class="btn btn-default" type="button" title="Выбрать" ng-disabled="p.currentAvailableGroups.length == 0" ng-click="vm.selectGroups(p)"><span class="glyphicon glyphicon-arrow-right"></span></button></div><div class="row"><button class="btn btn-default" type="button" title="Отменить выбор" ng-disabled="p.currentSelectedGroups.length == 0" ng-click="vm.unselectGroups(p)"><span class="glyphicon glyphicon-arrow-left"></span></button></div></div><div class="col-lg-5 col-sm-5 col-xs-12 text-left vcenter"><form role="form"><div class="form-group"><label>Выбранные группы</label> <select multiple="multiple" class="form-control" ng-multiple="true" ng-model="p.currentSelectedGroups" ng-options="g as g.name for g in p.groups"></select></div></form></div></div></div><div class="col-lg-11 col-sm-11 col-xs-12" ng-if="!p.isEditing"><ul class="col-lg-6 col-sm-6 col-xs-12" ng-if="p.users.length != 0"><li ng-repeat="u in p.users">{{u.name}}</li></ul><div class="col-lg-6 col-sm-6 col-xs-12" ng-if="p.users.length == 0"><i>Пользователи не выбраны</i></div><ul class="col-lg-6 col-sm-6 col-xs-12" ng-if="p.groups.length != 0"><li ng-repeat="g in p.groups">{{g.name}}</li></ul><div class="col-lg-6 col-sm-6 col-xs-12" ng-if="p.groups.length == 0"><i>Группы не выбраны</i></div></div><div class="col-lg-1 col-sm-1 col-xs-12 text-right"><button class="btn btn-default" type="button" ng-click="vm.editing(p)" title="Редактировать" ng-if="!p.isEditing" ng-disabled="vm.$scope.disabled"><span class="glyphicon glyphicon-edit"></span> <span class="sr-only">Завершить редактирование</span></button> <button class="btn btn-default" type="button" ng-click="vm.edited(p)" title="Завершить редактирование" ng-if="p.isEditing"><span class="glyphicon glyphicon-ok"></span> <span class="sr-only">Завершить редактирование</span></button></div></div></div></div></div>