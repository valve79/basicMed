<div ng-controller="logs.SystemLogController as vm"><div vhs-grid data-grid-model-path="vm.systemLogsGridModel" data-vhs-grid-uuid="systemLogsRegisterGrid"><div class="content-header"><form class="form-inline form-header" data-vhs-auto-search><div class="form-group filter"><div class="btn-group" ng-if="vm.systemLogLevels"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Уровень <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><div multiple-checkbox-selector ng-click="gridVm.applyFilter()" vhs-entities="vm.systemLogLevels" vhs-model="vm.levelsFilter" role="menuitem"></div></ul></div><div class="btn-group" ng-if="vm.systemLogSources"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Источник <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><div multiple-checkbox-selector ng-click="gridVm.applyFilter()" vhs-entities="vm.systemLogSources" vhs-model="vm.sourcesFilter" role="menuitem"></div></ul></div></div><div class="search-filter"><div class="form-group table-settings"><div vhs-grid-configuration></div></div><div class="form-group pull-right"><div class="date"><label for="forDateField">Дата</label> <input date-picker type="text" id="forDateField" class="form-control" ng-model="vm.forDateFilter" maxlength="10" ng-pattern="/^(0?[1-9]|[12][0-9]|3[01])\.(0?[1-9]|1[012])\.((18|19|20)\d{2})$/" ng-change="gridVm.applyFilter()"/></div></div><div class="form-group pull-right"><label for="searchField" class="sr-only">Поиск</label> <input type="text" class="form-control search" id="searchField" maxlength="500" placeholder="Поиск" ng-model="vm.systemLogsGridModel.filter.searchString"/></div></div></form></div><div class="table-scroll"><table class="table table-hover" data-vhs-table><thead><tr ng-show="vm.systemLogsGridModel.entries.length > 0"><th data-sortable="eventDate desc(1)">Дата</th><th data-sortable="userId">Пользователь</th><th data-sortable="sessionUuid">Сессия</th><th data-sortable="source">Источник</th><th data-sortable="level">Уровень</th></tr></thead><tbody><tr ng-repeat="e in vm.systemLogsGridModel.entries"><td class="small-text">{{::e.eventDate | date:'dd.MM.yyyy HH:mm'}}</td><td><a ng-if="vm.systemPermissions.viewUsers && e.userId" href="#{{::vm.usersRouter.editUrl(e.userId)}}">{{::e.userId}} </a><span ng-if="!vm.systemPermissions.viewUsers || !e.userId">{{::e.userId}}</span></td><td class="small-text">{{::e.sessionUuid}}</td><td class="small-text">{{::e.source}}</td><td><span ng-class="{'logs-error': e.level == 'ERROR'}">{{::e.level}}</span> <a ng-if="::e.description" class="small-text" onclick="$(this).next().show(),$(this).hide()">подробности... </a><span class="small-text" style="display: none;">{{::e.description}}</span></td></tr><tr vhs-grid-empty data-vhs-empty-message="Записи системного журнала не найдены"></tr></tbody></table></div><div vhs-grid-pagination></div></div></div>