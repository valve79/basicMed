<div ng-controller="materials.PlaylistEditController as vm"><div class="col-lg-12 col-xs-12"><i class="vhs-purple-text">* Required fields</i></div><form class="form-horizontal" ng-submit="vm.save()" id="playlist_form" name="playlist_form"><div class="col-lg-6 col-sm-6 col-xs-12"><div class="form-group"><label class="col-sm-4 col-xs-4 control-label vhs-required">Title</label><div class="col-sm-8 col-xs-8 pull-right"><input type="text" class="form-control" id="nameField" name="nameField" ng-model="vm.playlist.name" maxlength="255" required> <span class="error" ng-show="playlist_form.nameField.$error.required">Please specify a playlist name</span></div></div><div class="form-group"><div class="col-lg-4 col-xs-4 control-label"><label class="vhs-required">Subject</label></div><div class="col-sm-8 col-xs-8 pull-right"><div reference-dropdown-selector vhs-reference-name="'subjects'" vhs-model="vm.playlist" vhs-model-property="'subjectId'" vhs-element-name="subjectField" vhs-nullable="false" vhs-required="true" vhs-editable="true"/><span class="error" ng-show="playlist_form.subjectField.$error.required">Please specify a subject</span></div></div><div class="form-group"><div class="col-lg-4 col-xs-4 control-label"><label class="vhs-required">Type</label></div><div class="col-sm-8 col-xs-8 pull-right"><div reference-dropdown-selector vhs-reference-name="'courseTypes'" vhs-model="vm.playlist" vhs-model-property="'typeId'" vhs-element-name="typeField" vhs-nullable="false" vhs-required="true" vhs-editable="false"/><span class="error" ng-show="playlist_form.typeField.$error.required">Please specify a type of the playlist</span></div></div><div class="form-group"><div class="col-lg-4 col-xs-4 control-label"><label class="vhs-required">Source</label></div><div class="col-sm-8 col-xs-8 pull-right"><div reference-dropdown-selector vhs-reference-name="'sources'" vhs-model="vm.playlist" vhs-model-property="'sourceId'" vhs-element-name="sourceField" vhs-nullable="false" vhs-required="true" vhs-editable="true"/><span class="error" ng-show="playlist_form.sourceField.$error.required">Please specify a source of the playlist</span></div></div><div class="form-group"><label class="col-sm-4 col-xs-4 control-label">Thumbnail</label><div class="col-sm-8 col-xs-8 pull-right"><img class="img-preview" ngf-src="vm.preview" ngf-background="vm.preview"> <img class="img-preview" ngf-src="vm.playlist.previewUrl" ngf-background="vm.playlist.previewUrl" ng-if="vm.playlistId && !vm.preview"><div class="input-group"><div class="fileUpload btn btn-block vhs-green vhs-white-text" ng-disabled="vm.disabledUploadButton"><span>Upload</span> <input type="file" class="upload" ngf-select ng-model="vm.preview" ngf-pattern=".jpg,.png,.bmp" id="uploadPreviewField" name="uploadPreviewField"/></div></div><span class="error" ng-show="playlist_form.uploadPreviewField.$error.pattern">Invalid file format. Please select a file with .jpg, .png, or .bmp extension</span></div></div></div><div class="col-lg-6 col-sm-6 col-xs-12"><div class="form-group"><div class="col-lg-4 col-xs-4 control-label"><label class="vhs-required">Level of complexity</label></div><div class="col-sm-8 col-xs-8 pull-right"><div reference-dropdown-selector vhs-reference-name="'complexityLevels'" vhs-model="vm.playlist" vhs-model-property="'complexityLevelId'" vhs-element-name="complexityLevelField" vhs-nullable="false" vhs-required="true"/><span class="error" ng-show="playlist_form.complexityLevelField.$error.required">Please specify a level of complexity</span></div></div><div class="form-group"><label class="col-sm-4 col-xs-4 control-label">Expiration</label><div class="col-sm-8 col-xs-8 form-inline pull-right"><div class="radio-inline col-lg-1 col-sm-12"><label class="control-label" style="font-weight:500"><input type="radio" ng-value="true" ng-model="vm.isValidityInPerpetuity" ng-click="vm.cleanValidity()"> Never expires</label></div><div class="radio-inline form-inline pull-right"><label class="control-label" style="font-weight:500"><input type="radio" ng-value="false" ng-model="vm.isValidityInPerpetuity"> To</label> <input date-picker ng-disabled="vm.isValidityInPerpetuity" type="text" size="10" style="margin-left: 5px;" class="form-control pull-right" ng-model="vm.playlist.validityText" id="validityInPerpetuityFieldId" name="validityInPerpetuityField" ng-pattern="/^(0?[1-9]|1[012])\/(0?[1-9]|[12][0-9]|3[01])\/((18|19|20)\d{2})$/"/></div></div><span class="error" ng-show="playlist_form.validityInPerpetuityField.$error.pattern">Invalid date format</span></div><div class="form-group"><label class="col-sm-4 col-xs-5 control-label">Summary</label><div class="col-sm-8 col-xs-8 pull-right"><textarea type="text" class="form-control" id="descriptionField" name="descriptionField" maxlength="2000" rows="3" ng-model="vm.playlist.summary"></textarea></div></div><div class="form-group"><div class="col-sm-4 col-xs-4"></div><div class="col-sm-8 col-xs-8"><div class="row form-btn-uploads"><div class="col-lg-6 col-xs-6"><button class="btn btn-block btn-xs vhs-green vhs-white-text" type="submit" ng-disabled="!playlist_form.$valid || vm.disabledSaveButton">Save</button></div><div class="col-lg-6 col-xs-6"><button class="btn btn-block btn-xs vhs-brown vhs-white-text" type="button" ng-click="vm.redirectOrClearFields()">Cancel</button></div></div></div></div></div><div class="col-lg-8"><table class="table" ng-if="vm.playlistMaterials.length > 0"><thead><tr><th width="5%">â„–</th><th width="35%">Title</th><th width="20%">Type</th><th width="10%">Duration</th><th width="10%">Size</th><th width="20%"></th></tr></thead><tbody><tr ng-repeat="material in vm.playlistMaterials"><td>{{$index + 1}}</td><td><a ng-show="::material.permissions.view" ng-href="#{{vm.materialsRouter.watchUrl(material.id)}}">{{::material.title}}</a> <span ng-hide="::material.permissions.view">{{::material.title}}</span></td><td>{{material.typeName}}</td><td>{{::material.duration | numeraljs:'00:00:00'}}</td><td>{{ material.fileSize | numeraljs:'0 b' }}</td><td><button class="btn btn-link" type="button" title="Up" ng-click="vm.moveUp($index)" ng-disabled="!vm.isMoveUp($index)"><span class="glyphicon glyphicon-arrow-up"></span></button> <button class="btn btn-link" type="button" title="Down" ng-click="vm.moveDown($index)" ng-disabled="!vm.isMoveDown($index)"><span class="glyphicon glyphicon-arrow-down"></span></button> <button class="btn btn-default btn-sm" type="button" ng-click="vm.removeMaterialFromPlaylist($index, material)"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span>Remove</button></td></tr></tbody></table><div class="form-group"><button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseform" aria-expanded="false" aria-controls="collapseExample">Add a material <span class="caret"></span></button></div><div class="collapse" id="collapseform" vhs-grid data-grid-model-path="vm.userMaterialsGridModel" data-vhs-grid-uuid="userMaterialsGrid"><div class="table-scroll"><table class="table table-hover table-striped" data-vhs-table><thead><tr><th>Title</th><th>Type</th><th></th></tr></thead><tbody><tr ng-repeat="material in vm.userMaterialsGridModel.entries"><td><a ng-show="::material.permissions.view" ng-href="#{{vm.materialsRouter.watchUrl(material.id)}}">{{::material.title}}</a> <span ng-hide="::material.permissions.view">{{::material.title}}</span></td><td>{{ ::material.typeName }}</td><td><div class="btn-group btn-group-xs"><a class="btn btn-primary" ng-click="vm.addMaterialToPlaylist(material)">Add</a></div></td></tr><tr ng-if="vm.userMaterialsGridModel.entries.length == 0"><td colspan="3">Materials not found</td></tr></tbody></table></div><div vhs-grid-pagination></div></div></div><div class="col-lg-12"><div class="form-group" ng-if="vm.permissionsWithUsersAndGroups.length > 0"><div users-and-groups-selector vhs-object-model="vm" vhs-object-model-property="'playlist'" vhs-current-user-id-model="vm.playlist" vhs-current-user-id-model-property="'ownerId'" vhs-current-user-name-model="vm.playlist" vhs-current-user-name-model-property="'ownerFullName'" vhs-permissions-with-users-and-groups-model="vm.permissionsWithUsersAndGroups"></div></div></div></form></div>